<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Sequel::Plugins::PgTypecastOnLoad</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      function popupCode(url) {
        window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
      }
      
      function toggleCode(id) {
        var code = document.getElementById(id)
      
        code.style.display = code.style.display != 'block' ? 'block' : 'none'
        return true
      }
      
      // Make codeblocks hidden by default
      document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>module</span>
          Sequel::Plugins::PgTypecastOnLoad
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/lib/sequel/plugins/pg_typecast_on_load_rb.html">lib/sequel/plugins/pg_typecast_on_load.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>The <a href="PgTypecastOnLoad.html">PgTypecastOnLoad</a> plugin exists
            because when you connect to PostgreSQL using the do and swift adapters, <a
            href="../../Sequel.html">Sequel</a> doesn&#39;t have complete control over
            typecasting, and may return columns as strings instead of how the native
            postgres adapter would typecast them.  This is mostly needed for the
            additional support that the pg_* extensions add for advanced PostgreSQL
            types such as arrays. This plugin is not needed if using the postgres or
            jdbc/postgresql adapters.</p>
            
            <p>This plugin makes model loading to do the same conversion that the native
            postgres adapter would do for all columns given.  You can either specify
            the columns to typecast on load in the plugin call itself, or afterwards
            using add_pg_typecast_on_load_columns:</p>
            
            <pre class="ruby"><span class="ruby-comment"># aliases =&gt; text[] column</span>&#x000A;<span class="ruby-comment"># config =&gt; hstore column</span>&#x000A;&#x000A;<span class="ruby-constant">Album</span>.<span class="ruby-identifier">plugin</span> :<span class="ruby-identifier">pg_typecast_on_load</span>, :<span class="ruby-identifier">aliases</span>, :<span class="ruby-identifier">config</span>&#x000A;<span class="ruby-comment"># or:</span>&#x000A;<span class="ruby-constant">Album</span>.<span class="ruby-identifier">plugin</span> :<span class="ruby-identifier">pg_typecast_on_load</span>&#x000A;<span class="ruby-constant">Album</span>.<span class="ruby-identifier">add_pg_typecast_on_load_columns</span> :<span class="ruby-identifier">aliases</span>, :<span class="ruby-identifier">config</span></pre>
            
            <p>This plugin only handles values that the adapter returns as strings.  If
            the adapter returns a value other than a string, this plugin will have no
            effect.  You may be able to use the regular typecast_on_load plugin to
            handle those cases.</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a href="#method-c-configure">configure</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='class-list'>
            <h2>Classes and Modules</h2>
            <ol>
              <li><a href="PgTypecastOnLoad/ClassMethods.html">Sequel::Plugins::PgTypecastOnLoad::ClassMethods</a></li>
              <li><a href="PgTypecastOnLoad/InstanceMethods.html">Sequel::Plugins::PgTypecastOnLoad::InstanceMethods</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-configure'>
                <a name='method-c-configure'></a>
                <div class='synopsis'>
                  <span class='name'>configure</span>
                  <span class='arguments'>(model, *columns)</span>
                </div>
                <div class='description'>
                  
                  <p>Call add_pg_typecast_on_load_columns on the passed column arguments.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-configure-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-configure-source'><span class="ruby-comment"># File lib/sequel/plugins/pg_typecast_on_load.rb, line 33</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">configure</span>(<span class="ruby-identifier">model</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">columns</span>)&#x000A;  <span class="ruby-identifier">model</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-ivar">@pg_typecast_on_load_columns</span> <span class="ruby-operator">||=</span> []&#x000A;    <span class="ruby-identifier">add_pg_typecast_on_load_columns</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">columns</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="https://github.com/rdoc/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
    </div>
  </body>
</html>
