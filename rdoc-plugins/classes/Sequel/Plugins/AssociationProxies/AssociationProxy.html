<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Sequel::Plugins::AssociationProxies::AssociationProxy</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Sequel::Plugins::AssociationProxies::AssociationProxy
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../../../files/lib/sequel/plugins/association_proxies_rb.html">lib/sequel/plugins/association_proxies.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Superclass:
          <strong>BasicObject</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>A proxy for the association.  Calling an array method will load the
            associated objects and call the method on the associated object array.
            Calling any other method will call that method on the association&#39;s
            dataset.</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-new">new</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-method_missing">method_missing</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DEFAULT_PROXY_TO_DATASET</td>
                    <td>=</td>
                    <td class='context-item-value'>proc{|opts| !array.respond_to?(opts[:method])}</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Default proc used to determine whether to sent the method to the dataset.
                      If the array would respond to it, sends it to the array instead of the
                      dataset.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(instance, reflection, proxy_argument, &proxy_block)</span>
                </div>
                <div class='description'>
                  
                  <p>Set the association reflection to use, and whether the association should
                  be reloaded if an array method is called.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File lib/sequel/plugins/association_proxies.rb, line 72</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">instance</span>, <span class="ruby-identifier">reflection</span>, <span class="ruby-identifier">proxy_argument</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">proxy_block</span>)&#x000A;  <span class="ruby-ivar">@instance</span> = <span class="ruby-identifier">instance</span>&#x000A;  <span class="ruby-ivar">@reflection</span> = <span class="ruby-identifier">reflection</span>&#x000A;  <span class="ruby-ivar">@proxy_argument</span> = <span class="ruby-identifier">proxy_argument</span>&#x000A;  <span class="ruby-ivar">@proxy_block</span> = <span class="ruby-identifier">proxy_block</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-method_missing'>
                <a name='method-i-method_missing'></a>
                <div class='synopsis'>
                  <span class='name'>method_missing</span>
                  <span class='arguments'>(meth, *args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Call the method given on the array of associated objects if the method is
                  an array method, otherwise call the method on the association&#39;s
                  dataset.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-method_missing-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-method_missing-source'><span class="ruby-comment"># File lib/sequel/plugins/association_proxies.rb, line 81</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">meth</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">v</span> = <span class="ruby-keyword">if</span> <span class="ruby-ivar">@instance</span>.<span class="ruby-identifier">model</span>.<span class="ruby-identifier">association_proxy_to_dataset</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value">:method=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">meth</span>, <span class="ruby-value">:arguments=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">args</span>, <span class="ruby-value">:block=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">block</span>, <span class="ruby-value">:instance=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@instance</span>, <span class="ruby-value">:reflection=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@reflection</span>, <span class="ruby-value">:proxy_argument=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@proxy_argument</span>, <span class="ruby-value">:proxy_block=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@proxy_block</span>)&#x000A;    <span class="ruby-ivar">@instance</span>.<span class="ruby-identifier">send</span>(<span class="ruby-ivar">@reflection</span>.<span class="ruby-identifier">dataset_method</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@instance</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:load_associated_objects</span>, <span class="ruby-ivar">@reflection</span>, <span class="ruby-ivar">@proxy_argument</span>, <span class="ruby-operator">&amp;</span><span class="ruby-ivar">@proxy_block</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">v</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">meth</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
