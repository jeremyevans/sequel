<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Sequel::Postgres::PGRow::Splitter</title>
    <meta content='text/html; charset=US-ASCII' http-equiv='Content-Type'>
    <link href='../../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Sequel::Postgres::PGRow::Splitter
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../../../files/lib/sequel/extensions/pg_row_rb.html">lib/sequel/extensions/pg_row.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../PGRow.html">PGRow</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>This parser-like class splits the PostgreSQL row-valued/composite type
            output string format into an array of strings.  Note this class makes no
            attempt to handle all input formats that PostgreSQL will accept, it only
            handles the output format that PostgreSQL uses.</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-parse">parse</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CLOSE_PAREN</td>
                    <td>=</td>
                    <td class='context-item-value'>/\)/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>OPEN_PAREN</td>
                    <td>=</td>
                    <td class='context-item-value'>/\(/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUOTED_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/(\\.|""|[^"])*/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUOTE_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/"/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUOTE_SEP_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/"[,)]/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>REPLACE_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/\\(.)|"(")/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>REPLACE_WITH</td>
                    <td>=</td>
                    <td class='context-item-value'>'\1\2'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>SEP_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/[,)]/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>UNQUOTED_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/[^,)]*/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-parse'>
                <a name='method-i-parse'></a>
                <div class='synopsis'>
                  <span class='name'>parse</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Split the stored string into an array of strings, handling the different
                  types of quoting.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-parse-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-parse-source'><span class="ruby-comment"># File lib/sequel/extensions/pg_row.rb, line 235</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@result</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@result</span>&#x000A;  <span class="ruby-identifier">values</span> = []&#x000A;  <span class="ruby-identifier">skip</span>(<span class="ruby-constant">OPEN_PAREN</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">skip</span>(<span class="ruby-constant">CLOSE_PAREN</span>)&#x000A;    <span class="ruby-identifier">values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-keyword">until</span> <span class="ruby-identifier">eos?</span>&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">skip</span>(<span class="ruby-constant">QUOTE_RE</span>)&#x000A;        <span class="ruby-identifier">values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">scan</span>(<span class="ruby-constant">QUOTED_RE</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-constant">REPLACE_RE</span>, <span class="ruby-constant">REPLACE_WITH</span>)&#x000A;        <span class="ruby-identifier">skip</span>(<span class="ruby-constant">QUOTE_SEP_RE</span>)&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-identifier">v</span> = <span class="ruby-identifier">scan</span>(<span class="ruby-constant">UNQUOTED_RE</span>)&#x000A;        <span class="ruby-identifier">values</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">v</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">empty?</span>)&#x000A;        <span class="ruby-identifier">skip</span>(<span class="ruby-constant">SEP_RE</span>)&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">values</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
