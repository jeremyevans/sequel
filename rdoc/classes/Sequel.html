<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>Sequel</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='class' id='wrapper'>
<div class='header'>
<h1 class='name'><span class='type'>module</span>
Sequel
</h1>
<ol class='paths'>
<li>
<a href="../files/lib/sequel/ast_transformer_rb.html">lib/sequel/ast_transformer.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/connection_pool_rb.html">lib/sequel/connection_pool.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/connection_pool/sharded_single_rb.html">lib/sequel/connection_pool/sharded_single.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/connection_pool/sharded_threaded_rb.html">lib/sequel/connection_pool/sharded_threaded.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/connection_pool/single_rb.html">lib/sequel/connection_pool/single.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/connection_pool/threaded_rb.html">lib/sequel/connection_pool/threaded.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/core_rb.html">lib/sequel/core.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database_rb.html">lib/sequel/database.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/connecting_rb.html">lib/sequel/database/connecting.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/dataset_rb.html">lib/sequel/database/dataset.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/dataset_defaults_rb.html">lib/sequel/database/dataset_defaults.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/features_rb.html">lib/sequel/database/features.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/logging_rb.html">lib/sequel/database/logging.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/misc_rb.html">lib/sequel/database/misc.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/query_rb.html">lib/sequel/database/query.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/schema_generator_rb.html">lib/sequel/database/schema_generator.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/schema_methods_rb.html">lib/sequel/database/schema_methods.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/database/transactions_rb.html">lib/sequel/database/transactions.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset_rb.html">lib/sequel/dataset.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/actions_rb.html">lib/sequel/dataset/actions.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/dataset_module_rb.html">lib/sequel/dataset/dataset_module.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/features_rb.html">lib/sequel/dataset/features.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/graph_rb.html">lib/sequel/dataset/graph.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/misc_rb.html">lib/sequel/dataset/misc.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/placeholder_literalizer_rb.html">lib/sequel/dataset/placeholder_literalizer.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/prepared_statements_rb.html">lib/sequel/dataset/prepared_statements.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/query_rb.html">lib/sequel/dataset/query.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/dataset/sql_rb.html">lib/sequel/dataset/sql.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/deprecated_rb.html">lib/sequel/deprecated.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/exceptions_rb.html">lib/sequel/exceptions.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/extensions/migration_rb.html">lib/sequel/extensions/migration.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model_rb.html">lib/sequel/model.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model/associations_rb.html">lib/sequel/model/associations.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model/base_rb.html">lib/sequel/model/base.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model/dataset_module_rb.html">lib/sequel/model/dataset_module.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model/default_inflections_rb.html">lib/sequel/model/default_inflections.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model/errors_rb.html">lib/sequel/model/errors.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model/exceptions_rb.html">lib/sequel/model/exceptions.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model/inflections_rb.html">lib/sequel/model/inflections.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/model/plugins_rb.html">lib/sequel/model/plugins.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/sql_rb.html">lib/sequel/sql.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/timezones_rb.html">lib/sequel/timezones.rb</a>
</li>
<li class='other'>
<a href="../files/lib/sequel/version_rb.html">lib/sequel/version.rb</a>
</li>
<li>
<a class='show' href='#' onclick='this.parentNode.parentNode.className += &quot; expanded&quot;; this.parentNode.removeChild(this); return false'>show all</a>
</li>
</ol>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<p>Top level module for <a href="Sequel.html"><code>Sequel</code></a></p>

<p>There are some module methods that are added via metaprogramming, one for each supported adapter.  For example:</p>

<pre>DB = Sequel.sqlite # Memory database&#x000A;DB = Sequel.sqlite(&#39;blog.db&#39;)&#x000A;DB = Sequel.postgres(&#39;database_name&#39;,&#x000A;       user:&#39;user&#39;, &#x000A;       password: &#39;password&#39;,&#x000A;       host: &#39;host&#39;&#x000A;       port: 5432, &#x000A;       max_connections: 10)</pre>

<p>If a block is given to these methods, it is passed the opened <a href="Sequel/Database.html"><code>Database</code></a> object, which is closed (disconnected) when the block exits, just like a block passed to <a href="Sequel.html#method-c-connect"><code>Sequel.connect</code></a>.  For example:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">sqlite</span>(<span class="ruby-string">&#39;blog.db&#39;</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">db</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span> <span class="ruby-identifier">db</span>[<span class="ruby-value">:users</span>].<span class="ruby-identifier">count</span>}</pre>

<p>For a more expanded introduction, see the <a href="../files/README_rdoc.html">README</a>. For a quicker introduction, see the <a href="../files/doc/cheat_sheet_rdoc.html">cheat sheet</a>.</p>
</div>
<div id='method-list'>
<h2>Methods</h2>
<h3>Public Class</h3>
<ol>
<li><a href="#method-c-condition_specifier-3F">condition_specifier?</a></li>
<li><a href="#method-c-connect">connect</a></li>
<li><a href="#method-c-convert_exception_class">convert_exception_class</a></li>
<li><a href="#attribute-c-convert_two_digit_years">convert_two_digit_years</a></li>
<li><a href="#method-c-core_extensions-3F">core_extensions?</a></li>
<li><a href="#attribute-c-datetime_class">datetime_class</a></li>
<li><a href="#method-c-elapsed_seconds_since">elapsed_seconds_since</a></li>
<li><a href="#method-c-extension">extension</a></li>
<li><a href="#method-c-inflections">inflections</a></li>
<li><a href="#method-c-json_parser_error_class">json_parser_error_class</a></li>
<li><a href="#method-c-migration">migration</a></li>
<li><a href="#method-c-object_to_json">object_to_json</a></li>
<li><a href="#method-c-parse_json">parse_json</a></li>
<li><a href="#method-c-recursive_map">recursive_map</a></li>
<li><a href="#method-c-require">require</a></li>
<li><a href="#attribute-c-single_threaded">single_threaded</a></li>
<li><a href="#method-c-split_symbol">split_symbol</a></li>
<li><a href="#method-c-split_symbols-3D">split_symbols=</a></li>
<li><a href="#method-c-split_symbols-3F">split_symbols?</a></li>
<li><a href="#method-c-start_timer">start_timer</a></li>
<li><a href="#method-c-string_to_date">string_to_date</a></li>
<li><a href="#method-c-string_to_datetime">string_to_datetime</a></li>
<li><a href="#method-c-string_to_time">string_to_time</a></li>
<li><a href="#method-c-synchronize">synchronize</a></li>
<li><a href="#method-c-transaction">transaction</a></li>
<li><a href="#method-c-version">version</a></li>
<li><a href="#method-c-virtual_row">virtual_row</a></li>
</ol>
</div>
<div id='context'>
<div id='includes'>
<h2>Included modules</h2>
<ol>
<li><a href="Sequel/SQL/Constants.html">SQL::Constants</a></li>
</ol>
</div>
</div>
<div id='class-list'>
<h2>Classes and Modules</h2>
<ol>
<li><a href="Sequel/Deprecation.html">Sequel::Deprecation</a></li>
<li><a href="Sequel/Inflections.html">Sequel::Inflections</a></li>
<li><a href="Sequel/Plugins.html">Sequel::Plugins</a></li>
<li><a href="Sequel/SQL.html">Sequel::SQL</a></li>
<li><a href="Sequel/Schema.html">Sequel::Schema</a></li>
<li><a href="Sequel/Timezones.html">Sequel::Timezones</a></li>
<li><a href="Sequel/ASTTransformer.html">Sequel::ASTTransformer</a></li>
<li><a href="Sequel/BasicObject.html">Sequel::BasicObject</a></li>
<li><a href="Sequel/ConnectionPool.html">Sequel::ConnectionPool</a></li>
<li><a href="Sequel/Database.html">Sequel::Database</a></li>
<li><a href="Sequel/Dataset.html">Sequel::Dataset</a></li>
<li><a href="Sequel/Error.html">Sequel::Error</a></li>
<li><a href="Sequel/HookFailed.html">Sequel::HookFailed</a></li>
<li><a href="Sequel/IntegerMigrator.html">Sequel::IntegerMigrator</a></li>
<li><a href="Sequel/LiteralString.html">Sequel::LiteralString</a></li>
<li><a href="Sequel/Migration.html">Sequel::Migration</a></li>
<li><a href="Sequel/MigrationAlterTableReverser.html">Sequel::MigrationAlterTableReverser</a></li>
<li><a href="Sequel/MigrationDSL.html">Sequel::MigrationDSL</a></li>
<li><a href="Sequel/MigrationReverser.html">Sequel::MigrationReverser</a></li>
<li><a href="Sequel/Migrator.html">Sequel::Migrator</a></li>
<li><a href="Sequel/Model.html">Sequel::Model</a></li>
<li><a href="Sequel/NoMatchingRow.html">Sequel::NoMatchingRow</a></li>
<li><a href="Sequel/Qualifier.html">Sequel::Qualifier</a></li>
<li><a href="Sequel/SQLTime.html">Sequel::SQLTime</a></li>
<li><a href="Sequel/ShardedSingleConnectionPool.html">Sequel::ShardedSingleConnectionPool</a></li>
<li><a href="Sequel/ShardedThreadedConnectionPool.html">Sequel::ShardedThreadedConnectionPool</a></li>
<li><a href="Sequel/SimpleMigration.html">Sequel::SimpleMigration</a></li>
<li><a href="Sequel/SingleConnectionPool.html">Sequel::SingleConnectionPool</a></li>
<li><a href="Sequel/ThreadedConnectionPool.html">Sequel::ThreadedConnectionPool</a></li>
<li><a href="Sequel/TimestampMigrator.html">Sequel::TimestampMigrator</a></li>
<li><a href="Sequel/ValidationFailed.html">Sequel::ValidationFailed</a></li>
</ol>
</div>
<div id='section'>
<div id='constants-list'>
<h2>Constants</h2>
<div class='name-list'>
<table summary='Constants'>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>ADAPTER_MAP</td>
<td>=</td>
<td class='context-item-value'>{}</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Hash of adapters that have been used. The key is the adapter scheme symbol, and the value is the <a href="Sequel/Database.html"><code>Database</code></a> subclass.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>AdapterNotFound</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when the adapter requested doesn&#39;t exist or can&#39;t be loaded.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>CheckConstraintViolation</td>
<td>=</td>
<td class='context-item-value'>Class.new(ConstraintViolation)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when <a href="Sequel.html"><code>Sequel</code></a> determines a database check constraint has been violated.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>ConstraintViolation</td>
<td>=</td>
<td class='context-item-value'>Class.new(DatabaseError)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Generic error raised when <a href="Sequel.html"><code>Sequel</code></a> determines a database constraint has been violated.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>DATABASES</td>
<td>=</td>
<td class='context-item-value'>[]</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Array of all databases to which <a href="Sequel.html"><code>Sequel</code></a> has connected.  If you are developing an application that can connect to an arbitrary number of  databases, delete the database objects from this (or use the :keep_reference <a href="Sequel/Database.html"><code>Database</code></a> option or a block when connecting) or they will not get garbage collected.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>DEFAULT_INFLECTIONS_PROC</td>
<td>=</td>
<td class='context-item-value'>proc do
plural(/$/, 's')
plural(/s$/i, 's')
plural(/(alias|(?:stat|octop|vir|b)us)$/i, '\1es')
plural(/(buffal|tomat)o$/i, '\1oes')
plural(/([ti])um$/i, '\1a')
plural(/sis$/i, 'ses')
plural(/(?:([^f])fe|([lr])f)$/i, '\1\2ves')
plural(/(hive)$/i, '\1s')
plural(/([^aeiouy]|qu)y$/i, '\1ies')
plural(/(x|ch|ss|sh)$/i, '\1es')
plural(/(matr|vert|ind)ix|ex$/i, '\1ices')
plural(/([m|l])ouse$/i, '\1ice')

singular(/s$/i, '')
singular(/([ti])a$/i, '\1um')
singular(/(analy|ba|cri|diagno|parenthe|progno|synop|the)ses$/i, '\1sis')
singular(/([^f])ves$/i, '\1fe')
singular(/([h|t]ive)s$/i, '\1')
singular(/([lr])ves$/i, '\1f')
singular(/([^aeiouy]|qu)ies$/i, '\1y')
singular(/(m)ovies$/i, '\1ovie')
singular(/(x|ch|ss|sh)es$/i, '\1')
singular(/([m|l])ice$/i, '\1ouse')
singular(/buses$/i, 'bus')
singular(/oes$/i, 'o')
singular(/shoes$/i, 'shoe')
singular(/(alias|(?:stat|octop|vir|b)us)es$/i, '\1')
singular(/(vert|ind)ices$/i, '\1ex')
singular(/matrices$/i, 'matrix')

irregular('person', 'people')
irregular('man', 'men')
irregular('child', 'children')
irregular('sex', 'sexes')
irregular('move', 'moves')
irregular('quiz', 'quizzes')
irregular('testis', 'testes')

uncountable(%w(equipment information rice money species series fish sheep news))
end</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Proc that is instance_execed to create the default inflections for both the model inflector and the inflector extension.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>DatabaseConnectionError</td>
<td>=</td>
<td class='context-item-value'>Class.new(DatabaseError)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when the <a href="Sequel.html"><code>Sequel</code></a> is unable to connect to the database with the connection parameters it was given.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>DatabaseDisconnectError</td>
<td>=</td>
<td class='context-item-value'>Class.new(DatabaseError)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised by adapters when they determine that the connection to the database has been lost.  Instructs the connection pool code to  remove that connection from the pool so that other connections can be acquired automatically.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>DatabaseError</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Generic error raised by the database adapters, indicating a problem originating from the database server.  Usually raised because incorrect <a href="Sequel/SQL.html"><code>SQL</code></a> syntax is used.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>DatabaseLockTimeout</td>
<td>=</td>
<td class='context-item-value'>Class.new(DatabaseError)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when <a href="Sequel.html"><code>Sequel</code></a> determines the database could not acquire a necessary lock before timing out. Use of <a href="Sequel/Dataset.html#method-i-nowait"><code>Dataset#nowait</code></a> can often cause this exception when retrieving rows.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>ForeignKeyConstraintViolation</td>
<td>=</td>
<td class='context-item-value'>Class.new(ConstraintViolation)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when <a href="Sequel.html"><code>Sequel</code></a> determines a database foreign key constraint has been violated.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>InvalidOperation</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised on an invalid operation, such as trying to update or delete a joined or grouped dataset when the database does not support that.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>InvalidValue</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when attempting an invalid type conversion.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>MAJOR</td>
<td>=</td>
<td class='context-item-value'>5</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>The major version of <a href="Sequel.html"><code>Sequel</code></a>.  Only bumped for major changes.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>MINOR</td>
<td>=</td>
<td class='context-item-value'>23</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>The minor version of <a href="Sequel.html"><code>Sequel</code></a>.  Bumped for every non-patch level release, generally around once a month.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>MassAssignmentRestriction</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Raised when a mass assignment method is called in strict mode with either a restricted column or a column without a setter method.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>NoExistingObject</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Exception class raised when <code>require_modification</code> is set and an UPDATE or DELETE statement to modify the dataset doesn&#39;t modify a single row.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>NotNullConstraintViolation</td>
<td>=</td>
<td class='context-item-value'>Class.new(ConstraintViolation)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when <a href="Sequel.html"><code>Sequel</code></a> determines a database NOT NULL constraint has been violated.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>OPTS</td>
<td>=</td>
<td class='context-item-value'>{}.freeze</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Frozen hash used as the default options hash for most options.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>PoolTimeout</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when the connection pool cannot acquire a database connection before the timeout.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>Rollback</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> that you should raise to signal a rollback of the current transaction. The transaction block will catch this exception, rollback the current transaction, and won&#39;t reraise it (unless a reraise is requested).</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>SHARED_ADAPTER_MAP</td>
<td>=</td>
<td class='context-item-value'>{}</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Hash of shared adapters that have been registered.  The key is the adapter scheme symbol, and the value is the <a href="Sequel.html"><code>Sequel</code></a> module containing the shared adapter.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>SPLIT_SYMBOL_CACHE</td>
<td>=</td>
<td class='context-item-value'>{}</td>
<td>&nbsp;</td>
<td class='context-item-desc'></td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>SerializationFailure</td>
<td>=</td>
<td class='context-item-value'>Class.new(DatabaseError)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when <a href="Sequel.html"><code>Sequel</code></a> determines a serialization failure/deadlock in the database.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>TINY</td>
<td>=</td>
<td class='context-item-value'>0</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>The tiny version of <a href="Sequel.html"><code>Sequel</code></a>.  Usually 0, only bumped for bugfix releases that fix regressions from previous versions.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>UndefinedAssociation</td>
<td>=</td>
<td class='context-item-value'>Class.new(Error)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>Raised when an undefined association is used when eager loading.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>UniqueConstraintViolation</td>
<td>=</td>
<td class='context-item-value'>Class.new(ConstraintViolation)</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p><a href="Sequel/Error.html"><code>Error</code></a> raised when <a href="Sequel.html"><code>Sequel</code></a> determines a database unique constraint has been violated.</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>VERSION</td>
<td>=</td>
<td class='context-item-value'>[MAJOR, MINOR, TINY].join('.').freeze</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>The version of <a href="Sequel.html"><code>Sequel</code></a> you are using, as a string (e.g. “2.11.0”)</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>VERSION_NUMBER</td>
<td>=</td>
<td class='context-item-value'>MAJOR*10000 + MINOR*10 + TINY</td>
<td>&nbsp;</td>
<td class='context-item-desc'>
<p>The version of <a href="Sequel.html"><code>Sequel</code></a> you are using, as a number (2.11.0 -&gt; 20110)</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>VIRTUAL_ROW</td>
<td>=</td>
<td class='context-item-value'>new</td>
<td>&nbsp;</td>
<td class='context-item-desc'></td>
</tr>
</table>
</div>
</div>
<div id='aliases-list'>
<h2>Public Class Aliases</h2>
<div class='name-list'>
<table summary='Public Class Aliases'>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>orig_require</td>
<td>-&gt;</td>
<td class='context-item-value'><a href="#method-c-require">require</a></td>
<td class='context-item-desc'>
<p>Alias of original require method, as <a href="Sequel.html#method-c-require"><code>Sequel.require</code></a> is does a relative require for backwards compatibility.</p>
</td>
</tr>
</table>
</div>
</div>
<div id='attribute-list'>
<h2 class='section-bar'>Attributes</h2>
<div class='name-list'>
<table>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>
<a name='attribute-c-convert_two_digit_years'>convert_two_digit_years</a>
</td>
<td class='context-item-value'>[RW]</td>
<td class='context-item-desc'>
<p><a href="Sequel.html"><code>Sequel</code></a> converts two digit years in <code>Date</code>s and <code>DateTime</code>s by default, so 01/02/03 is interpreted at January 2nd, 2003, and 12/13/99 is interpreted as December 13, 1999. You can override this to treat those dates as January 2nd, 0003 and December 13, 0099, respectively, by:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">convert_two_digit_years</span> = <span class="ruby-keyword">false</span></pre>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>
<a name='attribute-c-datetime_class'>datetime_class</a>
</td>
<td class='context-item-value'>[RW]</td>
<td class='context-item-desc'>
<p><a href="Sequel.html"><code>Sequel</code></a> can use either <code>Time</code> or <code>DateTime</code> for times returned from the database.  It defaults to <code>Time</code>.  To change it to <code>DateTime</code>:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">datetime_class</span> = <span class="ruby-constant">DateTime</span></pre>

<p>Note that <code>Time</code> and <code>DateTime</code> objects have a different API, and in cases where they implement the same methods, they often implement them differently (e.g. + using seconds on <code>Time</code> and days on <code>DateTime</code>).</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>
<a name='attribute-c-single_threaded'>single_threaded</a>
</td>
<td class='context-item-value'>[RW]</td>
<td class='context-item-desc'>
<p>Set whether <a href="Sequel.html"><code>Sequel</code></a> is being used in single threaded mode. by default, <a href="Sequel.html"><code>Sequel</code></a> uses a thread-safe connection pool, which isn&#39;t as fast as the single threaded connection pool, and also has some additional thread safety checks.  If your program will only have one thread, and speed is a priority, you should set this to true:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">single_threaded</span> = <span class="ruby-keyword">true</span></pre>
</td>
</tr>
</table>
</div>
</div>
<div id='methods'>
<h2>Public Class methods</h2>
<div class='method public-class' id='method-method-c-condition_specifier-3F'>
<a name='method-c-condition_specifier-3F'></a>
<div class='synopsis'>
<span class='name'>condition_specifier?</span>
<span class='arguments'>(obj)</span>

</div>
<div class='description'>

<p>Returns true if the passed object could be a specifier of conditions, false otherwise. Currently, <a href="Sequel.html"><code>Sequel</code></a> considers hashes and arrays of two element arrays as condition specifiers.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">condition_specifier?</span>({}) <span class="ruby-comment"># =&gt; true</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">condition_specifier?</span>([[<span class="ruby-value">1</span>, <span class="ruby-value">2</span>]]) <span class="ruby-comment"># =&gt; true</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">condition_specifier?</span>([]) <span class="ruby-comment"># =&gt; false</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">condition_specifier?</span>([<span class="ruby-value">1</span>]) <span class="ruby-comment"># =&gt; false</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">condition_specifier?</span>(<span class="ruby-value">1</span>) <span class="ruby-comment"># =&gt; false</span></pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-condition_specifier-3F-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-condition_specifier-3F-source'>   <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">77</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">condition_specifier?</span>(<span class="ruby-identifier">obj</span>)&#x000A;<span class="line-num">78</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">obj</span>&#x000A;<span class="line-num">79</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>&#x000A;<span class="line-num">80</span>     <span class="ruby-keyword">true</span>&#x000A;<span class="line-num">81</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>&#x000A;<span class="line-num">82</span>     <span class="ruby-operator">!</span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">ValueList</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">all?</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">i</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>)}&#x000A;<span class="line-num">83</span>   <span class="ruby-keyword">else</span>&#x000A;<span class="line-num">84</span>     <span class="ruby-keyword">false</span>&#x000A;<span class="line-num">85</span>   <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">86</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-connect'>
<a name='method-c-connect'></a>
<div class='synopsis'>
<span class='name'>connect</span>
<span class='arguments'>(*args, &block)</span>

</div>
<div class='description'>

<p>Creates a new database object based on the supplied connection string and optional arguments.  The specified scheme determines the database class used, and the rest of the string specifies the connection options. For example:</p>

<pre class="ruby"><span class="ruby-constant">DB</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-string">&#39;sqlite:/&#39;</span>) <span class="ruby-comment"># Memory database</span>&#x000A;<span class="ruby-constant">DB</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-string">&#39;sqlite://blog.db&#39;</span>) <span class="ruby-comment"># ./blog.db</span>&#x000A;<span class="ruby-constant">DB</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-string">&#39;sqlite:///blog.db&#39;</span>) <span class="ruby-comment"># /blog.db</span>&#x000A;<span class="ruby-constant">DB</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-string">&#39;postgres://user:password@host:port/database_name&#39;</span>)&#x000A;<span class="ruby-constant">DB</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-string">&#39;sqlite:///blog.db&#39;</span>, <span class="ruby-value">max_connections:</span> <span class="ruby-value">10</span>)</pre>

<p>You can also pass a single options hash:</p>

<pre class="ruby"><span class="ruby-constant">DB</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-value">adapter:</span> <span class="ruby-string">&#39;sqlite&#39;</span>, <span class="ruby-value">database:</span> <span class="ruby-string">&#39;./blog.db&#39;</span>)</pre>

<p>If a block is given, it is passed the opened <code>Database</code> object, which is closed when the block exits.  For example:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-string">&#39;sqlite://blog.db&#39;</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">db</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span> <span class="ruby-identifier">db</span>[<span class="ruby-value">:users</span>].<span class="ruby-identifier">count</span>}</pre>

<p>If a block is not given, a reference to this database will be held in <code>Sequel::DATABASES</code> until it is removed manually.  This is by design, and used by <code>Sequel::Model</code> to pick the default database.  It is recommended to pass a block if you do not want the resulting <a href="Sequel/Database.html"><code>Database</code></a> object to remain in memory until the process terminates, or use the <code>keep_reference: false</code> <a href="Sequel/Database.html"><code>Database</code></a> option.</p>

<p>For details, see the <a href="../files/doc/opening_databases_rdoc.html">“Connecting to a Database” guide</a>. To set up a primary/replica or sharded database connection, see the <a href="../files/doc/sharding_rdoc.html">“Primary/Replica Database Configurations and Sharding” guide</a>.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-connect-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-connect-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">120</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">connect</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">121</span>   <span class="ruby-constant">Database</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">122</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-convert_exception_class'>
<a name='method-c-convert_exception_class'></a>
<div class='synopsis'>
<span class='name'>convert_exception_class</span>
<span class='arguments'>(exception, klass)</span>

</div>
<div class='description'>

<p>Convert the <code>exception</code> to the given class.  The given class should be <code>Sequel::Error</code> or a subclass.  Returns an instance of <code>klass</code> with the message and backtrace of <code>exception</code>.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-convert_exception_class-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-convert_exception_class-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">133</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">convert_exception_class</span>(<span class="ruby-identifier">exception</span>, <span class="ruby-identifier">klass</span>)&#x000A;<span class="line-num">134</span>   <span class="ruby-keyword">return</span> <span class="ruby-identifier">exception</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-identifier">klass</span>)&#x000A;<span class="line-num">135</span>   <span class="ruby-identifier">e</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{exception.class}: #{exception.message}&quot;</span>)&#x000A;<span class="line-num">136</span>   <span class="ruby-identifier">e</span>.<span class="ruby-identifier">wrapped_exception</span> = <span class="ruby-identifier">exception</span>&#x000A;<span class="line-num">137</span>   <span class="ruby-identifier">e</span>.<span class="ruby-identifier">set_backtrace</span>(<span class="ruby-identifier">exception</span>.<span class="ruby-identifier">backtrace</span>)&#x000A;<span class="line-num">138</span>   <span class="ruby-identifier">e</span>&#x000A;<span class="line-num">139</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-core_extensions-3F'>
<a name='method-c-core_extensions-3F'></a>
<div class='synopsis'>
<span class='name'>core_extensions?</span>
<span class='arguments'>()</span>

</div>
<div class='description'>

<p>Assume the core extensions are not loaded by default, if the <a href="../files/doc/core_extensions_rdoc.html">core_extensions</a> extension is loaded, this will be overridden.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-core_extensions-3F-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-core_extensions-3F-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">126</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">core_extensions?</span>&#x000A;<span class="line-num">127</span>   <span class="ruby-keyword">false</span>&#x000A;<span class="line-num">128</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-elapsed_seconds_since'>
<a name='method-c-elapsed_seconds_since'></a>
<div class='synopsis'>
<span class='name'>elapsed_seconds_since</span>
<span class='arguments'>(timer)</span>

</div>
<div class='description'>

<p>The elapsed seconds since the given timer object was created.  The timer object should have been created via <a href="Sequel.html#method-c-start_timer"><code>Sequel.start_timer</code></a>.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-elapsed_seconds_since-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-elapsed_seconds_since-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">327</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">elapsed_seconds_since</span>(<span class="ruby-identifier">timer</span>)&#x000A;<span class="line-num">328</span>   <span class="ruby-identifier">start_timer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">timer</span>&#x000A;<span class="line-num">329</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-extension'>
<a name='method-c-extension'></a>
<div class='synopsis'>
<span class='name'>extension</span>
<span class='arguments'>(*extensions)</span>

</div>
<div class='description'>

<p>Load all <a href="Sequel.html"><code>Sequel</code></a> extensions given.  Extensions are just files that exist under <code>sequel/extensions</code> in the load path, and are just required.</p>

<p>In some cases, requiring an extension modifies classes directly, and in others, it just loads a module that you can extend other classes with.  Consult the documentation for each extension you plan on using for usage.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">extension</span>(<span class="ruby-value">:blank</span>)&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">extension</span>(<span class="ruby-value">:core_extensions</span>, <span class="ruby-value">:named_timezones</span>)</pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-extension-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-extension-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">149</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">extension</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">extensions</span>)&#x000A;<span class="line-num">150</span>   <span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">orig_require</span>(<span class="ruby-node">&quot;sequel/extensions/#{e}&quot;</span>)}&#x000A;<span class="line-num">151</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-inflections'>
<a name='method-c-inflections'></a>
<div class='synopsis'>
<span class='name'>inflections</span>
<span class='arguments'>()</span>

</div>
<div class='description'>

<p>Yield the <a href="Sequel/Inflections.html"><code>Inflections</code></a> module if a block is given, and return the <a href="Sequel/Inflections.html"><code>Inflections</code></a> module.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-inflections-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-inflections-source'>  <span class="ruby-comment"># File lib/sequel/model/inflections.rb</span>&#x000A;<span class="line-num">6</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">inflections</span>&#x000A;<span class="line-num">7</span>   <span class="ruby-keyword">yield</span> <span class="ruby-constant">Inflections</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>&#x000A;<span class="line-num">8</span>   <span class="ruby-constant">Inflections</span>&#x000A;<span class="line-num">9</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-json_parser_error_class'>
<a name='method-c-json_parser_error_class'></a>
<div class='synopsis'>
<span class='name'>json_parser_error_class</span>
<span class='arguments'>()</span>

</div>
<div class='description'>

<p>The exception classed raised if there is an error parsing JSON. This can be overridden to use an alternative json implementation.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-json_parser_error_class-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-json_parser_error_class-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">155</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">json_parser_error_class</span>&#x000A;<span class="line-num">156</span>   <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">ParserError</span>&#x000A;<span class="line-num">157</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-migration'>
<a name='method-c-migration'></a>
<div class='synopsis'>
<span class='name'>migration</span>
<span class='arguments'>(&block)</span>

</div>
<div class='description'>

<p>The preferred method for writing <a href="Sequel.html"><code>Sequel</code></a> migrations, using a DSL:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">migration</span> <span class="ruby-keyword">do</span>&#x000A;  <span class="ruby-identifier">up</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-identifier">create_table</span>(<span class="ruby-value">:artists</span>) <span class="ruby-keyword">do</span>&#x000A;      <span class="ruby-identifier">primary_key</span> <span class="ruby-value">:id</span>&#x000A;      <span class="ruby-constant">String</span> <span class="ruby-value">:name</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">down</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-identifier">drop_table</span>(<span class="ruby-value">:artists</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<p>Designed to be used with the <code>Migrator</code> class, part of the <code>migration</code> extension.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-migration-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-migration-source'>    <span class="ruby-comment"># File lib/sequel/extensions/migration.rb</span>&#x000A;<span class="line-num">288</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">migration</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">289</span>   <span class="ruby-constant">MigrationDSL</span>.<span class="ruby-identifier">create</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">290</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-object_to_json'>
<a name='method-c-object_to_json'></a>
<div class='synopsis'>
<span class='name'>object_to_json</span>
<span class='arguments'>(obj, *args, &block)</span>

</div>
<div class='description'>

<p>Convert given object to json and return the result. This can be overridden to use an alternative json implementation.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-object_to_json-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-object_to_json-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">161</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">object_to_json</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">162</span>   <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">163</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-parse_json'>
<a name='method-c-parse_json'></a>
<div class='synopsis'>
<span class='name'>parse_json</span>
<span class='arguments'>(json)</span>

</div>
<div class='description'>

<p>Parse the string as JSON and return the result. This can be overridden to use an alternative json implementation.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-parse_json-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-parse_json-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">167</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">parse_json</span>(<span class="ruby-identifier">json</span>)&#x000A;<span class="line-num">168</span>   <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>, <span class="ruby-value">:create_additions</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">false</span>)&#x000A;<span class="line-num">169</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-recursive_map'>
<a name='method-c-recursive_map'></a>
<div class='synopsis'>
<span class='name'>recursive_map</span>
<span class='arguments'>(array, converter)</span>

</div>
<div class='description'>

<p>Convert each item in the array to the correct type, handling multi-dimensional arrays.  For each element in the array or subarrays, call the converter, unless the value is nil.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-recursive_map-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-recursive_map-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">174</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">recursive_map</span>(<span class="ruby-identifier">array</span>, <span class="ruby-identifier">converter</span>)&#x000A;<span class="line-num">175</span>   <span class="ruby-identifier">array</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>&#x000A;<span class="line-num">176</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;<span class="line-num">177</span>       <span class="ruby-identifier">recursive_map</span>(<span class="ruby-identifier">i</span>, <span class="ruby-identifier">converter</span>)&#x000A;<span class="line-num">178</span>     <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">i</span>.<span class="ruby-identifier">nil?</span>&#x000A;<span class="line-num">179</span>       <span class="ruby-identifier">converter</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">i</span>)&#x000A;<span class="line-num">180</span>     <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">181</span>   <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">182</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-require'>
<a name='method-c-require'></a>
<div class='synopsis'>
<span class='name'>require</span>
<span class='arguments'>(files, subdir=nil)</span>

</div>
<div class='description'>

<p>For backwards compatibility only.  require_relative should be used instead.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-require-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-require-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">185</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">require</span>(<span class="ruby-identifier">files</span>, <span class="ruby-identifier">subdir</span>=<span class="ruby-keyword">nil</span>)&#x000A;<span class="line-num">186</span>   <span class="ruby-comment"># Use Kernel.require_relative to work around JRuby 9.0 bug</span>&#x000A;<span class="line-num">187</span>   <span class="ruby-constant">Array</span>(<span class="ruby-identifier">files</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">require_relative</span> <span class="ruby-node">&quot;#{&quot;#{subdir}/&quot; if subdir}#{f}&quot;</span>}&#x000A;<span class="line-num">188</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-split_symbol'>
<a name='method-c-split_symbol'></a>
<div class='synopsis'>
<span class='name'>split_symbol</span>
<span class='arguments'>(sym)</span>

</div>
<div class='description'>

<p>Splits the symbol into three parts, if symbol splitting is enabled (not the default). Each part will either be a string or nil. If symbol splitting is disabled, returns an array with the first and third parts being nil, and the second part beind a string version of the symbol.</p>

<p>For columns, these parts are the table, column, and alias. For tables, these parts are the schema, table, and alias.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-split_symbol-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-split_symbol-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">199</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">split_symbol</span>(<span class="ruby-identifier">sym</span>)&#x000A;<span class="line-num">200</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">v</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-constant">SPLIT_SYMBOL_CACHE</span>[<span class="ruby-identifier">sym</span>]}&#x000A;<span class="line-num">201</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">split_symbols?</span>&#x000A;<span class="line-num">202</span>       <span class="ruby-identifier">v</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">s</span> = <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_s</span>&#x000A;<span class="line-num">203</span>       <span class="ruby-keyword">when</span> <span class="ruby-regexp">/\A((?:(?!__).)+)__((?:(?!___).)+)___(.+)\z/</span>&#x000A;<span class="line-num">204</span>         [<span class="ruby-node">$1</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-node">$2</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-node">$3</span>.<span class="ruby-identifier">freeze</span>].<span class="ruby-identifier">freeze</span>&#x000A;<span class="line-num">205</span>       <span class="ruby-keyword">when</span> <span class="ruby-regexp">/\A((?:(?!___).)+)___(.+)\z/</span>&#x000A;<span class="line-num">206</span>         [<span class="ruby-keyword">nil</span>, <span class="ruby-node">$1</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-node">$2</span>.<span class="ruby-identifier">freeze</span>].<span class="ruby-identifier">freeze</span>&#x000A;<span class="line-num">207</span>       <span class="ruby-keyword">when</span> <span class="ruby-regexp">/\A((?:(?!__).)+)__(.+)\z/</span>&#x000A;<span class="line-num">208</span>         [<span class="ruby-node">$1</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-node">$2</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-keyword">nil</span>].<span class="ruby-identifier">freeze</span>&#x000A;<span class="line-num">209</span>       <span class="ruby-keyword">else</span>&#x000A;<span class="line-num">210</span>         [<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">s</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-keyword">nil</span>].<span class="ruby-identifier">freeze</span>&#x000A;<span class="line-num">211</span>       <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">212</span>     <span class="ruby-keyword">else</span>&#x000A;<span class="line-num">213</span>       <span class="ruby-identifier">v</span> = [<span class="ruby-keyword">nil</span>,<span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">freeze</span>,<span class="ruby-keyword">nil</span>].<span class="ruby-identifier">freeze</span>&#x000A;<span class="line-num">214</span>     <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">215</span>     <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-constant">SPLIT_SYMBOL_CACHE</span>[<span class="ruby-identifier">sym</span>] = <span class="ruby-identifier">v</span>}&#x000A;<span class="line-num">216</span>   <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">217</span>   <span class="ruby-identifier">v</span>&#x000A;<span class="line-num">218</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-split_symbols-3D'>
<a name='method-c-split_symbols-3D'></a>
<div class='synopsis'>
<span class='name'>split_symbols=</span>
<span class='arguments'>(v)</span>

</div>
<div class='description'>

<p>Setting this to true enables Sequel&#39;s historical behavior of splitting symbols on double or triple underscores:</p>

<pre class="ruby"><span class="ruby-value">:table__column</span>         <span class="ruby-comment"># table.column</span>&#x000A;<span class="ruby-value">:column___alias</span>        <span class="ruby-comment"># column AS alias</span>&#x000A;<span class="ruby-value">:table__column___alias</span> <span class="ruby-comment"># table.column AS alias</span></pre>

<p>It is only recommended to turn this on for backwards compatibility until such symbols have been converted to use newer <a href="Sequel.html"><code>Sequel</code></a> APIs such as:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>[<span class="ruby-value">:table</span>][<span class="ruby-value">:column</span>]            <span class="ruby-comment"># table.column</span>&#x000A;<span class="ruby-constant">Sequel</span>[<span class="ruby-value">:column</span>].<span class="ruby-identifier">as</span>(<span class="ruby-value">:alias</span>)         <span class="ruby-comment"># column AS alias</span>&#x000A;<span class="ruby-constant">Sequel</span>[<span class="ruby-value">:table</span>][<span class="ruby-value">:column</span>].<span class="ruby-identifier">as</span>(<span class="ruby-value">:alias</span>) <span class="ruby-comment"># table.column AS alias</span></pre>

<p><a href="Sequel/Database.html"><code>Sequel::Database</code></a> instances do their own caching of literalized symbols, and changing this setting does not affect those caches.  It is recommended that if you want to change this setting, you do so directly after requiring <a href="Sequel.html"><code>Sequel</code></a>, before creating any <a href="Sequel/Database.html"><code>Sequel::Database</code></a> instances.</p>

<p>Disabling symbol splitting will also disable the handling of double underscores in virtual row methods, causing such methods to yield regular identifers instead of qualified identifiers:</p>

<pre class="ruby"><span class="ruby-comment"># Sequel.split_symbols = true</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">expr</span>{<span class="ruby-identifier">table__column</span>}  <span class="ruby-comment"># table.column</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">expr</span>{<span class="ruby-identifier">table</span>[<span class="ruby-value">:column</span>]} <span class="ruby-comment"># table.column</span>&#x000A;&#x000A;<span class="ruby-comment"># Sequel.split_symbols = false</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">expr</span>{<span class="ruby-identifier">table__column</span>}  <span class="ruby-comment"># table__column</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">expr</span>{<span class="ruby-identifier">table</span>[<span class="ruby-value">:column</span>]} <span class="ruby-comment"># table.column</span></pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-split_symbols-3D-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-split_symbols-3D-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">250</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">split_symbols=</span>(<span class="ruby-identifier">v</span>)&#x000A;<span class="line-num">251</span>   <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-constant">SPLIT_SYMBOL_CACHE</span>.<span class="ruby-identifier">clear</span>}&#x000A;<span class="line-num">252</span>   <span class="ruby-ivar">@split_symbols</span> = <span class="ruby-identifier">v</span>&#x000A;<span class="line-num">253</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-split_symbols-3F'>
<a name='method-c-split_symbols-3F'></a>
<div class='synopsis'>
<span class='name'>split_symbols?</span>
<span class='arguments'>()</span>

</div>
<div class='description'>

<p>Whether <a href="Sequel.html"><code>Sequel</code></a> currently splits symbols into qualified/aliased identifiers.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-split_symbols-3F-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-split_symbols-3F-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">256</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">split_symbols?</span>&#x000A;<span class="line-num">257</span>   <span class="ruby-ivar">@split_symbols</span>&#x000A;<span class="line-num">258</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-start_timer'>
<a name='method-c-start_timer'></a>
<div class='synopsis'>
<span class='name'>start_timer</span>
<span class='arguments'>()</span>

</div>
<div class='description'>

<p>A timer object that can be passed to <a href="Sequel.html#method-c-elapsed_seconds_since"><code>Sequel.elapsed_seconds_since</code></a> to return the number of seconds elapsed.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-start_timer-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-start_timer-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">314</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">start_timer</span>&#x000A;<span class="line-num">315</span>   <span class="ruby-constant">Process</span>.<span class="ruby-identifier">clock_gettime</span>(<span class="ruby-constant">Process</span><span class="ruby-operator">::</span><span class="ruby-constant">CLOCK_MONOTONIC</span>)&#x000A;<span class="line-num">316</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-string_to_date'>
<a name='method-c-string_to_date'></a>
<div class='synopsis'>
<span class='name'>string_to_date</span>
<span class='arguments'>(string)</span>

</div>
<div class='description'>

<p>Converts the given <code>string</code> into a <code>Date</code> object.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">string_to_date</span>(<span class="ruby-string">&#39;2010-09-10&#39;</span>) <span class="ruby-comment"># Date.civil(2010, 09, 10)</span></pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-string_to_date-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-string_to_date-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">263</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">string_to_date</span>(<span class="ruby-identifier">string</span>)&#x000A;<span class="line-num">264</span>   <span class="ruby-keyword">begin</span>&#x000A;<span class="line-num">265</span>     <span class="ruby-constant">Date</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">string</span>, <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">convert_two_digit_years</span>)&#x000A;<span class="line-num">266</span>   <span class="ruby-keyword">rescue</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>&#x000A;<span class="line-num">267</span>     <span class="ruby-identifier">raise</span> <span class="ruby-identifier">convert_exception_class</span>(<span class="ruby-identifier">e</span>, <span class="ruby-constant">InvalidValue</span>)&#x000A;<span class="line-num">268</span>   <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">269</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-string_to_datetime'>
<a name='method-c-string_to_datetime'></a>
<div class='synopsis'>
<span class='name'>string_to_datetime</span>
<span class='arguments'>(string)</span>

</div>
<div class='description'>

<p>Converts the given <code>string</code> into a <code>Time</code> or <code>DateTime</code> object, depending on the value of <code>Sequel.datetime_class</code>.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">string_to_datetime</span>(<span class="ruby-string">&#39;2010-09-10 10:20:30&#39;</span>) <span class="ruby-comment"># Time.local(2010, 09, 10, 10, 20, 30)</span></pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-string_to_datetime-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-string_to_datetime-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">275</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">string_to_datetime</span>(<span class="ruby-identifier">string</span>)&#x000A;<span class="line-num">276</span>   <span class="ruby-keyword">begin</span>&#x000A;<span class="line-num">277</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">datetime_class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">DateTime</span>&#x000A;<span class="line-num">278</span>       <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">convert_two_digit_years</span>)&#x000A;<span class="line-num">279</span>     <span class="ruby-keyword">else</span>&#x000A;<span class="line-num">280</span>       <span class="ruby-identifier">datetime_class</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">string</span>)&#x000A;<span class="line-num">281</span>     <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">282</span>   <span class="ruby-keyword">rescue</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>&#x000A;<span class="line-num">283</span>     <span class="ruby-identifier">raise</span> <span class="ruby-identifier">convert_exception_class</span>(<span class="ruby-identifier">e</span>, <span class="ruby-constant">InvalidValue</span>)&#x000A;<span class="line-num">284</span>   <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">285</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-string_to_time'>
<a name='method-c-string_to_time'></a>
<div class='synopsis'>
<span class='name'>string_to_time</span>
<span class='arguments'>(string)</span>

</div>
<div class='description'>

<p>Converts the given <code>string</code> into a <code>Sequel::SQLTime</code> object.</p>

<pre class="ruby"><span class="ruby-identifier">v</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">string_to_time</span>(<span class="ruby-string">&#39;10:20:30&#39;</span>) <span class="ruby-comment"># Sequel::SQLTime.parse(&#39;10:20:30&#39;)</span>&#x000A;<span class="ruby-constant">DB</span>.<span class="ruby-identifier">literal</span>(<span class="ruby-identifier">v</span>) <span class="ruby-comment"># =&gt; &#39;10:20:30&#39;</span></pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-string_to_time-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-string_to_time-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">291</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">string_to_time</span>(<span class="ruby-identifier">string</span>)&#x000A;<span class="line-num">292</span>   <span class="ruby-keyword">begin</span>&#x000A;<span class="line-num">293</span>     <span class="ruby-constant">SQLTime</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">string</span>)&#x000A;<span class="line-num">294</span>   <span class="ruby-keyword">rescue</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>&#x000A;<span class="line-num">295</span>     <span class="ruby-identifier">raise</span> <span class="ruby-identifier">convert_exception_class</span>(<span class="ruby-identifier">e</span>, <span class="ruby-constant">InvalidValue</span>)&#x000A;<span class="line-num">296</span>   <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">297</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-synchronize'>
<a name='method-c-synchronize'></a>
<div class='synopsis'>
<span class='name'>synchronize</span>
<span class='arguments'>(&block)</span>

</div>
<div class='description'>

<p>Unless in single threaded mode, protects access to any mutable global data structure in <a href="Sequel.html"><code>Sequel</code></a>. Uses a non-reentrant mutex, so calling code should be careful. In general, this should only be used around the minimal possible code such as Hash#[], Hash#[]=, Hash#delete, Array#<<, and Array#delete.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-synchronize-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-synchronize-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">307</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">synchronize</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">308</span>   <span class="ruby-ivar">@single_threaded</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">yield</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@data_mutex</span>.<span class="ruby-identifier">synchronize</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">309</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-transaction'>
<a name='method-c-transaction'></a>
<div class='synopsis'>
<span class='name'>transaction</span>
<span class='arguments'>(dbs, opts=OPTS, &block)</span>

</div>
<div class='description'>

<p>Uses a transaction on all given databases with the given options. This:</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">transaction</span>([<span class="ruby-constant">DB1</span>, <span class="ruby-constant">DB2</span>, <span class="ruby-constant">DB3</span>]){}</pre>

<p>is equivalent to:</p>

<pre class="ruby"><span class="ruby-constant">DB1</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword">do</span>&#x000A;  <span class="ruby-constant">DB2</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-constant">DB3</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<p>except that if <a href="Sequel.html#Rollback"><code>Sequel::Rollback</code></a> is raised by the block, the transaction is rolled back on all databases instead of just the last one.</p>

<p>Note that this method cannot guarantee that all databases will commit or rollback.  For example, if DB3 commits but attempting to commit on DB2 fails (maybe because foreign key checks are deferred), there is no way to uncommit the changes on DB3.  For that kind of support, you need to have two-phase commit/prepared transactions (which <a href="Sequel.html"><code>Sequel</code></a> supports on some databases).</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-transaction-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-transaction-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">353</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">transaction</span>(<span class="ruby-identifier">dbs</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">354</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rollback</span>]&#x000A;<span class="line-num">355</span>     <span class="ruby-identifier">rescue_rollback</span> = <span class="ruby-keyword">true</span>&#x000A;<span class="line-num">356</span>     <span class="ruby-identifier">opts</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">opts</span>].<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:rollback</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:reraise</span>)&#x000A;<span class="line-num">357</span>   <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">358</span>   <span class="ruby-identifier">pr</span> = <span class="ruby-identifier">dbs</span>.<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">block</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">bl</span>, <span class="ruby-identifier">db</span><span class="ruby-operator">|</span> <span class="ruby-identifier">proc</span>{<span class="ruby-identifier">db</span>.<span class="ruby-identifier">transaction</span>(<span class="ruby-identifier">opts</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">bl</span>)}}&#x000A;<span class="line-num">359</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">rescue_rollback</span>&#x000A;<span class="line-num">360</span>     <span class="ruby-keyword">begin</span>&#x000A;<span class="line-num">361</span>       <span class="ruby-identifier">pr</span>.<span class="ruby-identifier">call</span>&#x000A;<span class="line-num">362</span>     <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Rollback</span>&#x000A;<span class="line-num">363</span>       <span class="ruby-keyword">nil</span>&#x000A;<span class="line-num">364</span>     <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">365</span>   <span class="ruby-keyword">else</span>&#x000A;<span class="line-num">366</span>     <span class="ruby-identifier">pr</span>.<span class="ruby-identifier">call</span>&#x000A;<span class="line-num">367</span>   <span class="ruby-keyword">end</span>&#x000A;<span class="line-num">368</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-version'>
<a name='method-c-version'></a>
<div class='synopsis'>
<span class='name'>version</span>
<span class='arguments'>()</span>

</div>
<div class='description'>

<p>The version of <a href="Sequel.html"><code>Sequel</code></a> you are using, as a string (e.g. “2.11.0”)</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-version-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-version-source'>   <span class="ruby-comment"># File lib/sequel/version.rb</span>&#x000A;<span class="line-num">22</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">version</span>&#x000A;<span class="line-num">23</span>   <span class="ruby-constant">VERSION</span>&#x000A;<span class="line-num">24</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-virtual_row'>
<a name='method-c-virtual_row'></a>
<div class='synopsis'>
<span class='name'>virtual_row</span>
<span class='arguments'>(&block)</span>

</div>
<div class='description'>

<p>If the supplied block takes a single argument, yield an <code>SQL::VirtualRow</code> instance to the block argument.  Otherwise, evaluate the block in the context of a <code>SQL::VirtualRow</code> instance.</p>

<pre class="ruby"><span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>{<span class="ruby-identifier">a</span>} <span class="ruby-comment"># Sequel::SQL::Identifier.new(:a)</span>&#x000A;<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">a</span>} <span class="ruby-comment"># Sequel::SQL::Function.new(:a)</span></pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-virtual_row-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-virtual_row-source'>    <span class="ruby-comment"># File lib/sequel/core.rb</span>&#x000A;<span class="line-num">377</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">virtual_row</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">378</span>   <span class="ruby-identifier">vr</span> = <span class="ruby-constant">VIRTUAL_ROW</span>&#x000A;<span class="line-num">379</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">arity</span>&#x000A;<span class="line-num">380</span>   <span class="ruby-keyword">when</span> <span class="ruby-value">-1</span>, <span class="ruby-value">0</span>&#x000A;<span class="line-num">381</span>     <span class="ruby-identifier">vr</span>.<span class="ruby-identifier">instance_exec</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;<span class="line-num">382</span>   <span class="ruby-keyword">else</span>&#x000A;<span class="line-num">383</span>     <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">vr</span>)&#x000A;<span class="line-num">384</span>   <span class="ruby-keyword">end</span>  &#x000A;<span class="line-num">385</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
</div>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/rdoc/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
</div>
</body>
</html>
