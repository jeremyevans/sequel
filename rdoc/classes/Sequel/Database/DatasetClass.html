<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Sequel::Database::DatasetClass</title>
    <meta content='text/html; charset=US-ASCII' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Sequel::Database::DatasetClass
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../files/lib/sequel/dataset_rb.html">lib/sequel/dataset.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../files/lib/sequel/dataset/actions_rb.html">lib/sequel/dataset/actions.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../files/lib/sequel/dataset/features_rb.html">lib/sequel/dataset/features.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../files/lib/sequel/dataset/graph_rb.html">lib/sequel/dataset/graph.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../files/lib/sequel/dataset/misc_rb.html">lib/sequel/dataset/misc.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../files/lib/sequel/dataset/mutation_rb.html">lib/sequel/dataset/mutation.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../files/lib/sequel/dataset/prepared_statements_rb.html">lib/sequel/dataset/prepared_statements.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../files/lib/sequel/dataset/query_rb.html">lib/sequel/dataset/query.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../files/lib/sequel/dataset/sql_rb.html">lib/sequel/dataset/sql.rb</a>
          </li>
          <li>
            <a class='show' href='#' onclick='this.parentNode.parentNode.className += " expanded"; this.parentNode.removeChild(this); return false'>show all</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="Database.html">Database</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>A dataset represents an <a href="SQL.html">SQL</a> query, or more
            generally, an abstract set of rows in the database.  Datasets can be used
            to create, retrieve, update and delete records.</p>
            
            <p>Query results are always retrieved on demand, so a dataset can be kept
            around and reused indefinitely (datasets never cache results):</p>
            
            <pre class="ruby"><span class="ruby-identifier">my_posts</span> = <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">posts</span>].<span class="ruby-identifier">filter</span>(:<span class="ruby-identifier">author</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;david&#39;</span>) <span class="ruby-comment"># no records are retrieved</span>&#x000A;<span class="ruby-identifier">my_posts</span>.<span class="ruby-identifier">all</span> <span class="ruby-comment"># records are retrieved</span>&#x000A;<span class="ruby-identifier">my_posts</span>.<span class="ruby-identifier">all</span> <span class="ruby-comment"># records are retrieved again</span></pre>
            
            <p>Most dataset methods return modified copies of the dataset (functional
            style), so you can reuse different datasets to access data:</p>
            
            <pre class="ruby"><span class="ruby-identifier">posts</span> = <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">posts</span>]&#x000A;<span class="ruby-identifier">davids_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">filter</span>(:<span class="ruby-identifier">author</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;david&#39;</span>)&#x000A;<span class="ruby-identifier">old_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">filter</span>(<span class="ruby-string">&#39;stamp &lt; ?&#39;</span>, <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span> <span class="ruby-operator">-</span> <span class="ruby-value">7</span>)&#x000A;<span class="ruby-identifier">davids_old_posts</span> = <span class="ruby-identifier">davids_posts</span>.<span class="ruby-identifier">filter</span>(<span class="ruby-string">&#39;stamp &lt; ?&#39;</span>, <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span> <span class="ruby-operator">-</span> <span class="ruby-value">7</span>)</pre>
            
            <p>Datasets are Enumerable objects, so they can be manipulated using any of
            the Enumerable methods, such as map, inject, etc.</p>
            
            <p>For more information, see the <a
            href="../../files/doc/dataset_basics_rdoc.html">"Dataset Basics" guide</a></p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-clause_methods">clause_methods</a></li>
              <li><a target="docwin" href="#method-c-def_mutation_method">def_mutation_method</a></li>
              <li><a target="docwin" href="#method-c-new">new</a></li>
              <li><a target="docwin" href="#method-c-register_extension">register_extension</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-3C-3C"><<</a></li>
              <li><a target="docwin" href="#method-i-3D-3D">==</a></li>
              <li><a target="docwin" href="#method-i-5B-5D">[]</a></li>
              <li><a target="docwin" href="#method-i-add_graph_aliases">add_graph_aliases</a></li>
              <li><a target="docwin" href="#method-i-aliased_expression_sql_append">aliased_expression_sql_append</a></li>
              <li><a target="docwin" href="#method-i-all">all</a></li>
              <li><a target="docwin" href="#method-i-and">and</a></li>
              <li><a target="docwin" href="#method-i-array_sql_append">array_sql_append</a></li>
              <li><a target="docwin" href="#method-i-avg">avg</a></li>
              <li><a target="docwin" href="#method-i-bind">bind</a></li>
              <li><a target="docwin" href="#method-i-boolean_constant_sql_append">boolean_constant_sql_append</a></li>
              <li><a target="docwin" href="#method-i-call">call</a></li>
              <li><a target="docwin" href="#method-i-case_expression_sql_append">case_expression_sql_append</a></li>
              <li><a target="docwin" href="#method-i-cast_sql_append">cast_sql_append</a></li>
              <li><a target="docwin" href="#method-i-clone">clone</a></li>
              <li><a target="docwin" href="#method-i-column_all_sql_append">column_all_sql_append</a></li>
              <li><a target="docwin" href="#method-i-columns">columns</a></li>
              <li><a target="docwin" href="#method-i-columns-21">columns!</a></li>
              <li><a target="docwin" href="#method-i-complex_expression_sql_append">complex_expression_sql_append</a></li>
              <li><a target="docwin" href="#method-i-constant_sql_append">constant_sql_append</a></li>
              <li><a target="docwin" href="#method-i-count">count</a></li>
              <li><a target="docwin" href="#attribute-i-db">db</a></li>
              <li><a target="docwin" href="#method-i-delayed_evaluation_sql_append">delayed_evaluation_sql_append</a></li>
              <li><a target="docwin" href="#method-i-delete">delete</a></li>
              <li><a target="docwin" href="#method-i-delete_sql">delete_sql</a></li>
              <li><a target="docwin" href="#method-i-distinct">distinct</a></li>
              <li><a target="docwin" href="#method-i-dup">dup</a></li>
              <li><a target="docwin" href="#method-i-each">each</a></li>
              <li><a target="docwin" href="#method-i-each_server">each_server</a></li>
              <li><a target="docwin" href="#method-i-empty-3F">empty?</a></li>
              <li><a target="docwin" href="#method-i-emulated_function_sql_append">emulated_function_sql_append</a></li>
              <li><a target="docwin" href="#method-i-eql-3F">eql?</a></li>
              <li><a target="docwin" href="#method-i-escape_like">escape_like</a></li>
              <li><a target="docwin" href="#method-i-except">except</a></li>
              <li><a target="docwin" href="#method-i-exclude">exclude</a></li>
              <li><a target="docwin" href="#method-i-exclude_having">exclude_having</a></li>
              <li><a target="docwin" href="#method-i-exclude_where">exclude_where</a></li>
              <li><a target="docwin" href="#method-i-exists">exists</a></li>
              <li><a target="docwin" href="#method-i-extension">extension</a></li>
              <li><a target="docwin" href="#method-i-extension-21">extension!</a></li>
              <li><a target="docwin" href="#method-i-filter">filter</a></li>
              <li><a target="docwin" href="#method-i-first">first</a></li>
              <li><a target="docwin" href="#method-i-first-21">first!</a></li>
              <li><a target="docwin" href="#method-i-first_source">first_source</a></li>
              <li><a target="docwin" href="#method-i-first_source_alias">first_source_alias</a></li>
              <li><a target="docwin" href="#method-i-first_source_table">first_source_table</a></li>
              <li><a target="docwin" href="#method-i-for_update">for_update</a></li>
              <li><a target="docwin" href="#method-i-freeze">freeze</a></li>
              <li><a target="docwin" href="#method-i-from">from</a></li>
              <li><a target="docwin" href="#method-i-from_self">from_self</a></li>
              <li><a target="docwin" href="#method-i-from_self-21">from_self!</a></li>
              <li><a target="docwin" href="#method-i-frozen-3F">frozen?</a></li>
              <li><a target="docwin" href="#method-i-function_sql_append">function_sql_append</a></li>
              <li><a target="docwin" href="#method-i-get">get</a></li>
              <li><a target="docwin" href="#method-i-graph">graph</a></li>
              <li><a target="docwin" href="#method-i-grep">grep</a></li>
              <li><a target="docwin" href="#method-i-group">group</a></li>
              <li><a target="docwin" href="#method-i-group_and_count">group_and_count</a></li>
              <li><a target="docwin" href="#method-i-group_by">group_by</a></li>
              <li><a target="docwin" href="#method-i-group_cube">group_cube</a></li>
              <li><a target="docwin" href="#method-i-group_rollup">group_rollup</a></li>
              <li><a target="docwin" href="#method-i-hash">hash</a></li>
              <li><a target="docwin" href="#method-i-having">having</a></li>
              <li><a target="docwin" href="#method-i-identifier_input_method">identifier_input_method</a></li>
              <li><a target="docwin" href="#method-i-identifier_input_method-3D">identifier_input_method=</a></li>
              <li><a target="docwin" href="#method-i-identifier_output_method">identifier_output_method</a></li>
              <li><a target="docwin" href="#method-i-identifier_output_method-3D">identifier_output_method=</a></li>
              <li><a target="docwin" href="#method-i-import">import</a></li>
              <li><a target="docwin" href="#method-i-insert">insert</a></li>
              <li><a target="docwin" href="#method-i-insert_sql">insert_sql</a></li>
              <li><a target="docwin" href="#method-i-inspect">inspect</a></li>
              <li><a target="docwin" href="#method-i-intersect">intersect</a></li>
              <li><a target="docwin" href="#method-i-interval">interval</a></li>
              <li><a target="docwin" href="#method-i-invert">invert</a></li>
              <li><a target="docwin" href="#method-i-join">join</a></li>
              <li><a target="docwin" href="#method-i-join_clause_sql_append">join_clause_sql_append</a></li>
              <li><a target="docwin" href="#method-i-join_on_clause_sql_append">join_on_clause_sql_append</a></li>
              <li><a target="docwin" href="#method-i-join_table">join_table</a></li>
              <li><a target="docwin" href="#method-i-join_using_clause_sql_append">join_using_clause_sql_append</a></li>
              <li><a target="docwin" href="#method-i-last">last</a></li>
              <li><a target="docwin" href="#method-i-lateral">lateral</a></li>
              <li><a target="docwin" href="#method-i-limit">limit</a></li>
              <li><a target="docwin" href="#method-i-literal_append">literal_append</a></li>
              <li><a target="docwin" href="#method-i-lock_style">lock_style</a></li>
              <li><a target="docwin" href="#method-i-map">map</a></li>
              <li><a target="docwin" href="#method-i-max">max</a></li>
              <li><a target="docwin" href="#method-i-min">min</a></li>
              <li><a target="docwin" href="#method-i-multi_insert">multi_insert</a></li>
              <li><a target="docwin" href="#method-i-multi_insert_sql">multi_insert_sql</a></li>
              <li><a target="docwin" href="#method-i-naked">naked</a></li>
              <li><a target="docwin" href="#method-i-naked-21">naked!</a></li>
              <li><a target="docwin" href="#method-i-negative_boolean_constant_sql_append">negative_boolean_constant_sql_append</a></li>
              <li><a target="docwin" href="#method-i-offset">offset</a></li>
              <li><a target="docwin" href="#attribute-i-opts">opts</a></li>
              <li><a target="docwin" href="#method-i-or">or</a></li>
              <li><a target="docwin" href="#method-i-order">order</a></li>
              <li><a target="docwin" href="#method-i-order_append">order_append</a></li>
              <li><a target="docwin" href="#method-i-order_by">order_by</a></li>
              <li><a target="docwin" href="#method-i-order_more">order_more</a></li>
              <li><a target="docwin" href="#method-i-order_prepend">order_prepend</a></li>
              <li><a target="docwin" href="#method-i-ordered_expression_sql_append">ordered_expression_sql_append</a></li>
              <li><a target="docwin" href="#method-i-paged_each">paged_each</a></li>
              <li><a target="docwin" href="#method-i-placeholder_literal_string_sql_append">placeholder_literal_string_sql_append</a></li>
              <li><a target="docwin" href="#method-i-prepare">prepare</a></li>
              <li><a target="docwin" href="#method-i-provides_accurate_rows_matched-3F">provides_accurate_rows_matched?</a></li>
              <li><a target="docwin" href="#method-i-qualified_identifier_sql_append">qualified_identifier_sql_append</a></li>
              <li><a target="docwin" href="#method-i-qualify">qualify</a></li>
              <li><a target="docwin" href="#method-i-quote_identifier_append">quote_identifier_append</a></li>
              <li><a target="docwin" href="#method-i-quote_identifiers-3D">quote_identifiers=</a></li>
              <li><a target="docwin" href="#method-i-quote_identifiers-3F">quote_identifiers?</a></li>
              <li><a target="docwin" href="#method-i-quote_schema_table_append">quote_schema_table_append</a></li>
              <li><a target="docwin" href="#method-i-quoted_identifier_append">quoted_identifier_append</a></li>
              <li><a target="docwin" href="#method-i-range">range</a></li>
              <li><a target="docwin" href="#method-i-recursive_cte_requires_column_aliases-3F">recursive_cte_requires_column_aliases?</a></li>
              <li><a target="docwin" href="#method-i-requires_placeholder_type_specifiers-3F">requires_placeholder_type_specifiers?</a></li>
              <li><a target="docwin" href="#method-i-requires_sql_standard_datetimes-3F">requires_sql_standard_datetimes?</a></li>
              <li><a target="docwin" href="#method-i-returning">returning</a></li>
              <li><a target="docwin" href="#method-i-reverse">reverse</a></li>
              <li><a target="docwin" href="#method-i-reverse_order">reverse_order</a></li>
              <li><a target="docwin" href="#method-i-row_number_column">row_number_column</a></li>
              <li><a target="docwin" href="#attribute-i-row_proc">row_proc</a></li>
              <li><a target="docwin" href="#method-i-row_proc-3D">row_proc=</a></li>
              <li><a target="docwin" href="#method-i-schema_and_table">schema_and_table</a></li>
              <li><a target="docwin" href="#method-i-select">select</a></li>
              <li><a target="docwin" href="#method-i-select_all">select_all</a></li>
              <li><a target="docwin" href="#method-i-select_append">select_append</a></li>
              <li><a target="docwin" href="#method-i-select_group">select_group</a></li>
              <li><a target="docwin" href="#method-i-select_hash">select_hash</a></li>
              <li><a target="docwin" href="#method-i-select_hash_groups">select_hash_groups</a></li>
              <li><a target="docwin" href="#method-i-select_map">select_map</a></li>
              <li><a target="docwin" href="#method-i-select_more">select_more</a></li>
              <li><a target="docwin" href="#method-i-select_order_map">select_order_map</a></li>
              <li><a target="docwin" href="#method-i-select_sql">select_sql</a></li>
              <li><a target="docwin" href="#method-i-server">server</a></li>
              <li><a target="docwin" href="#method-i-set_graph_aliases">set_graph_aliases</a></li>
              <li><a target="docwin" href="#method-i-single_record">single_record</a></li>
              <li><a target="docwin" href="#method-i-single_value">single_value</a></li>
              <li><a target="docwin" href="#method-i-split_alias">split_alias</a></li>
              <li><a target="docwin" href="#method-i-split_qualifiers">split_qualifiers</a></li>
              <li><a target="docwin" href="#method-i-sql">sql</a></li>
              <li><a target="docwin" href="#method-i-subscript_sql_append">subscript_sql_append</a></li>
              <li><a target="docwin" href="#method-i-sum">sum</a></li>
              <li><a target="docwin" href="#method-i-supports_cte-3F">supports_cte?</a></li>
              <li><a target="docwin" href="#method-i-supports_cte_in_subqueries-3F">supports_cte_in_subqueries?</a></li>
              <li><a target="docwin" href="#method-i-supports_distinct_on-3F">supports_distinct_on?</a></li>
              <li><a target="docwin" href="#method-i-supports_group_cube-3F">supports_group_cube?</a></li>
              <li><a target="docwin" href="#method-i-supports_group_rollup-3F">supports_group_rollup?</a></li>
              <li><a target="docwin" href="#method-i-supports_insert_select-3F">supports_insert_select?</a></li>
              <li><a target="docwin" href="#method-i-supports_intersect_except-3F">supports_intersect_except?</a></li>
              <li><a target="docwin" href="#method-i-supports_intersect_except_all-3F">supports_intersect_except_all?</a></li>
              <li><a target="docwin" href="#method-i-supports_is_true-3F">supports_is_true?</a></li>
              <li><a target="docwin" href="#method-i-supports_join_using-3F">supports_join_using?</a></li>
              <li><a target="docwin" href="#method-i-supports_lateral_subqueries-3F">supports_lateral_subqueries?</a></li>
              <li><a target="docwin" href="#method-i-supports_modifying_joins-3F">supports_modifying_joins?</a></li>
              <li><a target="docwin" href="#method-i-supports_multiple_column_in-3F">supports_multiple_column_in?</a></li>
              <li><a target="docwin" href="#method-i-supports_ordered_distinct_on-3F">supports_ordered_distinct_on?</a></li>
              <li><a target="docwin" href="#method-i-supports_regexp-3F">supports_regexp?</a></li>
              <li><a target="docwin" href="#method-i-supports_replace-3F">supports_replace?</a></li>
              <li><a target="docwin" href="#method-i-supports_returning-3F">supports_returning?</a></li>
              <li><a target="docwin" href="#method-i-supports_select_all_and_column-3F">supports_select_all_and_column?</a></li>
              <li><a target="docwin" href="#method-i-supports_timestamp_timezones-3F">supports_timestamp_timezones?</a></li>
              <li><a target="docwin" href="#method-i-supports_timestamp_usecs-3F">supports_timestamp_usecs?</a></li>
              <li><a target="docwin" href="#method-i-supports_where_true-3F">supports_where_true?</a></li>
              <li><a target="docwin" href="#method-i-supports_window_functions-3F">supports_window_functions?</a></li>
              <li><a target="docwin" href="#method-i-to_hash">to_hash</a></li>
              <li><a target="docwin" href="#method-i-to_hash_groups">to_hash_groups</a></li>
              <li><a target="docwin" href="#method-i-truncate">truncate</a></li>
              <li><a target="docwin" href="#method-i-truncate_sql">truncate_sql</a></li>
              <li><a target="docwin" href="#method-i-unbind">unbind</a></li>
              <li><a target="docwin" href="#method-i-unfiltered">unfiltered</a></li>
              <li><a target="docwin" href="#method-i-ungraphed">ungraphed</a></li>
              <li><a target="docwin" href="#method-i-ungrouped">ungrouped</a></li>
              <li><a target="docwin" href="#method-i-union">union</a></li>
              <li><a target="docwin" href="#method-i-unlimited">unlimited</a></li>
              <li><a target="docwin" href="#method-i-unordered">unordered</a></li>
              <li><a target="docwin" href="#method-i-unused_table_alias">unused_table_alias</a></li>
              <li><a target="docwin" href="#method-i-update">update</a></li>
              <li><a target="docwin" href="#method-i-update_sql">update_sql</a></li>
              <li><a target="docwin" href="#method-i-where">where</a></li>
              <li><a target="docwin" href="#method-i-window_function_sql_append">window_function_sql_append</a></li>
              <li><a target="docwin" href="#method-i-window_sql_append">window_sql_append</a></li>
              <li><a target="docwin" href="#method-i-with">with</a></li>
              <li><a target="docwin" href="#method-i-with_recursive">with_recursive</a></li>
              <li><a target="docwin" href="#method-i-with_sql">with_sql</a></li>
              <li><a target="docwin" href="#method-i-with_sql_delete">with_sql_delete</a></li>
            </ol>
            <h3>Protected Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-_import">_import</a></li>
              <li><a target="docwin" href="#method-i-_insert_sql">_insert_sql</a></li>
              <li><a target="docwin" href="#method-i-_select_map_multiple">_select_map_multiple</a></li>
              <li><a target="docwin" href="#method-i-_select_map_single">_select_map_single</a></li>
              <li><a target="docwin" href="#method-i-_update_sql">_update_sql</a></li>
              <li><a target="docwin" href="#method-i-compound_clone">compound_clone</a></li>
              <li><a target="docwin" href="#method-i-compound_from_self">compound_from_self</a></li>
              <li><a target="docwin" href="#method-i-options_overlap">options_overlap</a></li>
              <li><a target="docwin" href="#method-i-simple_select_all-3F">simple_select_all?</a></li>
              <li><a target="docwin" href="#method-i-to_prepared_statement">to_prepared_statement</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='contents'>
              <h2>Contents</h2>
              <ol>
                <li><a target="docwin" href="#5Buntitled-5D"></a></li>
                <li><a target="docwin" href="#1+-+Methods+that+return+modified+datasets">1 - Methods that return modified datasets</a></li>
                <li><a target="docwin" href="#2+-+Methods+that+execute+code+on+the+database">2 - Methods that execute code on the database</a></li>
                <li><a target="docwin" href="#3+-+User+Methods+relating+to+SQL+Creation">3 - User Methods relating to SQL Creation</a></li>
                <li><a target="docwin" href="#4+-+Methods+that+describe+what+the+dataset+supports">4 - Methods that describe what the dataset supports</a></li>
                <li><a target="docwin" href="#5+-+Methods+related+to+dataset+graphing">5 - Methods related to dataset graphing</a></li>
                <li><a target="docwin" href="#6+-+Miscellaneous+methods">6 - Miscellaneous methods</a></li>
                <li><a target="docwin" href="#7+-+Mutation+methods">7 - Mutation methods</a></li>
                <li><a target="docwin" href="#8+-+Methods+related+to+prepared+statements+or+bound+variables">8 - Methods related to prepared statements or bound variables</a></li>
                <li><a target="docwin" href="#9+-+Internal+Methods+relating+to+SQL+Creation">9 - Internal Methods relating to SQL Creation</a></li>
              </ol>
            </div>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>Enumerable</li>
                <li><a target="docwin" href="SQL/AliasMethods.html">SQL::AliasMethods</a></li>
                <li><a target="docwin" href="SQL/BooleanMethods.html">SQL::BooleanMethods</a></li>
                <li><a target="docwin" href="SQL/CastMethods.html">SQL::CastMethods</a></li>
                <li><a target="docwin" href="SQL/ComplexExpressionMethods.html">SQL::ComplexExpressionMethods</a></li>
                <li><a target="docwin" href="SQL/InequalityMethods.html">SQL::InequalityMethods</a></li>
                <li><a target="docwin" href="SQL/NumericMethods.html">SQL::NumericMethods</a></li>
                <li><a target="docwin" href="SQL/OrderMethods.html">SQL::OrderMethods</a></li>
                <li><a target="docwin" href="SQL/StringMethods.html">SQL::StringMethods</a></li>
              </ol>
            </div>
          </div>
          <div id='class-list'>
            <h2>Classes and Modules</h2>
            <ol>
              <li><a target="docwin" href="Dataset/ArgumentMapper.html">Sequel::Dataset::ArgumentMapper</a></li>
              <li><a target="docwin" href="Dataset/PreparedStatementMethods.html">Sequel::Dataset::PreparedStatementMethods</a></li>
              <li><a target="docwin" href="Dataset/UnnumberedArgumentMapper.html">Sequel::Dataset::UnnumberedArgumentMapper</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>OPTS</td>
                    <td>=</td>
                    <td class='context-item-value'>Sequel::OPTS</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='1+-+Methods+that+return+modified+datasets'>1 - Methods that return modified datasets</a>
              <div class='section-comment'>
                
                <p>These methods all return modified copies of the receiver.</p>
              </div>
            </h2>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COLUMN_CHANGE_OPTS</td>
                    <td>=</td>
                    <td class='context-item-value'>[:select, :sql, :from, :join].freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>The dataset options that require the removal of cached columns if changed.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CONDITIONED_JOIN_TYPES</td>
                    <td>=</td>
                    <td class='context-item-value'>[:inner, :full_outer, :right_outer, :left_outer, :full, :right, :left]</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>These symbols have _join methods created (e.g. inner_join) that call <a
                      href="Dataset.html#method-i-join_table">#join_table</a> with the symbol,
                      passing along the arguments and block from the method call.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>EXTENSIONS</td>
                    <td>=</td>
                    <td class='context-item-value'>{}</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p><a href="../Hash.html">Hash</a> of extension name symbols to callable
                      objects to load the extension into the <a href="Dataset.html">Dataset</a>
                      object (usually by extending it with a module defined in the extension).</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>JOIN_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>(CONDITIONED_JOIN_TYPES + UNCONDITIONED_JOIN_TYPES).map{|x| "#{x}_join".to_sym} + [:join, :join_table]</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>All methods that return modified datasets with a joined table added.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>NON_SQL_OPTIONS</td>
                    <td>=</td>
                    <td class='context-item-value'>[:server, :defaults, :overrides, :graph, :eager_graph, :graph_aliases]</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Which options don&#39;t affect the <a href="SQL.html">SQL</a> generation. 
                      Used by simple_select_all? to determine if this is a simple <a
                      href="Dataset.html#SELECT">SELECT</a> * <a
                      href="Dataset.html#FROM">FROM</a> table.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUERY_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>
                      (<<-METHS).split.map{|x| x.to_sym} + JOIN_METHODS
                      add_graph_aliases and distinct except exclude exclude_having exclude_where
                      filter for_update from from_self graph grep group group_and_count group_by having intersect invert
                      limit lock_style naked offset or order order_append order_by order_more order_prepend qualify
                      reverse reverse_order select select_all select_append select_group select_more server
                      set_graph_aliases unfiltered ungraphed ungrouped union
                      unlimited unordered where with with_recursive with_sql
                      METHS
                    </td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Methods that return modified datasets</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>UNCONDITIONED_JOIN_TYPES</td>
                    <td>=</td>
                    <td class='context-item-value'>[:natural, :natural_left, :natural_right, :natural_full, :cross]</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>These symbols have _join methods created (e.g. natural_join) that call <a
                      href="Dataset.html#method-i-join_table">#join_table</a> with the symbol. 
                      They only accept a single table argument which is passed to <a
                      href="Dataset.html#method-i-join_table">#join_table</a>, and they raise an
                      error if called with a block.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-register_extension'>
                <a name='method-c-register_extension'></a>
                <div class='synopsis'>
                  <span class='name'>register_extension</span>
                  <span class='arguments'>(ext, mod=nil, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Register an extension callback for <a href="Dataset.html">Dataset</a>
                  objects.  ext should be the extension name symbol, and mod should either be
                  a Module that the dataset is extended with, or a callable object called
                  with the database object.  If mod is not provided, a block can be provided
                  and is treated as the mod object.</p>
                  
                  <p>If mod is a module, this also registers a <a
                  href="Database.html">Database</a> extension that will extend all of the
                  database&#39;s datasets.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-register_extension-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-register_extension-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 53</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">register_extension</span>(<span class="ruby-identifier">ext</span>, <span class="ruby-identifier">mod</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">mod</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;cannot provide both mod and block to Dataset.register_extension&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Module</span>)&#x000A;      <span class="ruby-identifier">block</span> = <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ds</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-identifier">mod</span>)}&#x000A;      <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Database</span>.<span class="ruby-identifier">register_extension</span>(<span class="ruby-identifier">ext</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">db</span><span class="ruby-operator">|</span> <span class="ruby-identifier">db</span>.<span class="ruby-identifier">extend_datasets</span>(<span class="ruby-identifier">mod</span>)}&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">block</span> = <span class="ruby-identifier">mod</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-constant">EXTENSIONS</span>[<span class="ruby-identifier">ext</span>] = <span class="ruby-identifier">block</span>}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-and'>
                <a name='method-i-and'></a>
                <div class='synopsis'>
                  <span class='name'>and</span>
                  <span class='arguments'>(*cond, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias for where.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-and-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-and-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 67</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">and</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">where</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-clone'>
                <a name='method-i-clone'></a>
                <div class='synopsis'>
                  <span class='name'>clone</span>
                  <span class='arguments'>(opts = nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a new clone of the dataset with with the given options merged. If
                  the options changed include options in <a
                  href="Dataset.html#COLUMN_CHANGE_OPTS">COLUMN_CHANGE_OPTS</a>, the cached
                  columns are deleted.  This method should generally not be called directly
                  by user code.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-clone-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-clone-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 75</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">clone</span>(<span class="ruby-identifier">opts</span> = <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">c</span> = <span class="ruby-keyword">super</span>()&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>&#x000A;    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@opts</span>, <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>))&#x000A;    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@columns</span>, <span class="ruby-keyword">nil</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@columns</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">opts</span>.<span class="ruby-identifier">each_key</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">COLUMN_CHANGE_OPTS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">o</span>)}&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@opts</span>, <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">dup</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">c</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-distinct'>
                <a name='method-i-distinct'></a>
                <div class='synopsis'>
                  <span class='name'>distinct</span>
                  <span class='arguments'>(*args)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the <a href="SQL.html">SQL</a> <a
                  href="Dataset.html#DISTINCT">DISTINCT</a> clause. The <a
                  href="Dataset.html#DISTINCT">DISTINCT</a> clause is used to remove
                  duplicate rows from the output.  If arguments are provided, uses a <a
                  href="Dataset.html#DISTINCT">DISTINCT</a> <a href="Dataset.html#ON">ON</a>
                  clause, in which case it will only be distinct on those columns, instead of
                  all returned columns.  Raises an error if arguments are given and <a
                  href="Dataset.html#DISTINCT">DISTINCT</a> <a href="Dataset.html#ON">ON</a>
                  is not supported.</p>
                  
                  <pre>DB[:items].distinct # SQL: SELECT DISTINCT * FROM items&#x000A;DB[:items].order(:id).distinct(:id) # SQL: SELECT DISTINCT ON (id) * FROM items ORDER BY id</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-distinct-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-distinct-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 95</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">distinct</span>(*<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">InvalidOperation</span>, <span class="ruby-string">&quot;DISTINCT ON not supported&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">supports_distinct_on?</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">args</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-except'>
                <a name='method-i-except'></a>
                <div class='synopsis'>
                  <span class='name'>except</span>
                  <span class='arguments'>(dataset, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds an EXCEPT clause using a second dataset object. An EXCEPT compound
                  dataset returns all rows in the current dataset that are not in the given
                  dataset. Raises an <code>InvalidOperation</code> if the operation is not
                  supported. Options:</p>
                  <dl class="rdoc-list note-list"><dt>:alias 
                  <dd>
                  <p>Use the given value as the <a
                  href="Dataset.html#method-i-from_self">#from_self</a> alias</p>
                  </dd><dt>:all 
                  <dd>
                  <p>Set to true to use EXCEPT <a href="Dataset.html#ALL">ALL</a> instead of
                  EXCEPT, so duplicate rows can occur</p>
                  </dd><dt>:<a href="Dataset.html#method-i-from_self">#from_self</a> 
                  <dd>
                  <p>Set to false to not wrap the returned dataset in a <a
                  href="Dataset.html#method-i-from_self">#from_self</a>, use with care.</p>
                  </dd></dl>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">except</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>])&#x000A;<span class="ruby-comment"># SELECT * FROM (SELECT * FROM items EXCEPT SELECT * FROM other_items) AS t1</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">except</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>], :<span class="ruby-identifier">all=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>, :<span class="ruby-identifier">from_self=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">false</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items EXCEPT ALL SELECT * FROM other_items</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">except</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>], :<span class="ruby-keyword">alias</span>=<span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">i</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM (SELECT * FROM items EXCEPT SELECT * FROM other_items) AS i</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-except-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-except-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 117</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">except</span>(<span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">InvalidOperation</span>, <span class="ruby-string">&quot;EXCEPT not supported&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_intersect_except?</span>&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">InvalidOperation</span>, <span class="ruby-string">&quot;EXCEPT ALL not supported&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:all</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">supports_intersect_except_all?</span>&#x000A;  <span class="ruby-identifier">compound_clone</span>(<span class="ruby-value">:except</span>, <span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-exclude'>
                <a name='method-i-exclude'></a>
                <div class='synopsis'>
                  <span class='name'>exclude</span>
                  <span class='arguments'>(*cond, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Performs the inverse of <a href="Dataset.html#method-i-where">#where</a>. 
                  Note that if you have multiple filter conditions, this is not the same as a
                  negation of all conditions.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">exclude</span>(:<span class="ruby-identifier">category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;software&#39;</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE (category != &#39;software&#39;)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">exclude</span>(:<span class="ruby-identifier">category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;software&#39;</span>, :<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">3</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE ((category != &#39;software&#39;) OR (id != 3))</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exclude-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exclude-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 131</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exclude</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">_filter_or_exclude</span>(<span class="ruby-keyword">true</span>, <span class="ruby-value">:where</span>, *<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-exclude_having'>
                <a name='method-i-exclude_having'></a>
                <div class='synopsis'>
                  <span class='name'>exclude_having</span>
                  <span class='arguments'>(*cond, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Inverts the given conditions and adds them to the <a
                  href="Dataset.html#HAVING">HAVING</a> clause.</p>
                  
                  <pre>DB[:items].select_group(:name).exclude_having{count(name) &lt; 2}&#x000A;# SELECT name FROM items GROUP BY name HAVING (count(name) &gt;= 2)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exclude_having-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exclude_having-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 139</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exclude_having</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">_filter_or_exclude</span>(<span class="ruby-keyword">true</span>, <span class="ruby-value">:having</span>, *<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-exclude_where'>
                <a name='method-i-exclude_where'></a>
                <div class='synopsis'>
                  <span class='name'>exclude_where</span>
                  <span class='arguments'>(*cond, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias for exclude.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exclude_where-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exclude_where-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 144</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exclude_where</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">exclude</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-extension'>
                <a name='method-i-extension'></a>
                <div class='synopsis'>
                  <span class='name'>extension</span>
                  <span class='arguments'>(*exts)</span>
                </div>
                <div class='description'>
                  
                  <p>Return a clone of the dataset loaded with the extensions, see <a
                  href="Dataset.html#method-i-extension-21">extension!</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-extension-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-extension-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 149</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">extension</span>(*<span class="ruby-identifier">exts</span>)&#x000A;  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">extension!</span>(*<span class="ruby-identifier">exts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-filter'>
                <a name='method-i-filter'></a>
                <div class='synopsis'>
                  <span class='name'>filter</span>
                  <span class='arguments'>(*cond, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias for where.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-filter-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-filter-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 154</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">filter</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">where</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-for_update'>
                <a name='method-i-for_update'></a>
                <div class='synopsis'>
                  <span class='name'>for_update</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a cloned dataset with a :update lock style.</p>
                  
                  <pre>DB[:table].for_update # SELECT * FROM table FOR UPDATE</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-for_update-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-for_update-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 161</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">for_update</span>&#x000A;  <span class="ruby-identifier">lock_style</span>(<span class="ruby-value">:update</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-from'>
                <a name='method-i-from'></a>
                <div class='synopsis'>
                  <span class='name'>from</span>
                  <span class='arguments'>(*source, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the source changed. If no source is
                  given, removes all tables.  If multiple sources are given, it is the same
                  as using a CROSS JOIN (cartesian product) between all tables. If a block is
                  given, it is treated as a virtual row block, similar to <code>where</code>.</p>
                  
                  <pre>DB[:items].from # SQL: SELECT *&#x000A;DB[:items].from(:blah) # SQL: SELECT * FROM blah&#x000A;DB[:items].from(:blah, :foo) # SQL: SELECT * FROM blah, foo&#x000A;DB[:items].from{fun(arg)} # SQL: SELECT * FROM fun(arg)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-from-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-from-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 174</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">from</span>(*<span class="ruby-identifier">source</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">virtual_row_columns</span>(<span class="ruby-identifier">source</span>, <span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">table_alias_num</span> = <span class="ruby-value">0</span>&#x000A;  <span class="ruby-identifier">ctes</span> = <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-identifier">source</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-keyword">case</span> <span class="ruby-identifier">s</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-constant">Dataset</span>&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">hoist_cte?</span>(<span class="ruby-identifier">s</span>)&#x000A;        <span class="ruby-identifier">ctes</span> <span class="ruby-operator">||=</span> []&#x000A;        <span class="ruby-identifier">ctes</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:with</span>]&#x000A;        <span class="ruby-identifier">s</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">clone</span>(<span class="ruby-value">:with=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>)&#x000A;      <span class="ruby-keyword">end</span>&#x000A;      <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">dataset_alias</span>(<span class="ruby-identifier">table_alias_num</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>))&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;      <span class="ruby-identifier">sch</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">aliaz</span> = <span class="ruby-identifier">split_symbol</span>(<span class="ruby-identifier">s</span>)&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">aliaz</span>&#x000A;        <span class="ruby-identifier">s</span> = <span class="ruby-identifier">sch</span> <span class="ruby-operator">?</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sch</span>, <span class="ruby-identifier">table</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table</span>)&#x000A;        <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">aliaz</span>.<span class="ruby-identifier">to_sym</span>)&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-identifier">s</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">s</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">o</span> = {<span class="ruby-value">:from=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">source</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">source</span>}&#x000A;  <span class="ruby-identifier">o</span>[<span class="ruby-value">:with</span>] = (<span class="ruby-identifier">opts</span>[<span class="ruby-value">:with</span>] <span class="ruby-operator">||</span> []) <span class="ruby-operator">+</span> <span class="ruby-identifier">ctes</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ctes</span>&#x000A;  <span class="ruby-identifier">o</span>[<span class="ruby-value">:num_dataset_sources</span>] = <span class="ruby-identifier">table_alias_num</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">table_alias_num</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-identifier">o</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-from_self'>
                <a name='method-i-from_self'></a>
                <div class='synopsis'>
                  <span class='name'>from_self</span>
                  <span class='arguments'>(opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a dataset selecting from the current dataset. Supplying the :alias
                  option controls the alias of the result.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">ds</span> = <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">name</span>).<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>)&#x000A;<span class="ruby-comment"># SELECT id,name FROM items ORDER BY name</span>&#x000A;&#x000A;<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">from_self</span>&#x000A;<span class="ruby-comment"># SELECT * FROM (SELECT id, name FROM items ORDER BY name) AS t1</span>&#x000A;&#x000A;<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">from_self</span>(:<span class="ruby-keyword">alias</span>=<span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">foo</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM (SELECT id, name FROM items ORDER BY name) AS foo</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-from_self-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-from_self-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 216</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_self</span>(<span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">fs</span> = {}&#x000A;  <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">fs</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">NON_SQL_OPTIONS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">k</span>)}&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-identifier">fs</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:alias</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">as</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:alias</span>]) <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-grep'>
                <a name='method-i-grep'></a>
                <div class='synopsis'>
                  <span class='name'>grep</span>
                  <span class='arguments'>(columns, patterns, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Match any of the columns to any of the patterns. The terms can be strings
                  (which use LIKE) or regular expressions (which are only supported on MySQL
                  and PostgreSQL).  Note that the total number of pattern matches will be
                  Array(columns).length * Array(terms).length, which could cause performance
                  issues.</p>
                  
                  <p>Options (all are boolean):</p>
                  <dl class="rdoc-list note-list"><dt>:all_columns 
                  <dd>
                  <p>All columns must be matched to any of the given patterns.</p>
                  </dd><dt>:all_patterns 
                  <dd>
                  <p>All patterns must match at least one of the columns.</p>
                  </dd><dt>:case_insensitive 
                  <dd>
                  <p>Use a case insensitive pattern match (the default is case sensitive if the
                  database supports it).</p>
                  </dd></dl>
                  
                  <p>If both :all_columns and :all_patterns are true, all columns must match all
                  patterns.</p>
                  
                  <p>Examples:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">grep</span>(:<span class="ruby-identifier">a</span>, <span class="ruby-string">&#39;%test%&#39;</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE (a LIKE &#39;%test%&#39;)</span>&#x000A;&#x000A;<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">grep</span>([:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>], <span class="ruby-node">%w%test% foo&#39;</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE ((a LIKE &#39;%test%&#39;) OR (a LIKE &#39;foo&#39;) OR (b LIKE &#39;%test%&#39;) OR (b LIKE &#39;foo&#39;))</span>&#x000A;&#x000A;<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">grep</span>([:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>], <span class="ruby-node">%w%foo% %bar%&#39;</span>, :<span class="ruby-identifier">all_patterns=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM a WHERE (((a LIKE &#39;%foo%&#39;) OR (b LIKE &#39;%foo%&#39;)) AND ((a LIKE &#39;%bar%&#39;) OR (b LIKE &#39;%bar%&#39;)))</span>&#x000A;&#x000A;<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">grep</span>([:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>], <span class="ruby-node">%w%foo% %bar%&#39;</span>, :<span class="ruby-identifier">all_columns=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM a WHERE (((a LIKE &#39;%foo%&#39;) OR (a LIKE &#39;%bar%&#39;)) AND ((b LIKE &#39;%foo%&#39;) OR (b LIKE &#39;%bar%&#39;)))</span>&#x000A;&#x000A;<span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">grep</span>([:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>], <span class="ruby-node">%w%foo% %bar%&#39;</span>, :<span class="ruby-identifier">all_patterns=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>, :<span class="ruby-identifier">all_columns=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM a WHERE ((a LIKE &#39;%foo%&#39;) AND (b LIKE &#39;%foo%&#39;) AND (a LIKE &#39;%bar%&#39;) AND (b LIKE &#39;%bar%&#39;))</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-grep-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-grep-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 253</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">grep</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">patterns</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:all_patterns</span>]&#x000A;    <span class="ruby-identifier">conds</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">patterns</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pat</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:all_columns</span>] <span class="ruby-operator">?</span> <span class="ruby-value">:AND</span> <span class="ruby-operator">:</span> <span class="ruby-value">:OR</span>, *<span class="ruby-constant">Array</span>(<span class="ruby-identifier">columns</span>).<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">StringExpression</span>.<span class="ruby-identifier">like</span>(<span class="ruby-identifier">c</span>, <span class="ruby-identifier">pat</span>, <span class="ruby-identifier">opts</span>)})&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-identifier">where</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:all_patterns</span>] <span class="ruby-operator">?</span> <span class="ruby-value">:AND</span> <span class="ruby-operator">:</span> <span class="ruby-value">:OR</span>, *<span class="ruby-identifier">conds</span>))&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">conds</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">columns</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:OR</span>, *<span class="ruby-constant">Array</span>(<span class="ruby-identifier">patterns</span>).<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">pat</span><span class="ruby-operator">|</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">StringExpression</span>.<span class="ruby-identifier">like</span>(<span class="ruby-identifier">c</span>, <span class="ruby-identifier">pat</span>, <span class="ruby-identifier">opts</span>)})&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-identifier">where</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:all_columns</span>] <span class="ruby-operator">?</span> <span class="ruby-value">:AND</span> <span class="ruby-operator">:</span> <span class="ruby-value">:OR</span>, *<span class="ruby-identifier">conds</span>))&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-group'>
                <a name='method-i-group'></a>
                <div class='synopsis'>
                  <span class='name'>group</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the results grouped by the value of  the
                  given columns.  If a block is given, it is treated as a virtual row block,
                  similar to <code>where</code>.</p>
                  
                  <pre>DB[:items].group(:id) # SELECT * FROM items GROUP BY id&#x000A;DB[:items].group(:id, :name) # SELECT * FROM items GROUP BY id, name&#x000A;DB[:items].group{[a, sum(b)]} # SELECT * FROM items GROUP BY a, sum(b)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-group-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-group-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 274</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">group</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">virtual_row_columns</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:group</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">columns</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-group_and_count'>
                <a name='method-i-group_and_count'></a>
                <div class='synopsis'>
                  <span class='name'>group_and_count</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a dataset grouped by the given column with count by group. Column
                  aliases may be supplied, and will be included in the select clause. If a
                  block is given, it is treated as a virtual row block, similar to
                  <code>where</code>.</p>
                  
                  <p>Examples:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">group_and_count</span>(:<span class="ruby-identifier">name</span>).<span class="ruby-identifier">all</span>&#x000A;<span class="ruby-comment"># SELECT name, count(*) AS count FROM items GROUP BY name </span>&#x000A;<span class="ruby-comment"># =&gt; [{:name=&gt;&#39;a&#39;, :count=&gt;1}, ...]</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">group_and_count</span>(:<span class="ruby-identifier">first_name</span>, :<span class="ruby-identifier">last_name</span>).<span class="ruby-identifier">all</span>&#x000A;<span class="ruby-comment"># SELECT first_name, last_name, count(*) AS count FROM items GROUP BY first_name, last_name</span>&#x000A;<span class="ruby-comment"># =&gt; [{:first_name=&gt;&#39;a&#39;, :last_name=&gt;&#39;b&#39;, :count=&gt;1}, ...]</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">group_and_count</span>(:<span class="ruby-identifier">first_name___name</span>).<span class="ruby-identifier">all</span>&#x000A;<span class="ruby-comment"># SELECT first_name AS name, count(*) AS count FROM items GROUP BY first_name</span>&#x000A;<span class="ruby-comment"># =&gt; [{:name=&gt;&#39;a&#39;, :count=&gt;1}, ...]</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">group_and_count</span>{<span class="ruby-identifier">substr</span>(<span class="ruby-identifier">first_name</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">as</span>(<span class="ruby-identifier">initial</span>)}.<span class="ruby-identifier">all</span>&#x000A;<span class="ruby-comment"># SELECT substr(first_name, 1, 1) AS initial, count(*) AS count FROM items GROUP BY substr(first_name, 1, 1)</span>&#x000A;<span class="ruby-comment"># =&gt; [{:initial=&gt;&#39;a&#39;, :count=&gt;1}, ...]</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-group_and_count-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-group_and_count-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 305</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">group_and_count</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">select_group</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>).<span class="ruby-identifier">select_more</span>(<span class="ruby-constant">COUNT_OF_ALL_AS_COUNT</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-group_by'>
                <a name='method-i-group_by'></a>
                <div class='synopsis'>
                  <span class='name'>group_by</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias of group</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-group_by-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-group_by-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 280</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">group_by</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">group</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-group_cube'>
                <a name='method-i-group_cube'></a>
                <div class='synopsis'>
                  <span class='name'>group_cube</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Adds the appropriate CUBE syntax to GROUP BY.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-group_cube-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-group_cube-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 310</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">group_cube</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;GROUP BY CUBE not supported on #{db.database_type}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_group_cube?</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:group_options=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:cube</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-group_rollup'>
                <a name='method-i-group_rollup'></a>
                <div class='synopsis'>
                  <span class='name'>group_rollup</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Adds the appropriate ROLLUP syntax to GROUP BY.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-group_rollup-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-group_rollup-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 316</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">group_rollup</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;GROUP BY ROLLUP not supported on #{db.database_type}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_group_rollup?</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:group_options=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:rollup</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-having'>
                <a name='method-i-having'></a>
                <div class='synopsis'>
                  <span class='name'>having</span>
                  <span class='arguments'>(*cond, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the <a
                  href="Dataset.html#HAVING">HAVING</a> conditions changed. See <a
                  href="Dataset.html#method-i-where">where</a> for argument types.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">group</span>(:<span class="ruby-identifier">sum</span>).<span class="ruby-identifier">having</span>(:<span class="ruby-identifier">sum=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">10</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items GROUP BY sum HAVING (sum = 10)</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-having-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-having-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 325</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">having</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">_filter</span>(<span class="ruby-value">:having</span>, *<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-intersect'>
                <a name='method-i-intersect'></a>
                <div class='synopsis'>
                  <span class='name'>intersect</span>
                  <span class='arguments'>(dataset, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds an INTERSECT clause using a second dataset object. An INTERSECT
                  compound dataset returns all rows in both the current dataset and the given
                  dataset. Raises an <code>InvalidOperation</code> if the operation is not
                  supported. Options:</p>
                  <dl class="rdoc-list note-list"><dt>:alias 
                  <dd>
                  <p>Use the given value as the <a
                  href="Dataset.html#method-i-from_self">#from_self</a> alias</p>
                  </dd><dt>:all 
                  <dd>
                  <p>Set to true to use INTERSECT <a href="Dataset.html#ALL">ALL</a> instead of
                  INTERSECT, so duplicate rows can occur</p>
                  </dd><dt>:<a href="Dataset.html#method-i-from_self">#from_self</a> 
                  <dd>
                  <p>Set to false to not wrap the returned dataset in a <a
                  href="Dataset.html#method-i-from_self">#from_self</a>, use with care.</p>
                  </dd></dl>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">intersect</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>])&#x000A;<span class="ruby-comment"># SELECT * FROM (SELECT * FROM items INTERSECT SELECT * FROM other_items) AS t1</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">intersect</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>], :<span class="ruby-identifier">all=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>, :<span class="ruby-identifier">from_self=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">false</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items INTERSECT ALL SELECT * FROM other_items</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">intersect</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>], :<span class="ruby-keyword">alias</span>=<span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">i</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM (SELECT * FROM items INTERSECT SELECT * FROM other_items) AS i</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-intersect-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-intersect-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 346</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">intersect</span>(<span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">InvalidOperation</span>, <span class="ruby-string">&quot;INTERSECT not supported&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_intersect_except?</span>&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">InvalidOperation</span>, <span class="ruby-string">&quot;INTERSECT ALL not supported&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:all</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">supports_intersect_except_all?</span>&#x000A;  <span class="ruby-identifier">compound_clone</span>(<span class="ruby-value">:intersect</span>, <span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-invert'>
                <a name='method-i-invert'></a>
                <div class='synopsis'>
                  <span class='name'>invert</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Inverts the current <a href="Dataset.html#WHERE">WHERE</a> and <a
                  href="Dataset.html#HAVING">HAVING</a> clauses.  If there is neither a <a
                  href="Dataset.html#WHERE">WHERE</a> or <a
                  href="Dataset.html#HAVING">HAVING</a> clause, adds a <a
                  href="Dataset.html#WHERE">WHERE</a> clause that is always false.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;software&#39;</span>).<span class="ruby-identifier">invert</span>&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE (category != &#39;software&#39;)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;software&#39;</span>, :<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">3</span>).<span class="ruby-identifier">invert</span>&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE ((category != &#39;software&#39;) OR (id != 3))</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-invert-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-invert-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 360</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">invert</span>&#x000A;  <span class="ruby-identifier">having</span>, <span class="ruby-identifier">where</span> = <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">values_at</span>(<span class="ruby-value">:having</span>, <span class="ruby-value">:where</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">having</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">where</span>.<span class="ruby-identifier">nil?</span>&#x000A;    <span class="ruby-identifier">where</span>(<span class="ruby-keyword">false</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">o</span> = {}&#x000A;    <span class="ruby-identifier">o</span>[<span class="ruby-value">:having</span>] = <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">invert</span>(<span class="ruby-identifier">having</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">having</span>&#x000A;    <span class="ruby-identifier">o</span>[<span class="ruby-value">:where</span>] = <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">invert</span>(<span class="ruby-identifier">where</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">where</span>&#x000A;    <span class="ruby-identifier">clone</span>(<span class="ruby-identifier">o</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-join'>
                <a name='method-i-join'></a>
                <div class='synopsis'>
                  <span class='name'>join</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias of <code>inner_join</code></p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-join-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-join-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 373</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">join</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">inner_join</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-join_table'>
                <a name='method-i-join_table'></a>
                <div class='synopsis'>
                  <span class='name'>join_table</span>
                  <span class='arguments'>(type, table, expr=nil, options=OPTS, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a joined dataset.  Not usually called directly, users should use
                  the appropriate join method (e.g. join, left_join, natural_join,
                  cross_join) which fills in the <code>type</code> argument.</p>
                  
                  <p>Takes the following arguments:</p>
                  <ul><li>
                  <p>type - The type of join to do (e.g. :inner)</p>
                  </li><li>
                  <p>table - Depends on type:</p>
                  <ul><li>
                  <p><a href="Dataset.html">Dataset</a> - a subselect is performed with an alias
                  of tN for some value of N</p>
                  </li><li>
                  <p><a href="../String.html">String</a>, Symbol: table</p>
                  </li></ul>
                  </li><li>
                  <p>expr - specifies conditions, depends on type:</p>
                  <ul><li>
                  <p><a href="../Hash.html">Hash</a>, <a href="../Array.html">Array</a> of two
                  element arrays - Assumes key (1st arg) is column of joined table (unless
                  already qualified), and value (2nd arg) is column of the last joined or
                  primary table (or the :implicit_qualifier option). To specify multiple
                  conditions on a single joined table column, you must use an array. Uses a
                  JOIN with an <a href="Dataset.html#ON">ON</a> clause.</p>
                  </li><li>
                  <p><a href="../Array.html">Array</a> - If all members of the array are
                  symbols, considers them as columns and  uses a JOIN with a <a
                  href="Dataset.html#USING">USING</a> clause.  Most databases will remove
                  duplicate columns from the result set if this is used.</p>
                  </li><li>
                  <p>nil - If a block is not given, doesn&#39;t use <a
                  href="Dataset.html#ON">ON</a> or <a href="Dataset.html#USING">USING</a>, so
                  the JOIN should be a NATURAL or CROSS join. If a block is given, uses an <a
                  href="Dataset.html#ON">ON</a> clause based on the block, see below.</p>
                  </li><li>
                  <p>Everything else - pretty much the same as a using the argument in a call to
                  where, so strings are considered literal, symbols specify boolean columns,
                  and <a href="../Sequel.html">Sequel</a> expressions can be used. Uses a
                  JOIN with an <a href="Dataset.html#ON">ON</a> clause.</p>
                  </li></ul>
                  </li><li>
                  <p>options - a hash of options, with any of the following keys:</p>
                  <ul><li>
                  <p>:table_alias - the name of the table&#39;s alias when joining, necessary
                  for joining to the same table more than once.  No alias is used by default.</p>
                  </li><li>
                  <p>:implicit_qualifier - The name to use for qualifying implicit conditions. 
                  By default, the last joined or primary table is used.</p>
                  </li><li>
                  <p>:qualify - Can be set to false to not do any implicit qualification.  Can
                  be set to :deep to use the <a href="Qualifier.html">Qualifier</a> AST
                  Transformer, which will attempt to qualify subexpressions of the expression
                  tree.  Can be set to :symbol to only qualify symbols. Defaults to the value
                  of default_join_table_qualification.</p>
                  </li></ul>
                  </li><li>
                  <p>block - The block argument should only be given if a JOIN with an <a
                  href="Dataset.html#ON">ON</a> clause is used, in which case it yields the
                  table alias/name for the table currently being joined, the table alias/name
                  for the last joined (or first table), and an array of previous <a
                  href="SQL/JoinClause.html">SQL::JoinClause</a>. Unlike <code>where</code>,
                  this block is not treated as a virtual row block.</p>
                  </li></ul>
                  
                  <p>Examples:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">a</span>].<span class="ruby-identifier">join_table</span>(:<span class="ruby-identifier">cross</span>, :<span class="ruby-identifier">b</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM a CROSS JOIN b</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">a</span>].<span class="ruby-identifier">join_table</span>(:<span class="ruby-identifier">inner</span>, <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">b</span>], :<span class="ruby-identifier">c=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">d</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM a INNER JOIN (SELECT * FROM b) AS t1 ON (t1.c = a.d)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">a</span>].<span class="ruby-identifier">join_table</span>(:<span class="ruby-identifier">left</span>, :<span class="ruby-identifier">b___c</span>, [:<span class="ruby-identifier">d</span>])&#x000A;<span class="ruby-comment"># SELECT * FROM a LEFT JOIN b AS c USING (d)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">a</span>].<span class="ruby-identifier">natural_join</span>(:<span class="ruby-identifier">b</span>).<span class="ruby-identifier">join_table</span>(:<span class="ruby-identifier">inner</span>, :<span class="ruby-identifier">c</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ta</span>, <span class="ruby-identifier">jta</span>, <span class="ruby-identifier">js</span><span class="ruby-operator">|</span>&#x000A;  (<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">qualify</span>(<span class="ruby-identifier">ta</span>, :<span class="ruby-identifier">d</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">qualify</span>(<span class="ruby-identifier">jta</span>, :<span class="ruby-identifier">e</span>)) &amp; {<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">qualify</span>(<span class="ruby-identifier">ta</span>, :<span class="ruby-identifier">f</span>)=<span class="ruby-operator">&gt;</span><span class="ruby-constant">DB</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">js</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">table</span>).<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">g</span>)}&#x000A;<span class="ruby-keyword">end</span>&#x000A;<span class="ruby-comment"># SELECT * FROM a NATURAL JOIN b INNER JOIN c</span>&#x000A;<span class="ruby-comment">#   ON ((c.d &gt; b.e) AND (c.f IN (SELECT g FROM b)))</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-join_table-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-join_table-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 431</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">join_table</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">expr</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>=<span class="ruby-constant">OPTS</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">hoist_cte?</span>(<span class="ruby-identifier">table</span>)&#x000A;    <span class="ruby-identifier">s</span>, <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">hoist_cte</span>(<span class="ruby-identifier">table</span>)&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">join_table</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">ds</span>, <span class="ruby-identifier">expr</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">using_join</span> = <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">expr</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">all?</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)}&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">using_join</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">supports_join_using?</span>&#x000A;    <span class="ruby-identifier">h</span> = {}&#x000A;    <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">e</span>] = <span class="ruby-identifier">e</span>}&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-identifier">join_table</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">h</span>, <span class="ruby-identifier">options</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">table_alias</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:table_alias</span>]&#x000A;  <span class="ruby-identifier">last_alias</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:implicit_qualifier</span>]&#x000A;  <span class="ruby-identifier">qualify_type</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:qualify</span>]&#x000A;&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">table</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Dataset</span>)&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">table_alias</span>.<span class="ruby-identifier">nil?</span>&#x000A;      <span class="ruby-identifier">table_alias_num</span> = (<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:num_dataset_sources</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>&#x000A;      <span class="ruby-identifier">table_alias</span> = <span class="ruby-identifier">dataset_alias</span>(<span class="ruby-identifier">table_alias_num</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">table_alias</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">table</span>, <span class="ruby-identifier">implicit_table_alias</span> = <span class="ruby-identifier">split_alias</span>(<span class="ruby-identifier">table</span>)&#x000A;    <span class="ruby-identifier">table_alias</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">implicit_table_alias</span>&#x000A;    <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">table_alias</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">table</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">join</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block</span>&#x000A;    <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">JoinClause</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">table_alias</span>)&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">using_join</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;can&#39;t use a block if providing an array of symbols as expr&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;    <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">JoinUsingClause</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">expr</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">table_alias</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">last_alias</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:last_joined_table</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">first_source_alias</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">condition_specifier?</span>(<span class="ruby-identifier">expr</span>)&#x000A;      <span class="ruby-identifier">expr</span> = <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>&#x000A;        <span class="ruby-identifier">qualify_type</span> = <span class="ruby-identifier">default_join_table_qualification</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">qualify_type</span>.<span class="ruby-identifier">nil?</span>&#x000A;        <span class="ruby-keyword">case</span> <span class="ruby-identifier">qualify_type</span>&#x000A;        <span class="ruby-keyword">when</span> <span class="ruby-keyword">false</span>&#x000A;          <span class="ruby-keyword">nil</span> <span class="ruby-comment"># Do no qualification</span>&#x000A;        <span class="ruby-keyword">when</span> <span class="ruby-value">:deep</span>&#x000A;          <span class="ruby-identifier">k</span> = <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Qualifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">transform</span>(<span class="ruby-identifier">k</span>)&#x000A;          <span class="ruby-identifier">v</span> = <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Qualifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">last_alias</span>).<span class="ruby-identifier">transform</span>(<span class="ruby-identifier">v</span>)&#x000A;        <span class="ruby-keyword">else</span>&#x000A;          <span class="ruby-identifier">k</span> = <span class="ruby-identifier">qualified_column_name</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">table_name</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)&#x000A;          <span class="ruby-identifier">v</span> = <span class="ruby-identifier">qualified_column_name</span>(<span class="ruby-identifier">v</span>, <span class="ruby-identifier">last_alias</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)&#x000A;        <span class="ruby-keyword">end</span>&#x000A;        [<span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span>]&#x000A;      <span class="ruby-keyword">end</span>&#x000A;      <span class="ruby-identifier">expr</span> = <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">from_value_pairs</span>(<span class="ruby-identifier">expr</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;      <span class="ruby-identifier">expr2</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">last_alias</span>, <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:join</span>] <span class="ruby-operator">||</span> [])&#x000A;      <span class="ruby-identifier">expr</span> = <span class="ruby-identifier">expr</span> <span class="ruby-operator">?</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:AND</span>, <span class="ruby-identifier">expr</span>, <span class="ruby-identifier">expr2</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">expr2</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">JoinOnClause</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">expr</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">table_alias</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">opts</span> = {<span class="ruby-value">:join</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:join</span>] <span class="ruby-operator">||</span> []) <span class="ruby-operator">+</span> [<span class="ruby-identifier">join</span>], <span class="ruby-value">:last_joined_table</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">table_name</span>}&#x000A;  <span class="ruby-identifier">opts</span>[<span class="ruby-value">:num_dataset_sources</span>] = <span class="ruby-identifier">table_alias_num</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">table_alias_num</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-lateral'>
                <a name='method-i-lateral'></a>
                <div class='synopsis'>
                  <span class='name'>lateral</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Marks this dataset as a lateral dataset.  If used in another dataset&#39;s
                  <a href="Dataset.html#FROM">FROM</a> or JOIN clauses, it will surround the
                  subquery with <a href="Dataset.html#LATERAL">LATERAL</a> to enable it to
                  deal with previous tables in the query:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>.<span class="ruby-identifier">from</span>(:<span class="ruby-identifier">a</span>, <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">b</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">a__c=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">b__d</span>).<span class="ruby-identifier">lateral</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM a, LATERAL (SELECT * FROM b WHERE (a.c = b.d))</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-lateral-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-lateral-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 509</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">lateral</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:lateral=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-limit'>
                <a name='method-i-limit'></a>
                <div class='synopsis'>
                  <span class='name'>limit</span>
                  <span class='arguments'>(l, o = (no_offset = true; nil))</span>
                </div>
                <div class='description'>
                  
                  <p>If given an integer, the dataset will contain only the first l results. If
                  given a range, it will contain only those at offsets within that range. If
                  a second argument is given, it is used as an offset. To use an offset
                  without a limit, pass nil as the first argument.</p>
                  
                  <pre>DB[:items].limit(10) # SELECT * FROM items LIMIT 10&#x000A;DB[:items].limit(10, 20) # SELECT * FROM items LIMIT 10 OFFSET 20&#x000A;DB[:items].limit(10...20) # SELECT * FROM items LIMIT 10 OFFSET 10&#x000A;DB[:items].limit(10..20) # SELECT * FROM items LIMIT 11 OFFSET 10&#x000A;DB[:items].limit(nil, 20) # SELECT * FROM items OFFSET 20</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-limit-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-limit-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 523</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">limit</span>(<span class="ruby-identifier">l</span>, <span class="ruby-identifier">o</span> = (<span class="ruby-identifier">no_offset</span> = <span class="ruby-keyword">true</span>; <span class="ruby-keyword">nil</span>))&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">from_self</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-identifier">l</span>, <span class="ruby-identifier">o</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:sql</span>]&#x000A;&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Range</span>)&#x000A;    <span class="ruby-identifier">no_offset</span> = <span class="ruby-keyword">false</span>&#x000A;    <span class="ruby-identifier">o</span> = <span class="ruby-identifier">l</span>.<span class="ruby-identifier">first</span>&#x000A;    <span class="ruby-identifier">l</span> = <span class="ruby-identifier">l</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">l</span>.<span class="ruby-identifier">exclude_end?</span> <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">l</span> = <span class="ruby-identifier">l</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">l</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">LiteralString</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>)&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;Limits must be greater than or equal to 1&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">l</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">clone</span>(<span class="ruby-value">:limit=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">l</span>)&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-identifier">o</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">no_offset</span>&#x000A;  <span class="ruby-identifier">ds</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-lock_style'>
                <a name='method-i-lock_style'></a>
                <div class='synopsis'>
                  <span class='name'>lock_style</span>
                  <span class='arguments'>(style)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a cloned dataset with the given lock style.  If style is a string,
                  it will be used directly. You should never pass a string to this method
                  that is derived from user input, as that can lead to <a
                  href="SQL.html">SQL</a> injection.</p>
                  
                  <p>A symbol may be used for database independent locking behavior, but all
                  supported symbols have separate methods (e.g. <a
                  href="Dataset.html#method-i-for_update">#for_update</a>).</p>
                  
                  <pre>DB[:items].lock_style(&#39;FOR SHARE NOWAIT&#39;) # SELECT * FROM items FOR SHARE NOWAIT</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-lock_style-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-lock_style-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 550</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">lock_style</span>(<span class="ruby-identifier">style</span>)&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:lock</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">style</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-naked'>
                <a name='method-i-naked'></a>
                <div class='synopsis'>
                  <span class='name'>naked</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a cloned dataset without a row_proc.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">ds</span> = <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>]&#x000A;<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">row_proc</span> = <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">invert</span>}&#x000A;<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">all</span> <span class="ruby-comment"># =&gt; [{2=&gt;:id}]</span>&#x000A;<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">naked</span>.<span class="ruby-identifier">all</span> <span class="ruby-comment"># =&gt; [{:id=&gt;2}]</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-naked-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-naked-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 560</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">naked</span>&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">clone</span>&#x000A;  <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">row_proc</span> = <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-identifier">ds</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-offset'>
                <a name='method-i-offset'></a>
                <div class='synopsis'>
                  <span class='name'>offset</span>
                  <span class='arguments'>(o)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with a specified order. Can be safely
                  combined with limit. If you call limit with an offset, it will override
                  override the offset if you&#39;ve called offset first.</p>
                  
                  <pre>DB[:items].offset(10) # SELECT * FROM items OFFSET 10</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-offset-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-offset-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 571</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">offset</span>(<span class="ruby-identifier">o</span>)&#x000A;  <span class="ruby-identifier">o</span> = <span class="ruby-identifier">o</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">LiteralString</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>)&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;Offsets must be greater than or equal to 0&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">o</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">o</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-or'>
                <a name='method-i-or'></a>
                <div class='synopsis'>
                  <span class='name'>or</span>
                  <span class='arguments'>(*cond, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds an alternate filter to an existing filter using OR. If no filter 
                  exists an <code>Error</code> is raised.</p>
                  
                  <pre>DB[:items].where(:a).or(:b) # SELECT * FROM items WHERE a OR b</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-or-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-or-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 583</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">or</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">cond</span> = <span class="ruby-identifier">cond</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cond</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>&#x000A;  <span class="ruby-identifier">v</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:where</span>]&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">cond</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:empty?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cond</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block</span>)&#x000A;    <span class="ruby-identifier">clone</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">clone</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:OR</span>, <span class="ruby-identifier">v</span>, <span class="ruby-identifier">filter_expr</span>(<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)))&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-order'>
                <a name='method-i-order'></a>
                <div class='synopsis'>
                  <span class='name'>order</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the order changed. If the dataset has an
                  existing order, it is ignored and overwritten with this order. If a nil is
                  given the returned dataset has no order. This can accept multiple arguments
                  of varying kinds, such as <a href="SQL.html">SQL</a> functions.  If a block
                  is given, it is treated as a virtual row block, similar to
                  <code>where</code>.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">name</span>) <span class="ruby-comment"># SELECT * FROM items ORDER BY name</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>) <span class="ruby-comment"># SELECT * FROM items ORDER BY a, b</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>(<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">lit</span>(<span class="ruby-string">&#39;a + b&#39;</span>)) <span class="ruby-comment"># SELECT * FROM items ORDER BY a + b</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> :<span class="ruby-identifier">b</span>) <span class="ruby-comment"># SELECT * FROM items ORDER BY (a + b)</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>(<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">desc</span>(:<span class="ruby-identifier">name</span>)) <span class="ruby-comment"># SELECT * FROM items ORDER BY name DESC</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>(<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">asc</span>(:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">nulls=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">last</span>)) <span class="ruby-comment"># SELECT * FROM items ORDER BY name ASC NULLS LAST</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>{<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">desc</span>} <span class="ruby-comment"># SELECT * FROM items ORDER BY sum(name) DESC</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">order</span>(<span class="ruby-keyword">nil</span>) <span class="ruby-comment"># SELECT * FROM items</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-order-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-order-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 607</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">order</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">virtual_row_columns</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">empty?</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">columns</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-order_append'>
                <a name='method-i-order_append'></a>
                <div class='synopsis'>
                  <span class='name'>order_append</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias of <a href="Dataset.html#method-i-order_more">#order_more</a>, for
                  naming consistency with order_prepend.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-order_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-order_append-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 613</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">order_append</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">order_more</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-order_by'>
                <a name='method-i-order_by'></a>
                <div class='synopsis'>
                  <span class='name'>order_by</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias of order</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-order_by-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-order_by-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 618</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">order_by</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">order</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-order_more'>
                <a name='method-i-order_more'></a>
                <div class='synopsis'>
                  <span class='name'>order_more</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the order columns added to the end of
                  the existing order.</p>
                  
                  <pre>DB[:items].order(:a).order(:b) # SELECT * FROM items ORDER BY b&#x000A;DB[:items].order(:a).order_more(:b) # SELECT * FROM items ORDER BY a, b</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-order_more-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-order_more-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 627</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">order_more</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">columns</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:order</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">columns</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:order</span>]&#x000A;  <span class="ruby-identifier">order</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-order_prepend'>
                <a name='method-i-order_prepend'></a>
                <div class='synopsis'>
                  <span class='name'>order_prepend</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the order columns added to the beginning
                  of the existing order.</p>
                  
                  <pre>DB[:items].order(:a).order(:b) # SELECT * FROM items ORDER BY b&#x000A;DB[:items].order(:a).order_prepend(:b) # SELECT * FROM items ORDER BY b, a</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-order_prepend-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-order_prepend-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 637</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">order_prepend</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">order</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:order</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">order_more</span>(*<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:order</span>]) <span class="ruby-operator">:</span> <span class="ruby-identifier">ds</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-qualify'>
                <a name='method-i-qualify'></a>
                <div class='synopsis'>
                  <span class='name'>qualify</span>
                  <span class='arguments'>(table=first_source)</span>
                </div>
                <div class='description'>
                  
                  <p>Qualify to the given table, or first source if no table is given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>).<span class="ruby-identifier">qualify</span>&#x000A;<span class="ruby-comment"># SELECT items.* FROM items WHERE (items.id = 1)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>).<span class="ruby-identifier">qualify</span>(:<span class="ruby-identifier">i</span>)&#x000A;<span class="ruby-comment"># SELECT i.* FROM items WHERE (i.id = 1)</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-qualify-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-qualify-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 649</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">qualify</span>(<span class="ruby-identifier">table</span>=<span class="ruby-identifier">first_source</span>)&#x000A;  <span class="ruby-identifier">o</span> = <span class="ruby-ivar">@opts</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">clone</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">o</span>[<span class="ruby-value">:sql</span>]&#x000A;  <span class="ruby-identifier">h</span> = {}&#x000A;  (<span class="ruby-identifier">o</span>.<span class="ruby-identifier">keys</span> &amp; <span class="ruby-constant">QUALIFY_KEYS</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">h</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">qualified_expression</span>(<span class="ruby-identifier">o</span>[<span class="ruby-identifier">k</span>], <span class="ruby-identifier">table</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">h</span>[<span class="ruby-value">:select</span>] = [<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">ColumnAll</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table</span>)] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">o</span>[<span class="ruby-value">:select</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">o</span>[<span class="ruby-value">:select</span>].<span class="ruby-identifier">empty?</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-identifier">h</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-returning'>
                <a name='method-i-returning'></a>
                <div class='synopsis'>
                  <span class='name'>returning</span>
                  <span class='arguments'>(*values)</span>
                </div>
                <div class='description'>
                  
                  <p>Modify the <a href="Dataset.html#RETURNING">RETURNING</a> clause, only
                  supported on a few databases.  If returning is used, instead of insert
                  returning the autogenerated primary key or update/delete returning the
                  number of modified rows, results are returned using
                  <code>fetch_rows</code>.</p>
                  
                  <pre>DB[:items].returning # RETURNING *&#x000A;DB[:items].returning(nil) # RETURNING NULL&#x000A;DB[:items].returning(:id, :name) # RETURNING id, name</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-returning-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-returning-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 668</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">returning</span>(*<span class="ruby-identifier">values</span>)&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:returning=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">values</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-reverse'>
                <a name='method-i-reverse'></a>
                <div class='synopsis'>
                  <span class='name'>reverse</span>
                  <span class='arguments'>(*order, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the order reversed. If no order is
                  given, the existing order is inverted.</p>
                  
                  <pre>DB[:items].reverse(:id) # SELECT * FROM items ORDER BY id DESC&#x000A;DB[:items].reverse{foo(bar)} # SELECT * FROM items ORDER BY foo(bar) DESC&#x000A;DB[:items].order(:id).reverse # SELECT * FROM items ORDER BY id DESC&#x000A;DB[:items].order(:id).reverse(Sequel.desc(:name)) # SELECT * FROM items ORDER BY name ASC</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-reverse-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-reverse-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 679</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">reverse</span>(*<span class="ruby-identifier">order</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">virtual_row_columns</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">order</span>(*<span class="ruby-identifier">invert_order</span>(<span class="ruby-identifier">order</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:order</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">order</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-reverse_order'>
                <a name='method-i-reverse_order'></a>
                <div class='synopsis'>
                  <span class='name'>reverse_order</span>
                  <span class='arguments'>(*order, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias of <code>reverse</code></p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-reverse_order-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-reverse_order-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 685</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">reverse_order</span>(*<span class="ruby-identifier">order</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">reverse</span>(*<span class="ruby-identifier">order</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select'>
                <a name='method-i-select'></a>
                <div class='synopsis'>
                  <span class='name'>select</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the columns selected changed to the
                  given columns. This also takes a virtual row block, similar to
                  <code>where</code>.</p>
                  
                  <pre>DB[:items].select(:a) # SELECT a FROM items&#x000A;DB[:items].select(:a, :b) # SELECT a, b FROM items&#x000A;DB[:items].select{[a, sum(b)]} # SELECT a, sum(b) FROM items</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 696</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">virtual_row_columns</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">columns</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_all'>
                <a name='method-i-select_all'></a>
                <div class='synopsis'>
                  <span class='name'>select_all</span>
                  <span class='arguments'>(*tables)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset selecting the wildcard if no arguments are
                  given.  If arguments are given, treat them as tables and select all columns
                  (using the wildcard) from each table.</p>
                  
                  <pre>DB[:items].select(:a).select_all # SELECT * FROM items&#x000A;DB[:items].select_all(:items) # SELECT items.* FROM items&#x000A;DB[:items].select_all(:items, :foo) # SELECT items.*, foo.* FROM items</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_all-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_all-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 708</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_all</span>(*<span class="ruby-identifier">tables</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">tables</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-identifier">clone</span>(<span class="ruby-value">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">select</span>(*<span class="ruby-identifier">tables</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>, <span class="ruby-identifier">a</span> = <span class="ruby-identifier">split_alias</span>(<span class="ruby-identifier">t</span>); <span class="ruby-identifier">a</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">i</span>}.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">ColumnAll</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">t</span>)})&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_append'>
                <a name='method-i-select_append'></a>
                <div class='synopsis'>
                  <span class='name'>select_append</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the given columns added to the existing
                  selected columns.  If no columns are currently selected, it will select the
                  columns given in addition to *.</p>
                  
                  <pre>DB[:items].select(:a).select(:b) # SELECT b FROM items&#x000A;DB[:items].select(:a).select_append(:b) # SELECT a, b FROM items&#x000A;DB[:items].select_append(:b) # SELECT *, b FROM items</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_append-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 723</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_append</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">cur_sel</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:select</span>]&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cur_sel</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cur_sel</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_select_all_and_column?</span>&#x000A;      <span class="ruby-keyword">return</span> <span class="ruby-identifier">select_all</span>(*(<span class="ruby-constant">Array</span>(<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:from</span>]) <span class="ruby-operator">+</span> <span class="ruby-constant">Array</span>(<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:join</span>]))).<span class="ruby-identifier">select_more</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-identifier">cur_sel</span> = [<span class="ruby-constant">WILDCARD</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">select</span>(*(<span class="ruby-identifier">cur_sel</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">columns</span>), &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_group'>
                <a name='method-i-select_group'></a>
                <div class='synopsis'>
                  <span class='name'>select_group</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Set both the select and group clauses with the given <code>columns</code>.
                  Column aliases may be supplied, and will be included in the select clause.
                  This also takes a virtual row block similar to <code>where</code>.</p>
                  
                  <pre>DB[:items].select_group(:a, :b)&#x000A;# SELECT a, b FROM items GROUP BY a, b&#x000A;DB[:items].select_group(:c___a){f(c2)}&#x000A;# SELECT c AS a, f(c2) FROM items GROUP BY c, f(c2)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_group-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_group-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 743</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_group</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">virtual_row_columns</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">select</span>(*<span class="ruby-identifier">columns</span>).<span class="ruby-identifier">group</span>(*<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">unaliased_identifier</span>(<span class="ruby-identifier">c</span>)})&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_more'>
                <a name='method-i-select_more'></a>
                <div class='synopsis'>
                  <span class='name'>select_more</span>
                  <span class='arguments'>(*columns, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias for select_append.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_more-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_more-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 749</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_more</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">select_append</span>(*<span class="ruby-identifier">columns</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-server'>
                <a name='method-i-server'></a>
                <div class='synopsis'>
                  <span class='name'>server</span>
                  <span class='arguments'>(servr)</span>
                </div>
                <div class='description'>
                  
                  <p>Set the server for this dataset to use.  Used to pick a specific database
                  shard to run a query against, or to override the default (where <a
                  href="Dataset.html#SELECT">SELECT</a> uses :read_only database and all
                  other queries use the :default database).  This method is always available
                  but is only useful when database sharding is being used.</p>
                  
                  <pre>DB[:items].all # Uses the :read_only or :default server &#x000A;DB[:items].delete # Uses the :default server&#x000A;DB[:items].server(:blah).delete # Uses the :blah server</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-server-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-server-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 762</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">server</span>(<span class="ruby-identifier">servr</span>)&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:server=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">servr</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unbind'>
                <a name='method-i-unbind'></a>
                <div class='synopsis'>
                  <span class='name'>unbind</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Unbind bound variables from this dataset&#39;s filter and return an array
                  of two objects.  The first object is a modified dataset where the filter
                  has been replaced with one that uses bound variable placeholders.  The
                  second object is the hash of unbound variables.  You can then prepare and
                  execute (or just call) the dataset with the bound variables to get results.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">ds</span>, <span class="ruby-identifier">bv</span> = <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">a=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>).<span class="ruby-identifier">unbind</span>&#x000A;<span class="ruby-identifier">ds</span> <span class="ruby-comment"># SELECT * FROM items WHERE (a = $a)</span>&#x000A;<span class="ruby-identifier">bv</span> <span class="ruby-comment">#  {:a =&gt; 1}</span>&#x000A;<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">call</span>(:<span class="ruby-identifier">select</span>, <span class="ruby-identifier">bv</span>)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unbind-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unbind-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 776</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unbind</span>&#x000A;  <span class="ruby-identifier">u</span> = <span class="ruby-constant">Unbinder</span>.<span class="ruby-identifier">new</span>&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">clone</span>(<span class="ruby-value">:where=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">u</span>.<span class="ruby-identifier">transform</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:where</span>]), <span class="ruby-value">:join=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">u</span>.<span class="ruby-identifier">transform</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:join</span>]))&#x000A;  [<span class="ruby-identifier">ds</span>, <span class="ruby-identifier">u</span>.<span class="ruby-identifier">binds</span>]&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unfiltered'>
                <a name='method-i-unfiltered'></a>
                <div class='synopsis'>
                  <span class='name'>unfiltered</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with no filters (<a
                  href="Dataset.html#HAVING">HAVING</a> or <a
                  href="Dataset.html#WHERE">WHERE</a> clause) applied.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">group</span>(:<span class="ruby-identifier">a</span>).<span class="ruby-identifier">having</span>(:<span class="ruby-identifier">a=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>).<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">b</span>).<span class="ruby-identifier">unfiltered</span>&#x000A;<span class="ruby-comment"># SELECT * FROM items GROUP BY a</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unfiltered-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unfiltered-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 786</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unfiltered</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">:having</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-ungrouped'>
                <a name='method-i-ungrouped'></a>
                <div class='synopsis'>
                  <span class='name'>ungrouped</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with no grouping (GROUP or <a
                  href="Dataset.html#HAVING">HAVING</a> clause) applied.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">group</span>(:<span class="ruby-identifier">a</span>).<span class="ruby-identifier">having</span>(:<span class="ruby-identifier">a=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>).<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">b</span>).<span class="ruby-identifier">ungrouped</span>&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE b</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-ungrouped-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-ungrouped-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 794</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">ungrouped</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">:having</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-union'>
                <a name='method-i-union'></a>
                <div class='synopsis'>
                  <span class='name'>union</span>
                  <span class='arguments'>(dataset, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds a UNION clause using a second dataset object. A UNION compound dataset
                  returns all rows in either the current dataset or the given dataset.
                  Options:</p>
                  <dl class="rdoc-list note-list"><dt>:alias 
                  <dd>
                  <p>Use the given value as the <a
                  href="Dataset.html#method-i-from_self">#from_self</a> alias</p>
                  </dd><dt>:all 
                  <dd>
                  <p>Set to true to use UNION <a href="Dataset.html#ALL">ALL</a> instead of
                  UNION, so duplicate rows can occur</p>
                  </dd><dt>:<a href="Dataset.html#method-i-from_self">#from_self</a> 
                  <dd>
                  <p>Set to false to not wrap the returned dataset in a <a
                  href="Dataset.html#method-i-from_self">#from_self</a>, use with care.</p>
                  </dd></dl>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">union</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>])&#x000A;<span class="ruby-comment"># SELECT * FROM (SELECT * FROM items UNION SELECT * FROM other_items) AS t1</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">union</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>], :<span class="ruby-identifier">all=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>, :<span class="ruby-identifier">from_self=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">false</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items UNION ALL SELECT * FROM other_items</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">union</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">other_items</span>], :<span class="ruby-keyword">alias</span>=<span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">i</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM (SELECT * FROM items UNION SELECT * FROM other_items) AS i</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-union-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-union-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 814</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">union</span>(<span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">compound_clone</span>(<span class="ruby-value">:union</span>, <span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unlimited'>
                <a name='method-i-unlimited'></a>
                <div class='synopsis'>
                  <span class='name'>unlimited</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with no limit or offset.</p>
                  
                  <pre>DB[:items].limit(10, 20).unlimited # SELECT * FROM items</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unlimited-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unlimited-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 821</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unlimited</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:limit=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>, <span class="ruby-value">:offset=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unordered'>
                <a name='method-i-unordered'></a>
                <div class='synopsis'>
                  <span class='name'>unordered</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with no order.</p>
                  
                  <pre>DB[:items].order(:a).unordered # SELECT * FROM items</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unordered-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unordered-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 828</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unordered</span>&#x000A;  <span class="ruby-identifier">order</span>(<span class="ruby-keyword">nil</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-where'>
                <a name='method-i-where'></a>
                <div class='synopsis'>
                  <span class='name'>where</span>
                  <span class='arguments'>(*cond, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the given <a
                  href="Dataset.html#WHERE">WHERE</a> conditions imposed upon it.</p>
                  
                  <p>Accepts the following argument types:</p>
                  <ul><li>
                  <p><a href="../Hash.html">Hash</a> - list of equality/inclusion expressions</p>
                  </li><li>
                  <p><a href="../Array.html">Array</a> - depends:</p>
                  <ul><li>
                  <p>If first member is a string, assumes the rest of the arguments are
                  parameters and interpolates them into the string.</p>
                  </li><li>
                  <p>If all members are arrays of length two, treats the same way as a hash,
                  except it allows for duplicate keys to be specified.</p>
                  </li><li>
                  <p>Otherwise, treats each argument as a separate condition.</p>
                  </li></ul>
                  </li><li>
                  <p><a href="../String.html">String</a> - taken literally</p>
                  </li><li>
                  <p><a href="../Symbol.html">Symbol</a> - taken as a boolean column argument
                  (e.g. <a href="Dataset.html#WHERE">WHERE</a> active)</p>
                  </li><li>
                  <p><a href="SQL/BooleanExpression.html">Sequel::SQL::BooleanExpression</a> -
                  an existing condition expression, probably created using the <a
                  href="../Sequel.html">Sequel</a> expression filter DSL.</p>
                  </li></ul>
                  
                  <p>where also accepts a block, which should return one of the above argument
                  types, and is treated the same way.  This block yields a virtual row
                  object, which is easy to use to create identifiers and functions.  For more
                  details on the virtual row support, see the <a
                  href="../../files/doc/virtual_rows_rdoc.html">"Virtual Rows" guide</a></p>
                  
                  <p>If both a block and regular argument are provided, they get ANDed together.</p>
                  
                  <p>Examples:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE (id = 3)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;price &lt; ?&#39;</span>, <span class="ruby-value">100</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE price &lt; 100</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>([[:<span class="ruby-identifier">id</span>, [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>]], [:<span class="ruby-identifier">id</span>, <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">10</span>]])&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE ((id IN (1, 2, 3)) AND ((id &gt;= 0) AND (id &lt;= 10)))</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;price &lt; 100&#39;</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE price &lt; 100</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">active</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE :active</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">where</span>{<span class="ruby-identifier">price</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">100</span>}&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE (price &lt; 100)</span></pre>
                  
                  <p>Multiple where calls can be chained for scoping:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">software</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;software&#39;</span>).<span class="ruby-identifier">where</span>{<span class="ruby-identifier">price</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">100</span>}&#x000A;<span class="ruby-comment"># SELECT * FROM items WHERE ((category = &#39;software&#39;) AND (price &lt; 100))</span></pre>
                  
                  <p>See the <a href="../../files/doc/dataset_filtering_rdoc.html">"Dataset
                  Filtering" guide</a> for more examples and details.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-where-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-where-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 882</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">where</span>(*<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">_filter</span>(<span class="ruby-value">:where</span>, *<span class="ruby-identifier">cond</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-with'>
                <a name='method-i-with'></a>
                <div class='synopsis'>
                  <span class='name'>with</span>
                  <span class='arguments'>(name, dataset, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a common table expression (CTE) with the given name and a dataset that
                  defines the CTE. A common table expression acts as an inline view for the
                  query. Options:</p>
                  <dl class="rdoc-list note-list"><dt>:args 
                  <dd>
                  <p>Specify the arguments/columns for the CTE, should be an array of symbols.</p>
                  </dd><dt>:recursive 
                  <dd>
                  <p>Specify that this is a recursive CTE</p>
                  </dd></dl>
                  
                  <pre>DB[:items].with(:items, DB[:syx].where(:name.like(&#39;A%&#39;)))&#x000A;# WITH items AS (SELECT * FROM syx WHERE (name LIKE &#39;A%&#39;)) SELECT * FROM items</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-with-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-with-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 894</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">with</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;This datatset does not support common table expressions&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_cte?</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">hoist_cte?</span>(<span class="ruby-identifier">dataset</span>)&#x000A;    <span class="ruby-identifier">s</span>, <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">hoist_cte</span>(<span class="ruby-identifier">dataset</span>)&#x000A;    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">with</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ds</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">clone</span>(<span class="ruby-value">:with=</span><span class="ruby-operator">&gt;</span>(<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:with</span>]<span class="ruby-operator">||</span>[]) <span class="ruby-operator">+</span> [<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:name=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">name</span>, <span class="ruby-value">:dataset=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">dataset</span>)])&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-with_recursive'>
                <a name='method-i-with_recursive'></a>
                <div class='synopsis'>
                  <span class='name'>with_recursive</span>
                  <span class='arguments'>(name, nonrecursive, recursive, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a recursive common table expression (CTE) with the given name, a
                  dataset that defines the nonrecursive part of the CTE, and a dataset that
                  defines the recursive part of the CTE.  Options:</p>
                  <dl class="rdoc-list note-list"><dt>:args 
                  <dd>
                  <p>Specify the arguments/columns for the CTE, should be an array of symbols.</p>
                  </dd><dt>:union_all 
                  <dd>
                  <p>Set to false to use UNION instead of UNION <a
                  href="Dataset.html#ALL">ALL</a> combining the nonrecursive and recursive
                  parts.</p>
                  </dd></dl>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">t</span>].<span class="ruby-identifier">with_recursive</span>(:<span class="ruby-identifier">t</span>,&#x000A;  <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">i1</span>].<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">parent_id</span>).<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">parent_id=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>),&#x000A;  <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">i1</span>].<span class="ruby-identifier">join</span>(:<span class="ruby-identifier">t</span>, :<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">parent_id</span>).<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">i1__id</span>, :<span class="ruby-identifier">i1__parent_id</span>),&#x000A;  :<span class="ruby-identifier">args=</span><span class="ruby-operator">&gt;</span>[:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">parent_id</span>])&#x000A;&#x000A;<span class="ruby-comment"># WITH RECURSIVE &quot;t&quot;(&quot;id&quot;, &quot;parent_id&quot;) AS (</span>&#x000A;<span class="ruby-comment">#   SELECT &quot;id&quot;, &quot;parent_id&quot; FROM &quot;i1&quot; WHERE (&quot;parent_id&quot; IS NULL)</span>&#x000A;<span class="ruby-comment">#   UNION ALL</span>&#x000A;<span class="ruby-comment">#   SELECT &quot;i1&quot;.&quot;id&quot;, &quot;i1&quot;.&quot;parent_id&quot; FROM &quot;i1&quot; INNER JOIN &quot;t&quot; ON (&quot;t&quot;.&quot;id&quot; = &quot;i1&quot;.&quot;parent_id&quot;)</span>&#x000A;<span class="ruby-comment"># ) SELECT * FROM &quot;t&quot;</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-with_recursive-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-with_recursive-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 920</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">with_recursive</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">nonrecursive</span>, <span class="ruby-identifier">recursive</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;This datatset does not support common table expressions&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_cte?</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">hoist_cte?</span>(<span class="ruby-identifier">nonrecursive</span>)&#x000A;    <span class="ruby-identifier">s</span>, <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">hoist_cte</span>(<span class="ruby-identifier">nonrecursive</span>)&#x000A;    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">with_recursive</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ds</span>, <span class="ruby-identifier">recursive</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">hoist_cte?</span>(<span class="ruby-identifier">recursive</span>)&#x000A;    <span class="ruby-identifier">s</span>, <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">hoist_cte</span>(<span class="ruby-identifier">recursive</span>)&#x000A;    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">with_recursive</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">nonrecursive</span>, <span class="ruby-identifier">ds</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">clone</span>(<span class="ruby-value">:with=</span><span class="ruby-operator">&gt;</span>(<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:with</span>]<span class="ruby-operator">||</span>[]) <span class="ruby-operator">+</span> [<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:recursive=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>, <span class="ruby-value">:name=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">name</span>, <span class="ruby-value">:dataset=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">nonrecursive</span>.<span class="ruby-identifier">union</span>(<span class="ruby-identifier">recursive</span>, {<span class="ruby-value">:all=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">opts</span>[<span class="ruby-value">:union_all</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">:from_self=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">false</span>}))])&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-with_sql'>
                <a name='method-i-with_sql'></a>
                <div class='synopsis'>
                  <span class='name'>with_sql</span>
                  <span class='arguments'>(sql, *args)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a copy of the dataset with the static <a href="SQL.html">SQL</a>
                  used.  This is useful if you want to keep the same row_proc/graph, but
                  change the <a href="SQL.html">SQL</a> used to custom <a
                  href="SQL.html">SQL</a>.</p>
                  
                  <pre>DB[:items].with_sql(&#39;SELECT * FROM foo&#39;) # SELECT * FROM foo</pre>
                  
                  <p>You can use placeholders in your <a href="SQL.html">SQL</a> and provide
                  arguments for those placeholders:</p>
                  
                  <pre>DB[:items].with_sql(&#39;SELECT ? FROM foo&#39;, 1) # SELECT 1 FROM foo</pre>
                  
                  <p>You can also provide a method name and arguments to call to get the SQL:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">with_sql</span>(:<span class="ruby-identifier">insert_sql</span>, :<span class="ruby-identifier">b=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>) <span class="ruby-comment"># INSERT INTO items (b) VALUES (1)</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-with_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-with_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 945</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">with_sql</span>(<span class="ruby-identifier">sql</span>, *<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">sql</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)&#x000A;    <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">send</span>(<span class="ruby-identifier">sql</span>, *<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">sql</span> = <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">PlaceholderLiteralString</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:sql=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">sql</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Protected Instance methods</h2>
              <div class='method protected-instance' id='method-method-i-compound_clone'>
                <a name='method-i-compound_clone'></a>
                <div class='synopsis'>
                  <span class='name'>compound_clone</span>
                  <span class='arguments'>(type, dataset, opts)</span>
                </div>
                <div class='description'>
                  
                  <p>Add the dataset to the list of compounds</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-compound_clone-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-compound_clone-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 957</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">compound_clone</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">hoist_cte?</span>(<span class="ruby-identifier">dataset</span>)&#x000A;    <span class="ruby-identifier">s</span>, <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">hoist_cte</span>(<span class="ruby-identifier">dataset</span>)&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">compound_clone</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">ds</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">compound_from_self</span>.<span class="ruby-identifier">clone</span>(<span class="ruby-value">:compounds=</span><span class="ruby-operator">&gt;</span><span class="ruby-constant">Array</span>(<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:compounds</span>]).<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">dup</span>} <span class="ruby-operator">+</span> [[<span class="ruby-identifier">type</span>, <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">compound_from_self</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-value">:all</span>]]])&#x000A;  <span class="ruby-identifier">opts</span>[<span class="ruby-value">:from_self</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">ds</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">from_self</span>(<span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-method-i-options_overlap'>
                <a name='method-i-options_overlap'></a>
                <div class='synopsis'>
                  <span class='name'>options_overlap</span>
                  <span class='arguments'>(opts)</span>
                </div>
                <div class='description'>
                  
                  <p>Return true if the dataset has a non-nil value for any key in opts.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-options_overlap-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-options_overlap-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 967</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">options_overlap</span>(<span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-operator">!</span>(<span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>}.<span class="ruby-identifier">compact</span> &amp; <span class="ruby-identifier">opts</span>).<span class="ruby-identifier">empty?</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-method-i-simple_select_all-3F'>
                <a name='method-i-simple_select_all-3F'></a>
                <div class='synopsis'>
                  <span class='name'>simple_select_all?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether this dataset is a simple select from an underlying table, such as:</p>
                  
                  <pre>SELECT * FROM table&#x000A;SELECT table.* FROM table</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-simple_select_all-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-simple_select_all-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/query.rb, line 975</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">simple_select_all?</span>&#x000A;  <span class="ruby-identifier">o</span> = <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">reject</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">NON_SQL_OPTIONS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">k</span>)}&#x000A;  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">f</span> = <span class="ruby-identifier">o</span>[<span class="ruby-value">:from</span>]) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">f</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>))&#x000A;    <span class="ruby-keyword">case</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">length</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>&#x000A;      <span class="ruby-keyword">true</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>&#x000A;      (<span class="ruby-identifier">s</span> = <span class="ruby-identifier">o</span>[<span class="ruby-value">:select</span>]) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">ColumnAll</span>)&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-keyword">false</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-keyword">false</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='2+-+Methods+that+execute+code+on+the+database'>2 - Methods that execute code on the database</a>
              <div class='section-comment'>
                
                <p>These methods all execute the dataset&#39;s <a href="SQL.html">SQL</a> on
                the database. They don&#39;t return modified datasets, so if used in a
                method chain they should be the last method called.</p>
              </div>
            </h2>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ACTION_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>
                      (<<-METHS).split.map{|x| x.to_sym}
                      << [] all avg count columns columns! delete each
                      empty? fetch_rows first first! get import insert interval last
                      map max min multi_insert paged_each range select_hash select_hash_groups select_map select_order_map
                      single_record single_value sum to_hash to_hash_groups truncate update
                      METHS
                    </td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Action methods defined by <a href="../Sequel.html">Sequel</a> that execute
                      code on the database.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-3C-3C'>
                <a name='method-i-3C-3C'></a>
                <div class='synopsis'>
                  <span class='name'><<</span>
                  <span class='arguments'>(arg)</span>
                </div>
                <div class='description'>
                  
                  <p>Inserts the given argument into the database.  Returns self so it can be
                  used safely when chaining:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>] <span class="ruby-operator">&lt;&lt;</span> {:<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>, :<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;Zero&#39;</span>} <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">old_items</span>].<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">id</span>, <span class="ruby-identifier">name</span>)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-3C-3C-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-3C-3C-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 22</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">arg</span>)&#x000A;  <span class="ruby-identifier">insert</span>(<span class="ruby-identifier">arg</span>)&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-5B-5D'>
                <a name='method-i-5B-5D'></a>
                <div class='synopsis'>
                  <span class='name'>[]</span>
                  <span class='arguments'>(*conditions)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the first record matching the conditions. Examples:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>][:<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>] <span class="ruby-comment"># SELECT * FROM table WHERE (id = 1) LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=1}</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-5B-5D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-5B-5D-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 31</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(*<span class="ruby-identifier">conditions</span>)&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-constant">ARRAY_ACCESS_ERROR_MSG</span>) <span class="ruby-keyword">if</span> (<span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>)) <span class="ruby-keyword">or</span> <span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>&#x000A;  <span class="ruby-identifier">first</span>(*<span class="ruby-identifier">conditions</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-all'>
                <a name='method-i-all'></a>
                <div class='synopsis'>
                  <span class='name'>all</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns an array with all records in the dataset. If a block is given, the
                  array is iterated over after all items have been loaded.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">all</span> <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; [{:id=&gt;1, ...}, {:id=&gt;2, ...}, ...]</span>&#x000A;&#x000A;<span class="ruby-comment"># Iterate over all rows in the table</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">all</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>}</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-all-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-all-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 44</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">all</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">a</span> = []&#x000A;  <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>}&#x000A;  <span class="ruby-identifier">post_load</span>(<span class="ruby-identifier">a</span>)&#x000A;  <span class="ruby-identifier">a</span>.<span class="ruby-identifier">each</span>(&amp;<span class="ruby-identifier">block</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-identifier">a</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-avg'>
                <a name='method-i-avg'></a>
                <div class='synopsis'>
                  <span class='name'>avg</span>
                  <span class='arguments'>(column=Sequel.virtual_row(&Proc.new))</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the average value for the given column/expression. Uses a virtual
                  row block if no argument is given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">avg</span>(:<span class="ruby-identifier">number</span>) <span class="ruby-comment"># SELECT avg(number) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 3</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">avg</span>{<span class="ruby-identifier">function</span>(<span class="ruby-identifier">column</span>)} <span class="ruby-comment"># SELECT avg(function(column)) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 1</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-avg-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-avg-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 59</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">avg</span>(<span class="ruby-identifier">column</span>=<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>(&amp;<span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>))&#x000A;  <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">get</span>{<span class="ruby-identifier">avg</span>(<span class="ruby-identifier">column</span>).<span class="ruby-identifier">as</span>(<span class="ruby-value">:avg</span>)}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-columns'>
                <a name='method-i-columns'></a>
                <div class='synopsis'>
                  <span class='name'>columns</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the columns in the result set in order as an array of symbols. If
                  the columns are currently cached, returns the cached value. Otherwise, a <a
                  href="Dataset.html#SELECT">SELECT</a> query is performed to retrieve a
                  single row in order to get the columns.</p>
                  
                  <p>If you are looking for all columns for a single table and maybe some
                  information about each column (e.g. database type), see
                  <code>Database#schema</code>.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">columns</span>&#x000A;<span class="ruby-comment"># =&gt; [:id, :name]</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-columns-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-columns-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 72</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">columns</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@columns</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@columns</span>&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">unfiltered</span>.<span class="ruby-identifier">unordered</span>.<span class="ruby-identifier">naked</span>.<span class="ruby-identifier">clone</span>(<span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-value">:offset=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">each</span>{<span class="ruby-keyword">break</span>}&#x000A;  <span class="ruby-ivar">@columns</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value">:@columns</span>)&#x000A;  <span class="ruby-ivar">@columns</span> <span class="ruby-operator">||</span> []&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-columns-21'>
                <a name='method-i-columns-21'></a>
                <div class='synopsis'>
                  <span class='name'>columns!</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Ignore any cached column information and perform a query to retrieve a row
                  in order to get the columns.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">columns!</span>&#x000A;<span class="ruby-comment"># =&gt; [:id, :name]</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-columns-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-columns-21-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 85</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">columns!</span>&#x000A;  <span class="ruby-ivar">@columns</span> = <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-identifier">columns</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-count'>
                <a name='method-i-count'></a>
                <div class='synopsis'>
                  <span class='name'>count</span>
                  <span class='arguments'>(arg=(no_arg=true), &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the number of records in the dataset. If an argument is provided,
                  it is used as the argument to count.  If a block is provided, it is treated
                  as a virtual row, and the result is used as the argument to count.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">count</span> <span class="ruby-comment"># SELECT count(*) AS count FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 3</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">count</span>(:<span class="ruby-identifier">column</span>) <span class="ruby-comment"># SELECT count(column) AS count FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 2</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">count</span>{<span class="ruby-identifier">foo</span>(<span class="ruby-identifier">column</span>)} <span class="ruby-comment"># SELECT count(foo(column)) AS count FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 1</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-count-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-count-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 101</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">count</span>(<span class="ruby-identifier">arg</span>=(<span class="ruby-identifier">no_arg</span>=<span class="ruby-keyword">true</span>), &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">no_arg</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;      <span class="ruby-identifier">arg</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;      <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">get</span>{<span class="ruby-identifier">count</span>(<span class="ruby-identifier">arg</span>).<span class="ruby-identifier">as</span>(<span class="ruby-identifier">count</span>)}&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">get</span>{<span class="ruby-identifier">count</span>(<span class="ruby-value">:*</span>){}.<span class="ruby-identifier">as</span>(<span class="ruby-identifier">count</span>)}.<span class="ruby-identifier">to_i</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">block</span>&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;cannot provide both argument and block to Dataset#count&#39;</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">get</span>{<span class="ruby-identifier">count</span>(<span class="ruby-identifier">arg</span>).<span class="ruby-identifier">as</span>(<span class="ruby-identifier">count</span>)}&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-delete'>
                <a name='method-i-delete'></a>
                <div class='synopsis'>
                  <span class='name'>delete</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Deletes the records in the dataset.  The returned value should be  number
                  of records deleted, but that is adapter dependent.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">delete</span> <span class="ruby-comment"># DELETE * FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; 3</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-delete-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-delete-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 121</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">delete_sql</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">uses_returning?</span>(<span class="ruby-value">:delete</span>)&#x000A;    <span class="ruby-identifier">returning_fetch_rows</span>(<span class="ruby-identifier">sql</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">execute_dui</span>(<span class="ruby-identifier">sql</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-each'>
                <a name='method-i-each'></a>
                <div class='synopsis'>
                  <span class='name'>each</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Iterates over the records in the dataset as they are yielded from the
                  database adapter, and returns self.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>} <span class="ruby-comment"># SELECT * FROM table</span></pre>
                  
                  <p>Note that this method is not safe to use on many adapters if you are
                  running additional queries inside the provided block.  If you are running
                  queries inside the block, you should use <code>all</code> instead of
                  <code>each</code> for the outer queries, or use a separate thread or shard
                  inside <code>each</code>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-each-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-each-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 139</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">each</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">row_proc</span> = <span class="ruby-ivar">@row_proc</span>&#x000A;    <span class="ruby-identifier">fetch_rows</span>(<span class="ruby-identifier">select_sql</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">row_proc</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">r</span>)}&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">fetch_rows</span>(<span class="ruby-identifier">select_sql</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">r</span>}&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-empty-3F'>
                <a name='method-i-empty-3F'></a>
                <div class='synopsis'>
                  <span class='name'>empty?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns true if no records exist in the dataset, false otherwise</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">empty?</span> <span class="ruby-comment"># SELECT 1 AS one FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; false</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-empty-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-empty-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 152</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>&#x000A;  <span class="ruby-identifier">get</span>(<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>, <span class="ruby-value">:one</span>)).<span class="ruby-identifier">nil?</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-first'>
                <a name='method-i-first'></a>
                <div class='synopsis'>
                  <span class='name'>first</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>If a integer argument is given, it is interpreted as a limit, and then
                  returns all  matching records up to that limit.  If no argument is passed,
                  it returns the first matching record.  If any other type of argument(s) is
                  passed, it is given to filter and the first matching record is returned. 
                  If a block is given, it is used to filter the dataset before returning
                  anything.</p>
                  
                  <p>If there are no records in the dataset, returns nil (or an empty array if
                  an integer argument is given).</p>
                  
                  <p>Examples:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first</span> <span class="ruby-comment"># SELECT * FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;7}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first</span>(<span class="ruby-value">2</span>) <span class="ruby-comment"># SELECT * FROM table LIMIT 2</span>&#x000A;<span class="ruby-comment"># =&gt; [{:id=&gt;6}, {:id=&gt;4}]</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first</span>(:<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">2</span>) <span class="ruby-comment"># SELECT * FROM table WHERE (id = 2) LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;2}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first</span>(<span class="ruby-string">&quot;id = 3&quot;</span>) <span class="ruby-comment"># SELECT * FROM table WHERE (id = 3) LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;3}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first</span>(<span class="ruby-string">&quot;id = ?&quot;</span>, <span class="ruby-value">4</span>) <span class="ruby-comment"># SELECT * FROM table WHERE (id = 4) LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;4}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first</span>{<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>} <span class="ruby-comment"># SELECT * FROM table WHERE (id &gt; 2) LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;5}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first</span>(<span class="ruby-string">&quot;id &gt; ?&quot;</span>, <span class="ruby-value">4</span>){<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">6</span>} <span class="ruby-comment"># SELECT * FROM table WHERE ((id &gt; 4) AND (id &lt; 6)) LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;5}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first</span>(<span class="ruby-value">2</span>){<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>} <span class="ruby-comment"># SELECT * FROM table WHERE (id &lt; 2) LIMIT 2</span>&#x000A;<span class="ruby-comment"># =&gt; [{:id=&gt;1}]</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-first-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-first-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 191</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">first</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">filter</span>(&amp;<span class="ruby-identifier">block</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>&#x000A;&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">single_record</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">args</span> = (<span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">args</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>)&#x000A;      <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-identifier">args</span>).<span class="ruby-identifier">all</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">filter</span>(<span class="ruby-identifier">args</span>).<span class="ruby-identifier">single_record</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-first-21'>
                <a name='method-i-first-21'></a>
                <div class='synopsis'>
                  <span class='name'>first!</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Calls first.  If first returns nil (signaling that no row matches), raise a
                  <a href="NoMatchingRow.html">Sequel::NoMatchingRow</a> exception.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-first-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-first-21-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 208</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">first!</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">first</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">NoMatchingRow</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-get'>
                <a name='method-i-get'></a>
                <div class='synopsis'>
                  <span class='name'>get</span>
                  <span class='arguments'>(column=(no_arg=true; nil), &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Return the column value for the first matching record in the dataset.
                  Raises an error if both an argument and block is given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">get</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT id FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 3</span>&#x000A;&#x000A;<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">get</span>{<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">id</span>)} <span class="ruby-comment"># SELECT sum(id) AS v FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 6</span></pre>
                  
                  <p>You can pass an array of arguments to return multiple arguments, but you
                  must make sure each element in the array has an alias that <a
                  href="../Sequel.html">Sequel</a> can determine:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">get</span>([:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>]) <span class="ruby-comment"># SELECT id, name FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; [3, &#39;foo&#39;]</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">get</span>{[<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">id</span>).<span class="ruby-identifier">as</span>(<span class="ruby-identifier">sum</span>), <span class="ruby-identifier">name</span>]} <span class="ruby-comment"># SELECT sum(id) AS sum, name FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; [6, &#39;foo&#39;]</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-get-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-get-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 230</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">get</span>(<span class="ruby-identifier">column</span>=(<span class="ruby-identifier">no_arg</span>=<span class="ruby-keyword">true</span>; <span class="ruby-keyword">nil</span>), &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">naked</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-constant">ARG_BLOCK_ERROR_MSG</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">no_arg</span>&#x000A;    <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">select</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;    <span class="ruby-identifier">column</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:select</span>]&#x000A;    <span class="ruby-identifier">column</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">ds</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;      <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">select</span>(*<span class="ruby-identifier">column</span>)&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">select</span>(<span class="ruby-identifier">auto_alias_expression</span>(<span class="ruby-identifier">column</span>))&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;   <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">single_record</span>&#x000A;     <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">hash_key_symbols</span>(<span class="ruby-identifier">column</span>))&#x000A;   <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">single_value</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-import'>
                <a name='method-i-import'></a>
                <div class='synopsis'>
                  <span class='name'>import</span>
                  <span class='arguments'>(columns, values, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Inserts multiple records into the associated table. This method can be used
                  to efficiently insert a large number of records into a table in a single
                  query if the database supports it. Inserts are automatically wrapped in a
                  transaction.</p>
                  
                  <p>This method is called with a columns array and an array of value arrays:</p>
                  
                  <pre>DB[:table].import([:x, :y], [[1, 2], [3, 4]])&#x000A;# INSERT INTO table (x, y) VALUES (1, 2) &#x000A;# INSERT INTO table (x, y) VALUES (3, 4)</pre>
                  
                  <p>This method also accepts a dataset instead of an array of value arrays:</p>
                  
                  <pre>DB[:table].import([:x, :y], DB[:table2].select(:a, :b))&#x000A;# INSERT INTO table (x, y) SELECT a, b FROM table2</pre>
                  
                  <p>Options:</p>
                  <dl class="rdoc-list note-list"><dt>:commit_every 
                  <dd>
                  <p>Open a new transaction for every given number of records. For example, if
                  you provide a value of 50, will commit after every 50 records.</p>
                  </dd><dt>:return 
                  <dd>
                  <p>When the :value is :primary_key, returns an array of autoincremented
                  primary key values for the rows inserted.</p>
                  </dd><dt>:server 
                  <dd>
                  <p>Set the server/shard to use for the transaction and insert queries.</p>
                  </dd><dt>:slice 
                  <dd>
                  <p>Same as :commit_every, :commit_every takes precedence.</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-import-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-import-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 279</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">import</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@db</span>.<span class="ruby-identifier">transaction</span>{<span class="ruby-identifier">insert</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>)} <span class="ruby-keyword">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Dataset</span>)&#x000A;&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">empty?</span>&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-constant">IMPORT_ERROR_MSG</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">empty?</span>&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:server</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">server</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:server</span>]) <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>&#x000A;  &#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">slice_size</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:commit_every</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:slice</span>]&#x000A;    <span class="ruby-identifier">offset</span> = <span class="ruby-value">0</span>&#x000A;    <span class="ruby-identifier">rows</span> = []&#x000A;    <span class="ruby-keyword">while</span> <span class="ruby-identifier">offset</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">length</span>&#x000A;      <span class="ruby-identifier">rows</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">_import</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>[<span class="ruby-identifier">offset</span>, <span class="ruby-identifier">slice_size</span>], <span class="ruby-identifier">opts</span>)&#x000A;      <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">slice_size</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-identifier">rows</span>.<span class="ruby-identifier">flatten</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">_import</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-insert'>
                <a name='method-i-insert'></a>
                <div class='synopsis'>
                  <span class='name'>insert</span>
                  <span class='arguments'>(*values, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Inserts values into the associated table.  The returned value is generally
                  the value of the primary key for the inserted row, but that is adapter
                  dependent.</p>
                  
                  <p><code>insert</code> handles a number of different argument formats:</p>
                  <dl class="rdoc-list note-list"><dt>no arguments or single empty hash 
                  <dd>
                  <p>Uses <a href="Dataset.html#DEFAULT">DEFAULT</a> <a
                  href="Dataset.html#VALUES">VALUES</a></p>
                  </dd><dt>single hash 
                  <dd>
                  <p>Most common format, treats keys as columns an values as values</p>
                  </dd><dt>single array 
                  <dd>
                  <p>Treats entries as values, with no columns</p>
                  </dd><dt>two arrays 
                  <dd>
                  <p>Treats first array as columns, second array as values</p>
                  </dd><dt>single <a href="Dataset.html">Dataset</a> 
                  <dd>
                  <p>Treats as an insert based on a selection from the dataset given, with no
                  columns</p>
                  </dd><dt>array and dataset 
                  <dd>
                  <p>Treats as an insert based on a selection from the dataset given, with the
                  columns given by the array.</p>
                  </dd></dl>
                  
                  <p>Examples:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">insert</span>&#x000A;<span class="ruby-comment"># INSERT INTO items DEFAULT VALUES</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">insert</span>({})&#x000A;<span class="ruby-comment"># INSERT INTO items DEFAULT VALUES</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">insert</span>([<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>])&#x000A;<span class="ruby-comment"># INSERT INTO items VALUES (1, 2, 3)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">insert</span>([:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>], [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>])&#x000A;<span class="ruby-comment"># INSERT INTO items (a, b) VALUES (1, 2)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">insert</span>(:<span class="ruby-identifier">a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, :<span class="ruby-identifier">b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)&#x000A;<span class="ruby-comment"># INSERT INTO items (a, b) VALUES (1, 2)</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">insert</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">old_items</span>])&#x000A;<span class="ruby-comment"># INSERT INTO items SELECT * FROM old_items</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">insert</span>([:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>], <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">old_items</span>])&#x000A;<span class="ruby-comment"># INSERT INTO items (a, b) SELECT * FROM old_items</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-insert-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-insert-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 334</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">insert</span>(*<span class="ruby-identifier">values</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">insert_sql</span>(*<span class="ruby-identifier">values</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">uses_returning?</span>(<span class="ruby-value">:insert</span>)&#x000A;    <span class="ruby-identifier">returning_fetch_rows</span>(<span class="ruby-identifier">sql</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">execute_insert</span>(<span class="ruby-identifier">sql</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-interval'>
                <a name='method-i-interval'></a>
                <div class='synopsis'>
                  <span class='name'>interval</span>
                  <span class='arguments'>(column=Sequel.virtual_row(&Proc.new))</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the interval between minimum and maximum values for the given 
                  column/expression. Uses a virtual row block if no argument is given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">interval</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT (max(id) - min(id)) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 6</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">interval</span>{<span class="ruby-identifier">function</span>(<span class="ruby-identifier">column</span>)} <span class="ruby-comment"># SELECT (max(function(column)) - min(function(column))) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 7</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-interval-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-interval-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 350</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">interval</span>(<span class="ruby-identifier">column</span>=<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>(&amp;<span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>))&#x000A;  <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">get</span>{(<span class="ruby-identifier">max</span>(<span class="ruby-identifier">column</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">min</span>(<span class="ruby-identifier">column</span>)).<span class="ruby-identifier">as</span>(<span class="ruby-value">:interval</span>)}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-last'>
                <a name='method-i-last'></a>
                <div class='synopsis'>
                  <span class='name'>last</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Reverses the order and then runs <a
                  href="Dataset.html#method-i-first">first</a> with the given arguments and
                  block.  Note that this will not necessarily give you the last record in the
                  dataset, unless you have an unambiguous order.  If there is not currently
                  an order for this dataset, raises an <code>Error</code>.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">id</span>).<span class="ruby-identifier">last</span> <span class="ruby-comment"># SELECT * FROM table ORDER BY id DESC LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;10}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">order</span>(<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">desc</span>(:<span class="ruby-identifier">id</span>)).<span class="ruby-identifier">last</span>(<span class="ruby-value">2</span>) <span class="ruby-comment"># SELECT * FROM table ORDER BY id ASC LIMIT 2</span>&#x000A;<span class="ruby-comment"># =&gt; [{:id=&gt;1}, {:id=&gt;2}]</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-last-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-last-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 364</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">last</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;No order specified&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:order</span>]&#x000A;  <span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">first</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-map'>
                <a name='method-i-map'></a>
                <div class='synopsis'>
                  <span class='name'>map</span>
                  <span class='arguments'>(column=nil, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Maps column values for each record in the dataset (if a column name is
                  given), or performs the stock mapping functionality of
                  <code>Enumerable</code> otherwise.  Raises an <code>Error</code> if both an
                  argument and block are given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">map</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; [1, 2, 3, ...]</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>[:<span class="ruby-identifier">id</span>] * <span class="ruby-value">2</span>} <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; [2, 4, 6, ...]</span></pre>
                  
                  <p>You can also provide an array of column names:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">map</span>([:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>]) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; [[1, &#39;A&#39;], [2, &#39;B&#39;], [3, &#39;C&#39;], ...]</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-map-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-map-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 383</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">map</span>(<span class="ruby-identifier">column</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-constant">ARG_BLOCK_ERROR_MSG</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-identifier">naked</span>.<span class="ruby-identifier">map</span>(<span class="ruby-identifier">column</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">row_proc</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;      <span class="ruby-keyword">super</span>(){<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">column</span>)}&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-keyword">super</span>(){<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>[<span class="ruby-identifier">column</span>]}&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-keyword">super</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-max'>
                <a name='method-i-max'></a>
                <div class='synopsis'>
                  <span class='name'>max</span>
                  <span class='arguments'>(column=Sequel.virtual_row(&Proc.new))</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the maximum value for the given column/expression. Uses a virtual
                  row block if no argument is given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">max</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT max(id) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 10</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">max</span>{<span class="ruby-identifier">function</span>(<span class="ruby-identifier">column</span>)} <span class="ruby-comment"># SELECT max(function(column)) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 7</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-max-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-max-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 404</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">max</span>(<span class="ruby-identifier">column</span>=<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>(&amp;<span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>))&#x000A;  <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">get</span>{<span class="ruby-identifier">max</span>(<span class="ruby-identifier">column</span>).<span class="ruby-identifier">as</span>(<span class="ruby-value">:max</span>)}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-min'>
                <a name='method-i-min'></a>
                <div class='synopsis'>
                  <span class='name'>min</span>
                  <span class='arguments'>(column=Sequel.virtual_row(&Proc.new))</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the minimum value for the given column/expression. Uses a virtual
                  row block if no argument is given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">min</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT min(id) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 1</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">min</span>{<span class="ruby-identifier">function</span>(<span class="ruby-identifier">column</span>)} <span class="ruby-comment"># SELECT min(function(column)) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 0</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-min-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-min-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 415</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">min</span>(<span class="ruby-identifier">column</span>=<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>(&amp;<span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>))&#x000A;  <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">get</span>{<span class="ruby-identifier">min</span>(<span class="ruby-identifier">column</span>).<span class="ruby-identifier">as</span>(<span class="ruby-value">:min</span>)}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-multi_insert'>
                <a name='method-i-multi_insert'></a>
                <div class='synopsis'>
                  <span class='name'>multi_insert</span>
                  <span class='arguments'>(hashes, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>This is a front end for import that allows you to submit an array of hashes
                  instead of arrays of columns and values:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">multi_insert</span>([{:<span class="ruby-identifier">x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>}, {:<span class="ruby-identifier">x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>}])&#x000A;<span class="ruby-comment"># INSERT INTO table (x) VALUES (1)</span>&#x000A;<span class="ruby-comment"># INSERT INTO table (x) VALUES (2)</span></pre>
                  
                  <p>Be aware that all hashes should have the same keys if you use this calling
                  method, otherwise some columns could be missed or set to null instead of to
                  default values.</p>
                  
                  <p>This respects the same options as <a
                  href="Dataset.html#method-i-import">import</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-multi_insert-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-multi_insert-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 431</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">multi_insert</span>(<span class="ruby-identifier">hashes</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">hashes</span>.<span class="ruby-identifier">empty?</span>&#x000A;  <span class="ruby-identifier">columns</span> = <span class="ruby-identifier">hashes</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">keys</span>&#x000A;  <span class="ruby-identifier">import</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">hashes</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">h</span><span class="ruby-operator">|</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">c</span>]}}, <span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-paged_each'>
                <a name='method-i-paged_each'></a>
                <div class='synopsis'>
                  <span class='name'>paged_each</span>
                  <span class='arguments'>(opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Yields each row in the dataset, but interally uses multiple queries as
                  needed with limit and offset to process the entire result set without
                  keeping all rows in the dataset in memory, even if the underlying driver
                  buffers all query results in memory.</p>
                  
                  <p>Because this uses multiple queries internally, in order to remain
                  consistent, it also uses a transaction internally.  Additionally, to make
                  sure that all rows in the dataset are yielded and none are yielded twice,
                  the dataset must have an unambiguous order.  <a
                  href="../Sequel.html">Sequel</a> requires that datasets using this method
                  have an order, but it cannot ensure that the order is unambiguous.</p>
                  
                  <p>Options:</p>
                  <dl class="rdoc-list note-list"><dt>:rows_per_fetch 
                  <dd>
                  <p>The number of rows to fetch per query.  Defaults to 1000.</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-paged_each-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-paged_each-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 450</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">paged_each</span>(<span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:order</span>]&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Dataset#paged_each requires the dataset be ordered&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">total_limit</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:limit</span>]&#x000A;  <span class="ruby-identifier">offset</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:offset</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>&#x000A;&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">server</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:server</span>]&#x000A;    <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:server=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">server</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">rows_per_fetch</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rows_per_fetch</span>] <span class="ruby-operator">||</span> <span class="ruby-value">1000</span>&#x000A;  <span class="ruby-identifier">num_rows_yielded</span> = <span class="ruby-identifier">rows_per_fetch</span>&#x000A;  <span class="ruby-identifier">total_rows</span> = <span class="ruby-value">0</span>&#x000A;&#x000A;  <span class="ruby-identifier">db</span>.<span class="ruby-identifier">transaction</span>(<span class="ruby-identifier">opts</span>) <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-keyword">while</span> <span class="ruby-identifier">num_rows_yielded</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rows_per_fetch</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">total_limit</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">total_rows</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">total_limit</span>)&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">total_limit</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">total_rows</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rows_per_fetch</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">total_limit</span>&#x000A;        <span class="ruby-identifier">rows_per_fetch</span> = <span class="ruby-identifier">total_limit</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">total_rows</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;&#x000A;      <span class="ruby-identifier">num_rows_yielded</span> = <span class="ruby-value">0</span>&#x000A;      <span class="ruby-identifier">limit</span>(<span class="ruby-identifier">rows_per_fetch</span>, <span class="ruby-identifier">offset</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>&#x000A;        <span class="ruby-identifier">num_rows_yielded</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>&#x000A;        <span class="ruby-identifier">total_rows</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">total_limit</span>&#x000A;        <span class="ruby-keyword">yield</span> <span class="ruby-identifier">row</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;&#x000A;      <span class="ruby-identifier">offset</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rows_per_fetch</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-range'>
                <a name='method-i-range'></a>
                <div class='synopsis'>
                  <span class='name'>range</span>
                  <span class='arguments'>(column=Sequel.virtual_row(&Proc.new))</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a <code>Range</code> instance made from the minimum and maximum
                  values for the given column/expression.  Uses a virtual row block if no
                  argument is given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">range</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT max(id) AS v1, min(id) AS v2 FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 1..10</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">interval</span>{<span class="ruby-identifier">function</span>(<span class="ruby-identifier">column</span>)} <span class="ruby-comment"># SELECT max(function(column)) AS v1, min(function(column)) AS v2 FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 0..7</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-range-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-range-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 493</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">range</span>(<span class="ruby-identifier">column</span>=<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>(&amp;<span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>))&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span> = <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">select</span>{[<span class="ruby-identifier">min</span>(<span class="ruby-identifier">column</span>).<span class="ruby-identifier">as</span>(<span class="ruby-identifier">v1</span>), <span class="ruby-identifier">max</span>(<span class="ruby-identifier">column</span>).<span class="ruby-identifier">as</span>(<span class="ruby-identifier">v2</span>)]}.<span class="ruby-identifier">first</span>&#x000A;    (<span class="ruby-identifier">r</span>[<span class="ruby-value">:v1</span>]<span class="ruby-operator">..</span><span class="ruby-identifier">r</span>[<span class="ruby-value">:v2</span>])&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_hash'>
                <a name='method-i-select_hash'></a>
                <div class='synopsis'>
                  <span class='name'>select_hash</span>
                  <span class='arguments'>(key_column, value_column)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a hash with key_column values as keys and value_column values as
                  values.  Similar to <a href="Dataset.html#method-i-to_hash">#to_hash</a>,
                  but only selects the columns given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_hash</span>(:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>) <span class="ruby-comment"># SELECT id, name FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; {1=&gt;&#39;a&#39;, 2=&gt;&#39;b&#39;, ...}</span></pre>
                  
                  <p>You can also provide an array of column names for either the key_column,
                  the value column, or both:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_hash</span>([:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">foo</span>], [:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">bar</span>]) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {[1, 3]=&gt;[&#39;a&#39;, &#39;c&#39;], [2, 4]=&gt;[&#39;b&#39;, &#39;d&#39;], ...}</span></pre>
                  
                  <p>When using this method, you must be sure that each expression has an alias
                  that <a href="../Sequel.html">Sequel</a> can determine.  Usually you can do
                  this by calling the <a href="SQL/AliasMethods.html#method-i-as">as</a>
                  method on the expression and providing an alias.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_hash-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_hash-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 514</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_hash</span>(<span class="ruby-identifier">key_column</span>, <span class="ruby-identifier">value_column</span>)&#x000A;  <span class="ruby-identifier">_select_hash</span>(<span class="ruby-value">:to_hash</span>, <span class="ruby-identifier">key_column</span>, <span class="ruby-identifier">value_column</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_hash_groups'>
                <a name='method-i-select_hash_groups'></a>
                <div class='synopsis'>
                  <span class='name'>select_hash_groups</span>
                  <span class='arguments'>(key_column, value_column)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a hash with key_column values as keys and an array of value_column
                  values. Similar to <a
                  href="Dataset.html#method-i-to_hash_groups">#to_hash_groups</a>, but only
                  selects the columns given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_hash</span>(:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT id, name FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; {&#39;a&#39;=&gt;[1, 4, ...], &#39;b&#39;=&gt;[2, ...], ...}</span></pre>
                  
                  <p>You can also provide an array of column names for either the key_column,
                  the value column, or both:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_hash</span>([:<span class="ruby-identifier">first</span>, :<span class="ruby-identifier">middle</span>], [:<span class="ruby-identifier">last</span>, :<span class="ruby-identifier">id</span>]) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {[&#39;a&#39;, &#39;b&#39;]=&gt;[[&#39;c&#39;, 1], [&#39;d&#39;, 2], ...], ...}</span></pre>
                  
                  <p>When using this method, you must be sure that each expression has an alias
                  that <a href="../Sequel.html">Sequel</a> can determine.  Usually you can do
                  this by calling the <a href="SQL/AliasMethods.html#method-i-as">as</a>
                  method on the expression and providing an alias.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_hash_groups-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_hash_groups-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 533</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_hash_groups</span>(<span class="ruby-identifier">key_column</span>, <span class="ruby-identifier">value_column</span>)&#x000A;  <span class="ruby-identifier">_select_hash</span>(<span class="ruby-value">:to_hash_groups</span>, <span class="ruby-identifier">key_column</span>, <span class="ruby-identifier">value_column</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_map'>
                <a name='method-i-select_map'></a>
                <div class='synopsis'>
                  <span class='name'>select_map</span>
                  <span class='arguments'>(column=nil, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Selects the column given (either as an argument or as a block), and returns
                  an array of all values of that column in the dataset.  If you give a block
                  argument that returns an array with multiple entries, the contents of the
                  resulting array are undefined.  Raises an <a href="Error.html">Error</a> if
                  called with both an argument and a block.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_map</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT id FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; [3, 5, 8, 1, ...]</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_map</span>{<span class="ruby-identifier">id</span> * <span class="ruby-value">2</span>} <span class="ruby-comment"># SELECT (id * 2) FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; [6, 10, 16, 2, ...]</span></pre>
                  
                  <p>You can also provide an array of column names:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_map</span>([:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>]) <span class="ruby-comment"># SELECT id, name FROM table</span>&#x000A;<span class="ruby-comment"># =&gt; [[1, &#39;A&#39;], [2, &#39;B&#39;], [3, &#39;C&#39;], ...]</span></pre>
                  
                  <p>If you provide an array of expressions, you must be sure that each entry in
                  the array has an alias that <a href="../Sequel.html">Sequel</a> can
                  determine.  Usually you can do this by calling the <a
                  href="SQL/AliasMethods.html#method-i-as">as</a> method on the expression
                  and providing an alias.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_map-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_map-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 557</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_map</span>(<span class="ruby-identifier">column</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">_select_map</span>(<span class="ruby-identifier">column</span>, <span class="ruby-keyword">false</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_order_map'>
                <a name='method-i-select_order_map'></a>
                <div class='synopsis'>
                  <span class='name'>select_order_map</span>
                  <span class='arguments'>(column=nil, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>The same as <a href="Dataset.html#method-i-select_map">#select_map</a>, but
                  in addition orders the array by the column.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_order_map</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT id FROM table ORDER BY id</span>&#x000A;<span class="ruby-comment"># =&gt; [1, 2, 3, 4, ...]</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_order_map</span>{<span class="ruby-identifier">id</span> * <span class="ruby-value">2</span>} <span class="ruby-comment"># SELECT (id * 2) FROM table ORDER BY (id * 2)</span>&#x000A;<span class="ruby-comment"># =&gt; [2, 4, 6, 8, ...]</span></pre>
                  
                  <p>You can also provide an array of column names:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">select_order_map</span>([:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>]) <span class="ruby-comment"># SELECT id, name FROM table ORDER BY id, name</span>&#x000A;<span class="ruby-comment"># =&gt; [[1, &#39;A&#39;], [2, &#39;B&#39;], [3, &#39;C&#39;], ...]</span></pre>
                  
                  <p>If you provide an array of expressions, you must be sure that each entry in
                  the array has an alias that <a href="../Sequel.html">Sequel</a> can
                  determine.  Usually you can do this by calling the <a
                  href="SQL/AliasMethods.html#method-i-as">as</a> method on the expression
                  and providing an alias.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_order_map-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_order_map-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 577</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_order_map</span>(<span class="ruby-identifier">column</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">_select_map</span>(<span class="ruby-identifier">column</span>, <span class="ruby-keyword">true</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-single_record'>
                <a name='method-i-single_record'></a>
                <div class='synopsis'>
                  <span class='name'>single_record</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the first record in the dataset, or nil if the dataset has no
                  records. Users should probably use <code>first</code> instead of this
                  method.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-single_record-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-single_record-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 584</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">single_record</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:limit=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-keyword">return</span> <span class="ruby-identifier">r</span>}&#x000A;  <span class="ruby-keyword">nil</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-single_value'>
                <a name='method-i-single_value'></a>
                <div class='synopsis'>
                  <span class='name'>single_value</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the first value of the first record in the dataset. Returns nil if
                  dataset is empty.  Users should generally use <code>get</code> instead of
                  this method.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-single_value-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-single_value-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 592</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">single_value</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span> = <span class="ruby-identifier">ungraphed</span>.<span class="ruby-identifier">naked</span>.<span class="ruby-identifier">single_record</span>&#x000A;    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-sum'>
                <a name='method-i-sum'></a>
                <div class='synopsis'>
                  <span class='name'>sum</span>
                  <span class='arguments'>(column=Sequel.virtual_row(&Proc.new))</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the sum for the given column/expression. Uses a virtual row block
                  if no column is given.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">sum</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT sum(id) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 55</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">sum</span>{<span class="ruby-identifier">function</span>(<span class="ruby-identifier">column</span>)} <span class="ruby-comment"># SELECT sum(function(column)) FROM table LIMIT 1</span>&#x000A;<span class="ruby-comment"># =&gt; 10</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-sum-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-sum-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 605</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">sum</span>(<span class="ruby-identifier">column</span>=<span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">virtual_row</span>(&amp;<span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>))&#x000A;  <span class="ruby-identifier">aggregate_dataset</span>.<span class="ruby-identifier">get</span>{<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">column</span>).<span class="ruby-identifier">as</span>(<span class="ruby-value">:sum</span>)}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-to_hash'>
                <a name='method-i-to_hash'></a>
                <div class='synopsis'>
                  <span class='name'>to_hash</span>
                  <span class='arguments'>(key_column, value_column = nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a hash with one column used as key and another used as value. If
                  rows have duplicate values for the key column, the latter row(s) will
                  overwrite the value of the previous row(s). If the value_column is not
                  given or nil, uses the entire hash as the value.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">to_hash</span>(:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {1=&gt;&#39;Jim&#39;, 2=&gt;&#39;Bob&#39;, ...}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">to_hash</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {1=&gt;{:id=&gt;1, :name=&gt;&#39;Jim&#39;}, 2=&gt;{:id=&gt;2, :name=&gt;&#39;Bob&#39;}, ...}</span></pre>
                  
                  <p>You can also provide an array of column names for either the key_column,
                  the value column, or both:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">to_hash</span>([:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">foo</span>], [:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">bar</span>]) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {[1, 3]=&gt;[&#39;Jim&#39;, &#39;bo&#39;], [2, 4]=&gt;[&#39;Bob&#39;, &#39;be&#39;], ...}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">to_hash</span>([:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>]) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {[1, &#39;Jim&#39;]=&gt;{:id=&gt;1, :name=&gt;&#39;Jim&#39;}, [2, &#39;Bob&#39;=&gt;{:id=&gt;2, :name=&gt;&#39;Bob&#39;}, ...}</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-to_hash-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-to_hash-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 628</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">key_column</span>, <span class="ruby-identifier">value_column</span> = <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">h</span> = {}&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value_column</span>&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-identifier">naked</span>.<span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">key_column</span>, <span class="ruby-identifier">value_column</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">row_proc</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">value_column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">key_column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;        <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">key_column</span>)] = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">value_column</span>)}&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>[<span class="ruby-identifier">key_column</span>]] = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">value_column</span>)}&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">key_column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;        <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">key_column</span>)] = <span class="ruby-identifier">r</span>[<span class="ruby-identifier">value_column</span>]}&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>[<span class="ruby-identifier">key_column</span>]] = <span class="ruby-identifier">r</span>[<span class="ruby-identifier">value_column</span>]}&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">key_column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;    <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">key_column</span>)] = <span class="ruby-identifier">r</span>}&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>[<span class="ruby-identifier">key_column</span>]] = <span class="ruby-identifier">r</span>}&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">h</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-to_hash_groups'>
                <a name='method-i-to_hash_groups'></a>
                <div class='synopsis'>
                  <span class='name'>to_hash_groups</span>
                  <span class='arguments'>(key_column, value_column = nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a hash with one column used as key and the values being an array of
                  column values. If the value_column is not given or nil, uses the entire
                  hash as the value.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">to_hash</span>(:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {&#39;Jim&#39;=&gt;[1, 4, 16, ...], &#39;Bob&#39;=&gt;[2], ...}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">to_hash</span>(:<span class="ruby-identifier">name</span>) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {&#39;Jim&#39;=&gt;[{:id=&gt;1, :name=&gt;&#39;Jim&#39;}, {:id=&gt;4, :name=&gt;&#39;Jim&#39;}, ...], &#39;Bob&#39;=&gt;[{:id=&gt;2, :name=&gt;&#39;Bob&#39;}], ...}</span></pre>
                  
                  <p>You can also provide an array of column names for either the key_column,
                  the value column, or both:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">to_hash</span>([:<span class="ruby-identifier">first</span>, :<span class="ruby-identifier">middle</span>], [:<span class="ruby-identifier">last</span>, :<span class="ruby-identifier">id</span>]) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {[&#39;Jim&#39;, &#39;Bob&#39;]=&gt;[[&#39;Smith&#39;, 1], [&#39;Jackson&#39;, 4], ...], ...}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">to_hash</span>([:<span class="ruby-identifier">first</span>, :<span class="ruby-identifier">middle</span>]) <span class="ruby-comment"># SELECT * FROM table</span>&#x000A;<span class="ruby-comment"># {[&#39;Jim&#39;, &#39;Bob&#39;]=&gt;[{:id=&gt;1, :first=&gt;&#39;Jim&#39;, :middle=&gt;&#39;Bob&#39;, :last=&gt;&#39;Smith&#39;}, ...], ...}</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-to_hash_groups-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-to_hash_groups-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 671</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_hash_groups</span>(<span class="ruby-identifier">key_column</span>, <span class="ruby-identifier">value_column</span> = <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">h</span> = {}&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value_column</span>&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-identifier">naked</span>.<span class="ruby-identifier">to_hash_groups</span>(<span class="ruby-identifier">key_column</span>, <span class="ruby-identifier">value_column</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">row_proc</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">value_column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">key_column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;        <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">key_column</span>)] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">value_column</span>)}&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>[<span class="ruby-identifier">key_column</span>]] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">value_column</span>)}&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">key_column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;        <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">key_column</span>)] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>[<span class="ruby-identifier">value_column</span>]}&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>[<span class="ruby-identifier">key_column</span>]] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>[<span class="ruby-identifier">value_column</span>]}&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">key_column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;    <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">key_column</span>)] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>}&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">h</span>[<span class="ruby-identifier">r</span>[<span class="ruby-identifier">key_column</span>]] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>}&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">h</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-truncate'>
                <a name='method-i-truncate'></a>
                <div class='synopsis'>
                  <span class='name'>truncate</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Truncates the dataset.  Returns nil.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">truncate</span> <span class="ruby-comment"># TRUNCATE table</span>&#x000A;<span class="ruby-comment"># =&gt; nil</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-truncate-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-truncate-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 700</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">truncate</span>&#x000A;  <span class="ruby-identifier">execute_ddl</span>(<span class="ruby-identifier">truncate_sql</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-update'>
                <a name='method-i-update'></a>
                <div class='synopsis'>
                  <span class='name'>update</span>
                  <span class='arguments'>(values=OPTS, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Updates values for the dataset.  The returned value is generally the number
                  of rows updated, but that is adapter dependent. <code>values</code> should
                  a hash where the keys are columns to set and values are the values to which
                  to set the columns.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">update</span>(:<span class="ruby-identifier">x=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>) <span class="ruby-comment"># UPDATE table SET x = NULL</span>&#x000A;<span class="ruby-comment"># =&gt; 10</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">update</span>(:<span class="ruby-identifier">x=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">x</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, :<span class="ruby-identifier">y=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>) <span class="ruby-comment"># UPDATE table SET x = (x + 1), y = 0</span>&#x000A;<span class="ruby-comment"># =&gt; 10</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-update-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-update-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 714</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">values</span>=<span class="ruby-constant">OPTS</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">update_sql</span>(<span class="ruby-identifier">values</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">uses_returning?</span>(<span class="ruby-value">:update</span>)&#x000A;    <span class="ruby-identifier">returning_fetch_rows</span>(<span class="ruby-identifier">sql</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">execute_dui</span>(<span class="ruby-identifier">sql</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-with_sql_delete'>
                <a name='method-i-with_sql_delete'></a>
                <div class='synopsis'>
                  <span class='name'>with_sql_delete</span>
                  <span class='arguments'>(sql)</span>
                </div>
                <div class='description'>
                  
                  <p>Execute the given <a href="SQL.html">SQL</a> and return the number of rows
                  deleted.  This exists solely as an optimization, replacing <a
                  href="Dataset.html#method-i-with_sql">#with_sql</a>(sql).delete.  It&#39;s
                  significantly faster as it does not require cloning the current dataset.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-with_sql_delete-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-with_sql_delete-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 726</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">with_sql_delete</span>(<span class="ruby-identifier">sql</span>)&#x000A;  <span class="ruby-identifier">execute_dui</span>(<span class="ruby-identifier">sql</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Protected Instance methods</h2>
              <div class='method protected-instance' id='method-method-i-_import'>
                <a name='method-i-_import'></a>
                <div class='synopsis'>
                  <span class='name'>_import</span>
                  <span class='arguments'>(columns, values, opts)</span>
                </div>
                <div class='description'>
                  
                  <p>Internals of <a href="Dataset.html#method-i-import">import</a>.  If primary
                  key values are requested, use separate insert commands for each row. 
                  Otherwise, call <a
                  href="Dataset.html#method-i-multi_insert_sql">multi_insert_sql</a> and
                  execute each statement it gives separately.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-_import-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-_import-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 735</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">_import</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-identifier">trans_opts</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:server=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@opts</span>[<span class="ruby-value">:server</span>])&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:return</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:primary_key</span>&#x000A;    <span class="ruby-ivar">@db</span>.<span class="ruby-identifier">transaction</span>(<span class="ruby-identifier">trans_opts</span>){<span class="ruby-identifier">values</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">insert</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">v</span>)}}&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">stmts</span> = <span class="ruby-identifier">multi_insert_sql</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>)&#x000A;    <span class="ruby-ivar">@db</span>.<span class="ruby-identifier">transaction</span>(<span class="ruby-identifier">trans_opts</span>){<span class="ruby-identifier">stmts</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">st</span><span class="ruby-operator">|</span> <span class="ruby-identifier">execute_dui</span>(<span class="ruby-identifier">st</span>)}}&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-method-i-_select_map_multiple'>
                <a name='method-i-_select_map_multiple'></a>
                <div class='synopsis'>
                  <span class='name'>_select_map_multiple</span>
                  <span class='arguments'>(ret_cols)</span>
                </div>
                <div class='description'>
                  
                  <p>Return an array of arrays of values given by the symbols in ret_cols.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-_select_map_multiple-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-_select_map_multiple-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 746</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">_select_map_multiple</span>(<span class="ruby-identifier">ret_cols</span>)&#x000A;  <span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">ret_cols</span>)}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-method-i-_select_map_single'>
                <a name='method-i-_select_map_single'></a>
                <div class='synopsis'>
                  <span class='name'>_select_map_single</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns an array of the first value in each row.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-_select_map_single-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-_select_map_single-source'><span class="ruby-comment"># File lib/sequel/dataset/actions.rb, line 751</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">_select_map_single</span>&#x000A;  <span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='3+-+User+Methods+relating+to+SQL+Creation'>3 - User Methods relating to SQL Creation</a>
              <div class='section-comment'>
                
                <p>These are methods you can call to see what <a href="SQL.html">SQL</a> will
                be generated by the dataset.</p>
              </div>
            </h2>
            <div id='methods'>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-delete_sql'>
                <a name='method-i-delete_sql'></a>
                <div class='synopsis'>
                  <span class='name'>delete_sql</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a <a href="Dataset.html#DELETE">DELETE</a> <a
                  href="SQL.html">SQL</a> query string.  See <code>delete</code>.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">filter</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">price</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">100</span>}.<span class="ruby-identifier">delete_sql</span>&#x000A;<span class="ruby-comment"># =&gt; &quot;DELETE FROM items WHERE (price &gt;= 100)&quot;</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-delete_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-delete_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 12</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_sql</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">static_sql</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:sql</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:sql</span>]&#x000A;  <span class="ruby-identifier">check_modification_allowed!</span>&#x000A;  <span class="ruby-identifier">clause_sql</span>(<span class="ruby-value">:delete</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-exists'>
                <a name='method-i-exists'></a>
                <div class='synopsis'>
                  <span class='name'>exists</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns an <a href="Dataset.html#EXISTS">EXISTS</a> clause for the dataset
                  as a <code>LiteralString</code>.</p>
                  
                  <pre>DB.select(1).where(DB[:items].exists)&#x000A;# SELECT 1 WHERE (EXISTS (SELECT * FROM items))</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exists-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exists-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 22</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exists</span>&#x000A;  <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">PlaceholderLiteralString</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">EXISTS</span>, [<span class="ruby-keyword">self</span>], <span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-insert_sql'>
                <a name='method-i-insert_sql'></a>
                <div class='synopsis'>
                  <span class='name'>insert_sql</span>
                  <span class='arguments'>(*values)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns an <a href="Dataset.html#INSERT">INSERT</a> <a
                  href="SQL.html">SQL</a> query string.  See <code>insert</code>.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">insert_sql</span>(:<span class="ruby-identifier">a=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>)&#x000A;<span class="ruby-comment"># =&gt; &quot;INSERT INTO items (a) VALUES (1)&quot;</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-insert_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-insert_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 30</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">insert_sql</span>(*<span class="ruby-identifier">values</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">static_sql</span>(<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:sql</span>]) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:sql</span>]&#x000A;&#x000A;  <span class="ruby-identifier">check_modification_allowed!</span>&#x000A;&#x000A;  <span class="ruby-identifier">columns</span> = []&#x000A;&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">size</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">0</span>&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-identifier">insert_sql</span>({})&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>&#x000A;    <span class="ruby-keyword">case</span> <span class="ruby-identifier">vals</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>)&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>&#x000A;      <span class="ruby-identifier">values</span> = []&#x000A;      <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> &#x000A;        <span class="ruby-identifier">columns</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">k</span>&#x000A;        <span class="ruby-identifier">values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-constant">Dataset</span>, <span class="ruby-constant">Array</span>, <span class="ruby-constant">LiteralString</span>&#x000A;      <span class="ruby-identifier">values</span> = <span class="ruby-identifier">vals</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>&#x000A;    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">v0</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>)).<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span> ((<span class="ruby-identifier">v1</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">1</span>)).<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">v1</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Dataset</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">v1</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">LiteralString</span>))&#x000A;      <span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span> = <span class="ruby-identifier">v0</span>, <span class="ruby-identifier">v1</span>&#x000A;      <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;Different number of values and columns given to insert_sql&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">length</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">insert_supports_empty_values?</span> &#x000A;    <span class="ruby-identifier">columns</span> = [<span class="ruby-identifier">columns</span>().<span class="ruby-identifier">last</span>]&#x000A;    <span class="ruby-identifier">values</span> = [<span class="ruby-constant">DEFAULT</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:columns=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">columns</span>, <span class="ruby-value">:values=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">values</span>).<span class="ruby-identifier">_insert_sql</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-literal_append'>
                <a name='method-i-literal_append'></a>
                <div class='synopsis'>
                  <span class='name'>literal_append</span>
                  <span class='arguments'>(sql, v)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a literal representation of a value to be used as part of an <a
                  href="SQL.html">SQL</a> expression.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">literal</span>(<span class="ruby-string">&quot;abc&#39;def\\&quot;</span>) <span class="ruby-comment">#=&gt; &quot;&#39;abc&#39;&#39;def\\\\&#39;&quot;</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">literal</span>(:<span class="ruby-identifier">items__id</span>) <span class="ruby-comment">#=&gt; &quot;items.id&quot;</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">literal</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>]) =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;(1, 2, 3)&quot;</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">literal</span>(<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>]) =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;(SELECT * FROM items)&quot;</span>&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">literal</span>(:<span class="ruby-identifier">x</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">y</span>) =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;((x + 1) &gt; y)&quot;</span></pre>
                  
                  <p>If an unsupported object is given, an <code>Error</code> is raised.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-literal_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-literal_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 75</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">v</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;    <span class="ruby-identifier">literal_symbol_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>&#x000A;    <span class="ruby-keyword">case</span> <span class="ruby-identifier">v</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-constant">LiteralString</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Blob</span>&#x000A;      <span class="ruby-identifier">literal_blob_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">literal_string_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Integer</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">literal_integer</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>&#x000A;    <span class="ruby-identifier">literal_hash_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Expression</span>&#x000A;    <span class="ruby-identifier">literal_expression_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Float</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">literal_float</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">BigDecimal</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">literal_big_decimal</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">NilClass</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">literal_nil</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">TrueClass</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">literal_true</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">FalseClass</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">literal_false</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>&#x000A;    <span class="ruby-identifier">literal_array_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Time</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQLTime</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">literal_sqltime</span>(<span class="ruby-identifier">v</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">literal_time</span>(<span class="ruby-identifier">v</span>))&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">DateTime</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">literal_datetime</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Date</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">literal_date</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Dataset</span>&#x000A;    <span class="ruby-identifier">literal_dataset_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">literal_other_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-multi_insert_sql'>
                <a name='method-i-multi_insert_sql'></a>
                <div class='synopsis'>
                  <span class='name'>multi_insert_sql</span>
                  <span class='arguments'>(columns, values)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns an array of insert statements for inserting multiple records. This
                  method is used by <code>multi_insert</code> to format insert statements and
                  expects a keys array and and an array of value arrays.</p>
                  
                  <p>This method should be overridden by descendants if the support inserting
                  multiple records in a single <a href="SQL.html">SQL</a> statement.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-multi_insert_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-multi_insert_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 125</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">multi_insert_sql</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">values</span>)&#x000A;  <span class="ruby-identifier">values</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">insert_sql</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">r</span>)}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-select_sql'>
                <a name='method-i-select_sql'></a>
                <div class='synopsis'>
                  <span class='name'>select_sql</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a <a href="Dataset.html#SELECT">SELECT</a> <a
                  href="SQL.html">SQL</a> query string.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">select_sql</span> <span class="ruby-comment"># =&gt; &quot;SELECT * FROM items&quot;</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 132</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_sql</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">static_sql</span>(<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:sql</span>]) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:sql</span>]&#x000A;  <span class="ruby-identifier">clause_sql</span>(<span class="ruby-value">:select</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-sql'>
                <a name='method-i-sql'></a>
                <div class='synopsis'>
                  <span class='name'>sql</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Same as <code>select_sql</code>, not aliased directly to make subclassing
                  simpler.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 138</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">sql</span>&#x000A;  <span class="ruby-identifier">select_sql</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-truncate_sql'>
                <a name='method-i-truncate_sql'></a>
                <div class='synopsis'>
                  <span class='name'>truncate_sql</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a TRUNCATE <a href="SQL.html">SQL</a> query string.  See
                  <code>truncate</code></p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">truncate_sql</span> <span class="ruby-comment"># =&gt; &#39;TRUNCATE items&#39;</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-truncate_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-truncate_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 145</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">truncate_sql</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:sql</span>]&#x000A;    <span class="ruby-identifier">static_sql</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:sql</span>])&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">check_truncation_allowed!</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">InvalidOperation</span>, <span class="ruby-string">&quot;Can&#39;t truncate filtered datasets&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:where</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:having</span>]&#x000A;    <span class="ruby-identifier">t</span> = <span class="ruby-string">&#39;&#39;</span>&#x000A;    <span class="ruby-identifier">source_list_append</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">opts</span>[<span class="ruby-value">:from</span>])&#x000A;    <span class="ruby-identifier">_truncate_sql</span>(<span class="ruby-identifier">t</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-update_sql'>
                <a name='method-i-update_sql'></a>
                <div class='synopsis'>
                  <span class='name'>update_sql</span>
                  <span class='arguments'>(values = OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Formats an <a href="Dataset.html#UPDATE">UPDATE</a> statement using the
                  given values.  See <code>update</code>.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">items</span>].<span class="ruby-identifier">update_sql</span>(:<span class="ruby-identifier">price</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">100</span>, :<span class="ruby-identifier">category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;software&#39;</span>)&#x000A;<span class="ruby-comment"># =&gt; &quot;UPDATE items SET price = 100, category = &#39;software&#39;</span></pre>
                  
                  <p>Raises an <code>Error</code> if the dataset is grouped or includes more
                  than one table.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-update_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-update_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 164</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_sql</span>(<span class="ruby-identifier">values</span> = <span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">static_sql</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:sql</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:sql</span>]&#x000A;  <span class="ruby-identifier">check_modification_allowed!</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:values=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">values</span>).<span class="ruby-identifier">_update_sql</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='4+-+Methods+that+describe+what+the+dataset+supports'>4 - Methods that describe what the dataset supports</a>
              <div class='section-comment'>
                
                <p>These methods all return booleans, with most describing whether or not the
                dataset supports a feature.</p>
              </div>
            </h2>
            <div id='methods'>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-provides_accurate_rows_matched-3F'>
                <a name='method-i-provides_accurate_rows_matched-3F'></a>
                <div class='synopsis'>
                  <span class='name'>provides_accurate_rows_matched?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether this dataset will provide accurate number of rows matched for
                  delete and update statements.  Accurate in this case is the number of rows
                  matched by the dataset&#39;s filter.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-provides_accurate_rows_matched-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-provides_accurate_rows_matched-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 21</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">provides_accurate_rows_matched?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-quote_identifiers-3F'>
                <a name='method-i-quote_identifiers-3F'></a>
                <div class='synopsis'>
                  <span class='name'>quote_identifiers?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether this dataset quotes identifiers.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-quote_identifiers-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-quote_identifiers-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 10</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">quote_identifiers?</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@quote_identifiers</span>)&#x000A;    <span class="ruby-ivar">@quote_identifiers</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@quote_identifiers</span> = <span class="ruby-identifier">db</span>.<span class="ruby-identifier">quote_identifiers?</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-recursive_cte_requires_column_aliases-3F'>
                <a name='method-i-recursive_cte_requires_column_aliases-3F'></a>
                <div class='synopsis'>
                  <span class='name'>recursive_cte_requires_column_aliases?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether you must use a column alias list for recursive CTEs (false by
                  default).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-recursive_cte_requires_column_aliases-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-recursive_cte_requires_column_aliases-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 27</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">recursive_cte_requires_column_aliases?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-requires_placeholder_type_specifiers-3F'>
                <a name='method-i-requires_placeholder_type_specifiers-3F'></a>
                <div class='synopsis'>
                  <span class='name'>requires_placeholder_type_specifiers?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether type specifiers are required for prepared statement/bound variable
                  argument placeholders (i.e. :bv__integer)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-requires_placeholder_type_specifiers-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-requires_placeholder_type_specifiers-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 39</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">requires_placeholder_type_specifiers?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-requires_sql_standard_datetimes-3F'>
                <a name='method-i-requires_sql_standard_datetimes-3F'></a>
                <div class='synopsis'>
                  <span class='name'>requires_sql_standard_datetimes?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset requires <a href="SQL.html">SQL</a> standard datetimes
                  (false by default, as most allow strings with ISO 8601 format).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-requires_sql_standard_datetimes-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-requires_sql_standard_datetimes-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 33</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">requires_sql_standard_datetimes?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_cte-3F'>
                <a name='method-i-supports_cte-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_cte?</span>
                  <span class='arguments'>(type=:select)</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports common table expressions (the WITH clause). If
                  given, <code>type</code> can be :select, :insert, :update, or :delete, in
                  which case it determines whether WITH is supported for the respective
                  statement type.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_cte-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_cte-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 46</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_cte?</span>(<span class="ruby-identifier">type</span>=<span class="ruby-value">:select</span>)&#x000A;  <span class="ruby-identifier">send</span>(<span class="ruby-value">:&quot;#{type}_clause_methods&quot;</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-value">:&quot;#{type}_with_sql&quot;</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_cte_in_subqueries-3F'>
                <a name='method-i-supports_cte_in_subqueries-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_cte_in_subqueries?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports common table expressions (the WITH clause) in
                  subqueries.  If false, applies the WITH clause to the main query, which can
                  cause issues if multiple WITH clauses use the same name.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_cte_in_subqueries-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_cte_in_subqueries-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 53</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_cte_in_subqueries?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_distinct_on-3F'>
                <a name='method-i-supports_distinct_on-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_distinct_on?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports or can emulate the <a
                  href="Dataset.html#DISTINCT">DISTINCT</a> <a href="Dataset.html#ON">ON</a>
                  clause, false by default.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_distinct_on-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_distinct_on-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 58</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_distinct_on?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_group_cube-3F'>
                <a name='method-i-supports_group_cube-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_group_cube?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports CUBE with GROUP BY.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_group_cube-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_group_cube-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 63</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_group_cube?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_group_rollup-3F'>
                <a name='method-i-supports_group_rollup-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_group_rollup?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports ROLLUP with GROUP BY.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_group_rollup-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_group_rollup-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 68</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_group_rollup?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_insert_select-3F'>
                <a name='method-i-supports_insert_select-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_insert_select?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether this dataset supports the <code>insert_select</code> method for
                  returning all columns values directly from an insert query.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_insert_select-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_insert_select-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 74</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_insert_select?</span>&#x000A;  <span class="ruby-identifier">supports_returning?</span>(<span class="ruby-value">:insert</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_intersect_except-3F'>
                <a name='method-i-supports_intersect_except-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_intersect_except?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports the INTERSECT and EXCEPT compound operations,
                  true by default.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_intersect_except-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_intersect_except-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 79</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_intersect_except?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_intersect_except_all-3F'>
                <a name='method-i-supports_intersect_except_all-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_intersect_except_all?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports the INTERSECT <a
                  href="Dataset.html#ALL">ALL</a> and EXCEPT <a
                  href="Dataset.html#ALL">ALL</a> compound operations, true by default.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_intersect_except_all-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_intersect_except_all-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 84</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_intersect_except_all?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_is_true-3F'>
                <a name='method-i-supports_is_true-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_is_true?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports the IS TRUE syntax.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_is_true-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_is_true-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 89</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_is_true?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_join_using-3F'>
                <a name='method-i-supports_join_using-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_join_using?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports the JOIN table <a
                  href="Dataset.html#USING">USING</a> (column1, ...) syntax.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_join_using-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_join_using-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 94</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_join_using?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_lateral_subqueries-3F'>
                <a name='method-i-supports_lateral_subqueries-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_lateral_subqueries?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports <a href="Dataset.html#LATERAL">LATERAL</a> for
                  subqueries in the <a href="Dataset.html#FROM">FROM</a> or JOIN clauses.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_lateral_subqueries-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_lateral_subqueries-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 99</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_lateral_subqueries?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_modifying_joins-3F'>
                <a name='method-i-supports_modifying_joins-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_modifying_joins?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether modifying joined datasets is supported.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_modifying_joins-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_modifying_joins-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 104</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_modifying_joins?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_multiple_column_in-3F'>
                <a name='method-i-supports_multiple_column_in-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_multiple_column_in?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the IN/NOT IN operators support multiple columns when an array of
                  values is given.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_multiple_column_in-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_multiple_column_in-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 110</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_multiple_column_in?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_ordered_distinct_on-3F'>
                <a name='method-i-supports_ordered_distinct_on-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_ordered_distinct_on?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports or can fully emulate the <a
                  href="Dataset.html#DISTINCT">DISTINCT</a> <a href="Dataset.html#ON">ON</a>
                  clause, including respecting the ORDER BY clause, false by default</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_ordered_distinct_on-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_ordered_distinct_on-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 116</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_ordered_distinct_on?</span>&#x000A;  <span class="ruby-identifier">supports_distinct_on?</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_regexp-3F'>
                <a name='method-i-supports_regexp-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_regexp?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports pattern matching by regular expressions.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_regexp-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_regexp-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 121</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_regexp?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_replace-3F'>
                <a name='method-i-supports_replace-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_replace?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports REPLACE syntax, false by default.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_replace-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_replace-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 126</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_replace?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_returning-3F'>
                <a name='method-i-supports_returning-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_returning?</span>
                  <span class='arguments'>(type)</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the <a href="Dataset.html#RETURNING">RETURNING</a> clause is
                  supported for the given type of query. <code>type</code> can be :insert,
                  :update, or :delete.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_returning-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_returning-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 132</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_returning?</span>(<span class="ruby-identifier">type</span>)&#x000A;  <span class="ruby-identifier">send</span>(<span class="ruby-value">:&quot;#{type}_clause_methods&quot;</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-value">:&quot;#{type}_returning_sql&quot;</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_select_all_and_column-3F'>
                <a name='method-i-supports_select_all_and_column-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_select_all_and_column?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the database supports <a href="Dataset.html#SELECT">SELECT</a> *,
                  column <a href="Dataset.html#FROM">FROM</a> table</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_select_all_and_column-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_select_all_and_column-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 137</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_select_all_and_column?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_timestamp_timezones-3F'>
                <a name='method-i-supports_timestamp_timezones-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_timestamp_timezones?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports timezones in literal timestamps</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_timestamp_timezones-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_timestamp_timezones-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 142</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_timestamp_timezones?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_timestamp_usecs-3F'>
                <a name='method-i-supports_timestamp_usecs-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_timestamp_usecs?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports fractional seconds in literal timestamps</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_timestamp_usecs-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_timestamp_usecs-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 147</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_timestamp_usecs?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_where_true-3F'>
                <a name='method-i-supports_where_true-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_where_true?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports <a href="Dataset.html#WHERE">WHERE</a> TRUE
                  (or <a href="Dataset.html#WHERE">WHERE</a> 1 for databases that that use 1
                  for true).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_where_true-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_where_true-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 158</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_where_true?</span>&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-supports_window_functions-3F'>
                <a name='method-i-supports_window_functions-3F'></a>
                <div class='synopsis'>
                  <span class='name'>supports_window_functions?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the dataset supports window functions.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-supports_window_functions-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-supports_window_functions-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/features.rb, line 152</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_window_functions?</span>&#x000A;  <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='5+-+Methods+related+to+dataset+graphing'>5 - Methods related to dataset graphing</a>
              <div class='section-comment'>
                
                <p><a href="Dataset.html">Dataset</a> graphing changes the dataset to yield
                hashes where keys are table name symbols and values are hashes representing
                the columns related to that table.  All of these methods return modified
                copies of the receiver.</p>
              </div>
            </h2>
            <div id='methods'>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-add_graph_aliases'>
                <a name='method-i-add_graph_aliases'></a>
                <div class='synopsis'>
                  <span class='name'>add_graph_aliases</span>
                  <span class='arguments'>(graph_aliases)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds the given graph aliases to the list of graph aliases to use, unlike
                  <code>set_graph_aliases</code>, which replaces the list (the equivalent of
                  <code>select_more</code> when graphing).  See
                  <code>set_graph_aliases</code>.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">add_graph_aliases</span>(:<span class="ruby-identifier">some_alias=</span><span class="ruby-operator">&gt;</span>[:<span class="ruby-identifier">table</span>, :<span class="ruby-identifier">column</span>])&#x000A;<span class="ruby-comment"># SELECT ..., table.column AS some_alias</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-add_graph_aliases-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-add_graph_aliases-source'><span class="ruby-comment"># File lib/sequel/dataset/graph.rb, line 16</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_graph_aliases</span>(<span class="ruby-identifier">graph_aliases</span>)&#x000A;  <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">ga</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:graph_aliases</span>]) <span class="ruby-operator">||</span> (<span class="ruby-identifier">opts</span>[<span class="ruby-value">:graph</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">ga</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:graph</span>][<span class="ruby-value">:column_aliases</span>]))&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;cannot call add_graph_aliases on a dataset that has not been called with graph or set_graph_aliases&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">columns</span>, <span class="ruby-identifier">graph_aliases</span> = <span class="ruby-identifier">graph_alias_columns</span>(<span class="ruby-identifier">graph_aliases</span>)&#x000A;  <span class="ruby-identifier">select_more</span>(*<span class="ruby-identifier">columns</span>).<span class="ruby-identifier">clone</span>(<span class="ruby-value">:graph_aliases</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ga</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">graph_aliases</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-graph'>
                <a name='method-i-graph'></a>
                <div class='synopsis'>
                  <span class='name'>graph</span>
                  <span class='arguments'>(dataset, join_conditions = nil, options = OPTS, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Similar to <a href="Dataset.html#method-i-join_table">#join_table</a>, but
                  uses unambiguous aliases for selected columns and keeps metadata about the
                  aliases for use in other methods.</p>
                  
                  <p>Arguments:</p>
                  <dl class="rdoc-list note-list"><dt>dataset 
                  <dd>
                  <p>Can be a symbol (specifying a table), another dataset, or an object that
                  responds to <code>dataset</code> and returns a symbol or a dataset</p>
                  </dd><dt>join_conditions 
                  <dd>
                  <p>Any condition(s) allowed by <code>join_table</code>.</p>
                  </dd><dt>block 
                  <dd>
                  <p>A block that is passed to <code>join_table</code>.</p>
                  </dd></dl>
                  
                  <p>Options:</p>
                  <dl class="rdoc-list note-list"><dt>:from_self_alias 
                  <dd>
                  <p>The alias to use when the receiver is not a graphed dataset but it contains
                  multiple <a href="Dataset.html#FROM">FROM</a> tables or a JOIN.  In this
                  case, the receiver is wrapped in a <a
                  href="Dataset.html#method-i-from_self">#from_self</a> before graphing, and
                  this option determines the alias to use.</p>
                  </dd><dt>:implicit_qualifier 
                  <dd>
                  <p>The qualifier of implicit conditions, see <a
                  href="Dataset.html#method-i-join_table">join_table</a>.</p>
                  </dd><dt>:join_type 
                  <dd>
                  <p>The type of join to use (passed to <code>join_table</code>).  Defaults to
                  :left_outer.</p>
                  </dd><dt>:qualify
                  <dd>
                  <p>The type of qualification to do, see <a
                  href="Dataset.html#method-i-join_table">join_table</a>.</p>
                  </dd><dt>:select 
                  <dd>
                  <p>An array of columns to select.  When not used, selects all columns in the
                  given dataset.  When set to false, selects no columns and is like simply
                  joining the tables, though graph keeps some metadata about the join that
                  makes it important to use <code>graph</code> instead of
                  <code>join_table</code>.</p>
                  </dd><dt>:table_alias 
                  <dd>
                  <p>The alias to use for the table.  If not specified, doesn&#39;t alias the
                  table.  You will get an error if the alias (or table) name is used more
                  than once.</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-graph-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-graph-source'><span class="ruby-comment"># File lib/sequel/dataset/graph.rb, line 49</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">graph</span>(<span class="ruby-identifier">dataset</span>, <span class="ruby-identifier">join_conditions</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = <span class="ruby-constant">OPTS</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-comment"># Allow the use of a dataset or symbol as the first argument</span>&#x000A;  <span class="ruby-comment"># Find the table name/dataset based on the argument</span>&#x000A;  <span class="ruby-identifier">table_alias</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:table_alias</span>]&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">dataset</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;    <span class="ruby-identifier">table</span> = <span class="ruby-identifier">dataset</span>&#x000A;    <span class="ruby-identifier">dataset</span> = <span class="ruby-ivar">@db</span>[<span class="ruby-identifier">dataset</span>]&#x000A;    <span class="ruby-identifier">table_alias</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">table</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-operator">::</span><span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Dataset</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">simple_select_all?</span>&#x000A;      <span class="ruby-identifier">table</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:from</span>].<span class="ruby-identifier">first</span>&#x000A;      <span class="ruby-identifier">table_alias</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">table</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">table</span> = <span class="ruby-identifier">dataset</span>&#x000A;      <span class="ruby-identifier">table_alias</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">dataset_alias</span>((<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:num_dataset_sources</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>)<span class="ruby-operator">+</span><span class="ruby-value">1</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;The dataset argument should be a symbol or dataset&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-comment"># Raise Sequel::Error with explanation that the table alias has been used</span>&#x000A;  <span class="ruby-identifier">raise_alias_error</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;this #{options[:table_alias] ? &#39;alias&#39; : &#39;table&#39;} has already been been used, please specify &quot;</span>            <span class="ruby-node">&quot;#{options[:table_alias] ? &#39;a different alias&#39; : &#39;an alias via the :table_alias option&#39;}&quot;</span>) &#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-comment"># Only allow table aliases that haven&#39;t been used</span>&#x000A;  <span class="ruby-identifier">raise_alias_error</span>.<span class="ruby-identifier">call</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:graph</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:graph</span>][<span class="ruby-value">:table_aliases</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:graph</span>][<span class="ruby-value">:table_aliases</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">table_alias</span>)&#x000A;  &#x000A;  <span class="ruby-comment"># Use a from_self if this is already a joined table</span>&#x000A;  <span class="ruby-identifier">ds</span> = (<span class="ruby-operator">!</span><span class="ruby-ivar">@opts</span>[<span class="ruby-value">:graph</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:from</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:join</span>])) <span class="ruby-operator">?</span> <span class="ruby-identifier">from_self</span>(<span class="ruby-value">:alias</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:from_self_alias</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">first_source</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>&#x000A;  &#x000A;  <span class="ruby-comment"># Join the table early in order to avoid cloning the dataset twice</span>&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">join_table</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:join_type</span>] <span class="ruby-operator">||</span> <span class="ruby-value">:left_outer</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">join_conditions</span>, <span class="ruby-value">:table_alias=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">table_alias</span>, <span class="ruby-value">:implicit_qualifier=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:implicit_qualifier</span>], <span class="ruby-value">:qualify=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:qualify</span>], &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">opts</span>&#x000A;&#x000A;  <span class="ruby-comment"># Whether to include the table in the result set</span>&#x000A;  <span class="ruby-identifier">add_table</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:select</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-comment"># Whether to add the columns to the list of column aliases</span>&#x000A;  <span class="ruby-identifier">add_columns</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">ds</span>.<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:graph_aliases</span>)&#x000A;&#x000A;  <span class="ruby-comment"># Setup the initial graph data structure if it doesn&#39;t exist</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">graph</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:graph</span>]&#x000A;    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:graph</span>] = <span class="ruby-identifier">graph</span> = <span class="ruby-identifier">graph</span>.<span class="ruby-identifier">dup</span>&#x000A;    <span class="ruby-identifier">select</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:select</span>].<span class="ruby-identifier">dup</span>&#x000A;    [<span class="ruby-value">:column_aliases</span>, <span class="ruby-value">:table_aliases</span>, <span class="ruby-value">:column_alias_num</span>].<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">graph</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">graph</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">dup</span>}&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">master</span> = <span class="ruby-identifier">alias_symbol</span>(<span class="ruby-identifier">ds</span>.<span class="ruby-identifier">first_source_alias</span>)&#x000A;    <span class="ruby-identifier">raise_alias_error</span>.<span class="ruby-identifier">call</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">master</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">table_alias</span>&#x000A;    <span class="ruby-comment"># Master hash storing all .graph related information</span>&#x000A;    <span class="ruby-identifier">graph</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:graph</span>] = {}&#x000A;    <span class="ruby-comment"># Associates column aliases back to tables and columns</span>&#x000A;    <span class="ruby-identifier">column_aliases</span> = <span class="ruby-identifier">graph</span>[<span class="ruby-value">:column_aliases</span>] = {}&#x000A;    <span class="ruby-comment"># Associates table alias (the master is never aliased)</span>&#x000A;    <span class="ruby-identifier">table_aliases</span> = <span class="ruby-identifier">graph</span>[<span class="ruby-value">:table_aliases</span>] = {<span class="ruby-identifier">master</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword">self</span>}&#x000A;    <span class="ruby-comment"># Keep track of the alias numbers used</span>&#x000A;    <span class="ruby-identifier">ca_num</span> = <span class="ruby-identifier">graph</span>[<span class="ruby-value">:column_alias_num</span>] = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">0</span>)&#x000A;    <span class="ruby-comment"># All columns in the master table are never</span>&#x000A;    <span class="ruby-comment"># aliased, but are not included if set_graph_aliases</span>&#x000A;    <span class="ruby-comment"># has been used.</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">add_columns</span>&#x000A;      <span class="ruby-keyword">if</span> (<span class="ruby-identifier">select</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:select</span>]) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">select</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">select</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">select</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">ColumnAll</span>)))&#x000A;        <span class="ruby-identifier">select</span> = <span class="ruby-identifier">select</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sel</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-identifier">column</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">sel</span>&#x000A;          <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;            <span class="ruby-identifier">_</span>, <span class="ruby-identifier">c</span>, <span class="ruby-identifier">a</span> = <span class="ruby-identifier">split_symbol</span>(<span class="ruby-identifier">sel</span>)&#x000A;            (<span class="ruby-identifier">a</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>).<span class="ruby-identifier">to_sym</span>&#x000A;          <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>&#x000A;            <span class="ruby-identifier">sel</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_sym</span>&#x000A;          <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>&#x000A;            <span class="ruby-identifier">column</span> = <span class="ruby-identifier">sel</span>.<span class="ruby-identifier">column</span>&#x000A;            <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>)&#x000A;            <span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_sym</span>&#x000A;          <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>&#x000A;            <span class="ruby-identifier">column</span> = <span class="ruby-identifier">sel</span>.<span class="ruby-identifier">aliaz</span>&#x000A;            <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>)&#x000A;            <span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_sym</span>&#x000A;          <span class="ruby-keyword">else</span>&#x000A;            <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;can&#39;t figure out alias to use for graphing for #{sel.inspect}&quot;</span>&#x000A;          <span class="ruby-keyword">end</span>&#x000A;          <span class="ruby-identifier">column_aliases</span>[<span class="ruby-identifier">column</span>] = [<span class="ruby-identifier">master</span>, <span class="ruby-identifier">column</span>]&#x000A;        <span class="ruby-keyword">end</span>&#x000A;        <span class="ruby-identifier">select</span> = <span class="ruby-identifier">qualified_expression</span>(<span class="ruby-identifier">select</span>, <span class="ruby-identifier">master</span>)&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-identifier">select</span> = <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-identifier">column_aliases</span>[<span class="ruby-identifier">column</span>] = [<span class="ruby-identifier">master</span>, <span class="ruby-identifier">column</span>]&#x000A;          <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">master</span>, <span class="ruby-identifier">column</span>)&#x000A;        <span class="ruby-keyword">end</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-comment"># Add the table alias to the list of aliases</span>&#x000A;  <span class="ruby-comment"># Even if it isn&#39;t been used in the result set,</span>&#x000A;  <span class="ruby-comment"># we add a key for it with a nil value so we can check if it</span>&#x000A;  <span class="ruby-comment"># is used more than once</span>&#x000A;  <span class="ruby-identifier">table_aliases</span> = <span class="ruby-identifier">graph</span>[<span class="ruby-value">:table_aliases</span>]&#x000A;  <span class="ruby-identifier">table_aliases</span>[<span class="ruby-identifier">table_alias</span>] = <span class="ruby-identifier">add_table</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">dataset</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>&#x000A;&#x000A;  <span class="ruby-comment"># Add the columns to the selection unless we are ignoring them</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">add_table</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">add_columns</span>&#x000A;    <span class="ruby-identifier">column_aliases</span> = <span class="ruby-identifier">graph</span>[<span class="ruby-value">:column_aliases</span>]&#x000A;    <span class="ruby-identifier">ca_num</span> = <span class="ruby-identifier">graph</span>[<span class="ruby-value">:column_alias_num</span>]&#x000A;    <span class="ruby-comment"># Which columns to add to the result set</span>&#x000A;    <span class="ruby-identifier">cols</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:select</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">columns</span>&#x000A;    <span class="ruby-comment"># If the column hasn&#39;t been used yet, don&#39;t alias it.</span>&#x000A;    <span class="ruby-comment"># If it has been used, try table_column.</span>&#x000A;    <span class="ruby-comment"># If that has been used, try table_column_N </span>&#x000A;    <span class="ruby-comment"># using the next value of N that we know hasn&#39;t been</span>&#x000A;    <span class="ruby-comment"># used</span>&#x000A;    <span class="ruby-identifier">cols</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-identifier">col_alias</span>, <span class="ruby-identifier">identifier</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">column_aliases</span>[<span class="ruby-identifier">column</span>]&#x000A;        <span class="ruby-identifier">column_alias</span> = <span class="ruby-value">:&quot;#{table_alias}_#{column}&quot;</span>&#x000A;        <span class="ruby-keyword">if</span> <span class="ruby-identifier">column_aliases</span>[<span class="ruby-identifier">column_alias</span>]&#x000A;          <span class="ruby-identifier">column_alias_num</span> = <span class="ruby-identifier">ca_num</span>[<span class="ruby-identifier">column_alias</span>]&#x000A;          <span class="ruby-identifier">column_alias</span> = <span class="ruby-value">:&quot;#{column_alias}_#{column_alias_num}&quot;</span> &#x000A;          <span class="ruby-identifier">ca_num</span>[<span class="ruby-identifier">column_alias</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>&#x000A;        <span class="ruby-keyword">end</span>&#x000A;        [<span class="ruby-identifier">column_alias</span>, <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table_alias</span>, <span class="ruby-identifier">column</span>), <span class="ruby-identifier">column_alias</span>)]&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-identifier">ident</span> = <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table_alias</span>, <span class="ruby-identifier">column</span>)&#x000A;        [<span class="ruby-identifier">column</span>, <span class="ruby-identifier">ident</span>]&#x000A;      <span class="ruby-keyword">end</span>&#x000A;      <span class="ruby-identifier">column_aliases</span>[<span class="ruby-identifier">col_alias</span>] = [<span class="ruby-identifier">table_alias</span>, <span class="ruby-identifier">column</span>]&#x000A;      <span class="ruby-identifier">select</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">identifier</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">add_columns</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">select</span>(*<span class="ruby-identifier">select</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">ds</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-set_graph_aliases'>
                <a name='method-i-set_graph_aliases'></a>
                <div class='synopsis'>
                  <span class='name'>set_graph_aliases</span>
                  <span class='arguments'>(graph_aliases)</span>
                </div>
                <div class='description'>
                  
                  <p>This allows you to manually specify the graph aliases to use when using
                  graph.  You can use it to only select certain columns, and have those
                  columns mapped to specific aliases in the result set.  This is the
                  equivalent of <code>select</code> for a graphed dataset, and must be used
                  instead of <code>select</code> whenever graphing is used.</p>
                  <dl class="rdoc-list note-list"><dt>graph_aliases 
                  <dd>
                  <p>Should be a hash with keys being symbols of column aliases, and values
                  being either symbols or arrays with one to three elements. If the value is
                  a symbol, it is assumed to be the same as a one element array containing
                  that symbol. The first element of the array should be the table alias
                  symbol. The second should be the actual column name symbol.  If the array
                  only has a single element the column name symbol will be assumed to be the
                  same as the corresponding hash key. If the array has a third element, it is
                  used as the value returned, instead of table_alias.column_name.</p>
                  </dd></dl>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">artists</span>].<span class="ruby-identifier">graph</span>(:<span class="ruby-identifier">albums</span>, :<span class="ruby-identifier">artist_id=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">id</span>).&#x000A;  <span class="ruby-identifier">set_graph_aliases</span>(:<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">artists</span>,&#x000A;                    :<span class="ruby-identifier">album_name=</span><span class="ruby-operator">&gt;</span>[:<span class="ruby-identifier">albums</span>, :<span class="ruby-identifier">name</span>],&#x000A;                    :<span class="ruby-identifier">forty_two=</span><span class="ruby-operator">&gt;</span>[:<span class="ruby-identifier">albums</span>, :<span class="ruby-identifier">fourtwo</span>, <span class="ruby-value">42</span>]).<span class="ruby-identifier">first</span>&#x000A;<span class="ruby-comment"># SELECT artists.name, albums.name AS album_name, 42 AS forty_two ...</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-set_graph_aliases-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-set_graph_aliases-source'><span class="ruby-comment"># File lib/sequel/dataset/graph.rb, line 203</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_graph_aliases</span>(<span class="ruby-identifier">graph_aliases</span>)&#x000A;  <span class="ruby-identifier">columns</span>, <span class="ruby-identifier">graph_aliases</span> = <span class="ruby-identifier">graph_alias_columns</span>(<span class="ruby-identifier">graph_aliases</span>)&#x000A;  <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">select</span>(*<span class="ruby-identifier">columns</span>)&#x000A;  <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:graph_aliases</span>] = <span class="ruby-identifier">graph_aliases</span>&#x000A;  <span class="ruby-identifier">ds</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-ungraphed'>
                <a name='method-i-ungraphed'></a>
                <div class='synopsis'>
                  <span class='name'>ungraphed</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Remove the splitting of results into subhashes, and all metadata related to
                  the current graph (if any).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-ungraphed-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-ungraphed-source'><span class="ruby-comment"># File lib/sequel/dataset/graph.rb, line 212</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">ungraphed</span>&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:graph=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>, <span class="ruby-value">:graph_aliases=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='6+-+Miscellaneous+methods'>6 - Miscellaneous methods</a>
              <div class='section-comment'>
                
                <p>These methods don&#39;t fit cleanly into another section.</p>
              </div>
            </h2>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ARG_BLOCK_ERROR_MSG</td>
                    <td>=</td>
                    <td class='context-item-value'>'Must use either an argument or a block, not both'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ARRAY_ACCESS_ERROR_MSG</td>
                    <td>=</td>
                    <td class='context-item-value'>'You cannot call Dataset#[] with an integer or with no arguments.'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>IMPORT_ERROR_MSG</td>
                    <td>=</td>
                    <td class='context-item-value'>'Using Sequel::Dataset#import an empty column array is not allowed'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>NOTIMPL_MSG</td>
                    <td>=</td>
                    <td class='context-item-value'>"This method must be overridden in Sequel adapters".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-db'>db</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The database related to this dataset.  This is the <a
                      href="Database.html">Database</a> instance that will execute all of this
                      dataset&#39;s queries.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-opts'>opts</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The hash of options for this dataset, keys are symbols.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(db)</span>
                </div>
                <div class='description'>
                  
                  <p>Constructs a new <a href="Dataset.html">Dataset</a> instance with an
                  associated database and  options. Datasets are usually constructed by
                  invoking the <a href="Database.html#method-i-5B-5D">Sequel::Database#[]</a>
                  method:</p>
                  
                  <pre>DB[:posts]</pre>
                  
                  <p><a href="Dataset.html">Sequel::Dataset</a> is an abstract class that is not
                  useful by itself. Each database adapter provides a subclass of <a
                  href="Dataset.html">Sequel::Dataset</a>, and has the <a
                  href="Database.html#method-i-dataset">Sequel::Database#dataset</a> method
                  return an instance of that subclass.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 28</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">db</span>)&#x000A;  <span class="ruby-ivar">@db</span> = <span class="ruby-identifier">db</span>&#x000A;  <span class="ruby-ivar">@opts</span> = <span class="ruby-constant">OPTS</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-3D-3D'>
                <a name='method-i-3D-3D'></a>
                <div class='synopsis'>
                  <span class='name'>==</span>
                  <span class='arguments'>(o)</span>
                </div>
                <div class='description'>
                  
                  <p>Define a hash value such that datasets with the same DB, opts, and <a
                  href="SQL.html">SQL</a> will be considered equal.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-3D-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-3D-3D-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 35</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">o</span>)&#x000A;  <span class="ruby-identifier">o</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">db</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">db</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">opts</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">sql</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">sql</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-dup'>
                <a name='method-i-dup'></a>
                <div class='synopsis'>
                  <span class='name'>dup</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Similar to <a href="Dataset.html#method-i-clone">clone</a>, but returns an
                  unfrozen clone if the receiver is frozen.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-dup-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-dup-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 45</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">dup</span>&#x000A;  <span class="ruby-identifier">o</span> = <span class="ruby-identifier">clone</span>&#x000A;  <span class="ruby-identifier">o</span>.<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:frozen</span>)&#x000A;  <span class="ruby-identifier">o</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-each_server'>
                <a name='method-i-each_server'></a>
                <div class='synopsis'>
                  <span class='name'>each_server</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Yield a dataset for each server in the connection pool that is tied to that
                  server. Intended for use in sharded environments where all servers need to
                  be modified with the same data:</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">configs</span>].<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">key=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;setting&#39;</span>).<span class="ruby-identifier">each_server</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ds</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">update</span>(:<span class="ruby-identifier">value=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;new_value&#39;</span>)}</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-each_server-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-each_server-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 56</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_server</span>&#x000A;  <span class="ruby-identifier">db</span>.<span class="ruby-identifier">servers</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">server</span>(<span class="ruby-identifier">s</span>)}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-eql-3F'>
                <a name='method-i-eql-3F'></a>
                <div class='synopsis'>
                  <span class='name'>eql?</span>
                  <span class='arguments'>(o)</span>
                </div>
                <div class='description'>
                  
                  <p>Alias for ==</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-eql-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-eql-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 40</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">o</span>)&#x000A;  <span class="ruby-keyword">self</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">o</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-escape_like'>
                <a name='method-i-escape_like'></a>
                <div class='synopsis'>
                  <span class='name'>escape_like</span>
                  <span class='arguments'>(string)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the string with the LIKE metacharacters (% and _) escaped. Useful
                  for when the LIKE term is a user-provided string where metacharacters
                  should not be recognized. Example:</p>
                  
                  <pre>ds.escape_like(&quot;foo\\%_&quot;) # &#39;foo\\\%\_&#39;</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-escape_like-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-escape_like-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 65</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">escape_like</span>(<span class="ruby-identifier">string</span>)&#x000A;  <span class="ruby-identifier">string</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/[\%_]/</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;\\#{m}&quot;</span>}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-first_source'>
                <a name='method-i-first_source'></a>
                <div class='synopsis'>
                  <span class='name'>first_source</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Alias of <code>first_source_alias</code></p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-first_source-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-first_source-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 81</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">first_source</span>&#x000A;  <span class="ruby-identifier">first_source_alias</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-first_source_alias'>
                <a name='method-i-first_source_alias'></a>
                <div class='synopsis'>
                  <span class='name'>first_source_alias</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The first source (primary table) for this dataset.  If the dataset
                  doesn&#39;t have a table, raises an <code>Error</code>.  If the table is
                  aliased, returns the aliased name.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first_source_alias</span>&#x000A;<span class="ruby-comment"># =&gt; :table</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table___t</span>].<span class="ruby-identifier">first_source_alias</span>&#x000A;<span class="ruby-comment"># =&gt; :t</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-first_source_alias-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-first_source_alias-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 93</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">first_source_alias</span>&#x000A;  <span class="ruby-identifier">source</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:from</span>]&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;No source specified for query&#39;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">s</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">first</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>&#x000A;    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">aliaz</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;    <span class="ruby-identifier">_</span>, <span class="ruby-identifier">_</span>, <span class="ruby-identifier">aliaz</span> = <span class="ruby-identifier">split_symbol</span>(<span class="ruby-identifier">s</span>)&#x000A;    <span class="ruby-identifier">aliaz</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">aliaz</span>.<span class="ruby-identifier">to_sym</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">s</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">s</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-first_source_table'>
                <a name='method-i-first_source_table'></a>
                <div class='synopsis'>
                  <span class='name'>first_source_table</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The first source (primary table) for this dataset.  If the dataset
                  doesn&#39;t have a table, raises an error.  If the table is aliased,
                  returns the original table, not the alias</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">first_source_table</span>&#x000A;<span class="ruby-comment"># =&gt; :table</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table___t</span>].<span class="ruby-identifier">first_source_table</span>&#x000A;<span class="ruby-comment"># =&gt; :table</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-first_source_table-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-first_source_table-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 118</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">first_source_table</span>&#x000A;  <span class="ruby-identifier">source</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:from</span>]&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;No source specified for query&#39;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">s</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">first</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>&#x000A;    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">expression</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;    <span class="ruby-identifier">sch</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">aliaz</span> = <span class="ruby-identifier">split_symbol</span>(<span class="ruby-identifier">s</span>)&#x000A;    <span class="ruby-identifier">aliaz</span> <span class="ruby-operator">?</span> (<span class="ruby-identifier">sch</span> <span class="ruby-operator">?</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sch</span>, <span class="ruby-identifier">table</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">table</span>.<span class="ruby-identifier">to_sym</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">s</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">s</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-freeze'>
                <a name='method-i-freeze'></a>
                <div class='synopsis'>
                  <span class='name'>freeze</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Sets the frozen flag on the dataset, so you can&#39;t modify it. Returns
                  the receiver.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-freeze-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-freeze-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 70</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">freeze</span>&#x000A;  <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:frozen</span>] = <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-frozen-3F'>
                <a name='method-i-frozen-3F'></a>
                <div class='synopsis'>
                  <span class='name'>frozen?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Whether the object is frozen.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-frozen-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-frozen-3F-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 76</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">frozen?</span>&#x000A;  <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:frozen</span>]&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-hash'>
                <a name='method-i-hash'></a>
                <div class='synopsis'>
                  <span class='name'>hash</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Define a hash value such that datasets with the same DB, opts, and <a
                  href="SQL.html">SQL</a> will have the same hash value</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-hash-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-hash-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 136</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">hash</span>&#x000A;  [<span class="ruby-identifier">db</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">sql</span>].<span class="ruby-identifier">hash</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-identifier_input_method'>
                <a name='method-i-identifier_input_method'></a>
                <div class='synopsis'>
                  <span class='name'>identifier_input_method</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The <a href="../String.html">String</a> instance method to call on
                  identifiers before sending them to the database.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-identifier_input_method-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-identifier_input_method-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 142</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">identifier_input_method</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@identifier_input_method</span>)&#x000A;    <span class="ruby-ivar">@identifier_input_method</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@identifier_input_method</span> = <span class="ruby-identifier">db</span>.<span class="ruby-identifier">identifier_input_method</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-identifier_output_method'>
                <a name='method-i-identifier_output_method'></a>
                <div class='synopsis'>
                  <span class='name'>identifier_output_method</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The <a href="../String.html">String</a> instance method to call on
                  identifiers before sending them to the database.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-identifier_output_method-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-identifier_output_method-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 152</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">identifier_output_method</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@identifier_output_method</span>)&#x000A;    <span class="ruby-ivar">@identifier_output_method</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@identifier_output_method</span> = <span class="ruby-identifier">db</span>.<span class="ruby-identifier">identifier_output_method</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-inspect'>
                <a name='method-i-inspect'></a>
                <div class='synopsis'>
                  <span class='name'>inspect</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a string representation of the dataset including the class name 
                  and the corresponding <a href="SQL.html">SQL</a> select statement.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-inspect-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-inspect-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 162</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>&#x000A;  <span class="ruby-node">&quot;#&lt;#{visible_class_name}: #{sql.inspect}&gt;&quot;</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-row_number_column'>
                <a name='method-i-row_number_column'></a>
                <div class='synopsis'>
                  <span class='name'>row_number_column</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The alias to use for the row_number column, used when emulating <a
                  href="Dataset.html#OFFSET">OFFSET</a> support and for eager limit
                  strategies</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-row_number_column-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-row_number_column-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 168</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">row_number_column</span>&#x000A;  <span class="ruby-value">:x_sequel_row_number_x</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-split_alias'>
                <a name='method-i-split_alias'></a>
                <div class='synopsis'>
                  <span class='name'>split_alias</span>
                  <span class='arguments'>(c)</span>
                </div>
                <div class='description'>
                  
                  <p>Splits a possible implicit alias in <code>c</code>, handling both
                  SQL::AliasedExpressions and Symbols.  Returns an array of two elements,
                  with the first being the main expression, and the second being the alias.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-split_alias-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-split_alias-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 175</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">split_alias</span>(<span class="ruby-identifier">c</span>)&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">c</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;    <span class="ruby-identifier">c_table</span>, <span class="ruby-identifier">column</span>, <span class="ruby-identifier">aliaz</span> = <span class="ruby-identifier">split_symbol</span>(<span class="ruby-identifier">c</span>)&#x000A;    [<span class="ruby-identifier">c_table</span> <span class="ruby-operator">?</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">c_table</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_sym</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_sym</span>, <span class="ruby-identifier">aliaz</span>]&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">AliasedExpression</span>&#x000A;    [<span class="ruby-identifier">c</span>.<span class="ruby-identifier">expression</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">aliaz</span>]&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">JoinClause</span>&#x000A;    [<span class="ruby-identifier">c</span>.<span class="ruby-identifier">table</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">table_alias</span>]&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    [<span class="ruby-identifier">c</span>, <span class="ruby-keyword">nil</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unused_table_alias'>
                <a name='method-i-unused_table_alias'></a>
                <div class='synopsis'>
                  <span class='name'>unused_table_alias</span>
                  <span class='arguments'>(table_alias, used_aliases = [])</span>
                </div>
                <div class='description'>
                  
                  <p>Creates a unique table alias that hasn&#39;t already been used in the
                  dataset. table_alias can be any type of object accepted by alias_symbol.
                  The symbol returned will be the implicit alias in the argument, possibly
                  appended with "_N" if the implicit alias has already been used, where N is
                  an integer starting at 0 and increasing until an unused one is found.</p>
                  
                  <p>You can provide a second addition array argument containing symbols that
                  should not be considered valid table aliases.  The current aliases for the
                  <a href="Dataset.html#FROM">FROM</a> and JOIN tables are automatically
                  included in this array.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">unused_table_alias</span>(:<span class="ruby-identifier">t</span>)&#x000A;<span class="ruby-comment"># =&gt; :t</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">unused_table_alias</span>(:<span class="ruby-identifier">table</span>)&#x000A;<span class="ruby-comment"># =&gt; :table_0</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>, :<span class="ruby-identifier">table_0</span>].<span class="ruby-identifier">unused_table_alias</span>(:<span class="ruby-identifier">table</span>)&#x000A;<span class="ruby-comment"># =&gt; :table_1</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>, :<span class="ruby-identifier">table_0</span>].<span class="ruby-identifier">unused_table_alias</span>(:<span class="ruby-identifier">table</span>, [:<span class="ruby-identifier">table_1</span>, :<span class="ruby-identifier">table_2</span>])&#x000A;<span class="ruby-comment"># =&gt; :table_3</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unused_table_alias-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unused_table_alias-source'><span class="ruby-comment"># File lib/sequel/dataset/misc.rb, line 211</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unused_table_alias</span>(<span class="ruby-identifier">table_alias</span>, <span class="ruby-identifier">used_aliases</span> = [])&#x000A;  <span class="ruby-identifier">table_alias</span> = <span class="ruby-identifier">alias_symbol</span>(<span class="ruby-identifier">table_alias</span>)&#x000A;  <span class="ruby-identifier">used_aliases</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:from</span>].<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">alias_symbol</span>(<span class="ruby-identifier">t</span>)} <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:from</span>]&#x000A;  <span class="ruby-identifier">used_aliases</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:join</span>].<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span> <span class="ruby-identifier">j</span>.<span class="ruby-identifier">table_alias</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">alias_alias_symbol</span>(<span class="ruby-identifier">j</span>.<span class="ruby-identifier">table_alias</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">alias_symbol</span>(<span class="ruby-identifier">j</span>.<span class="ruby-identifier">table</span>)} <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:join</span>]&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">used_aliases</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">table_alias</span>)&#x000A;    <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>&#x000A;    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>&#x000A;      <span class="ruby-identifier">ta</span> = <span class="ruby-value">:&quot;#{table_alias}_#{i}&quot;</span>&#x000A;      <span class="ruby-keyword">return</span> <span class="ruby-identifier">ta</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">used_aliases</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">ta</span>)&#x000A;      <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> &#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">table_alias</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='7+-+Mutation+methods'>7 - Mutation methods</a>
              <div class='section-comment'>
                
                <p>These methods modify the receiving dataset and should be used with care.</p>
              </div>
            </h2>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>MUTATION_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>QUERY_METHODS - [:naked, :from_self]</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>All methods that should have a ! method added that modifies the receiver.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-row_proc'>row_proc</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The <a href="Dataset.html#attribute-i-row_proc">#row_proc</a> for this
                      database, should be any object that responds to <code>call</code> with a
                      single hash argument and returns the object you want <a
                      href="Dataset.html#method-i-each">each</a> to return.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-def_mutation_method'>
                <a name='method-c-def_mutation_method'></a>
                <div class='synopsis'>
                  <span class='name'>def_mutation_method</span>
                  <span class='arguments'>(*meths)</span>
                </div>
                <div class='description'>
                  
                  <p>Setup mutation (e.g. filter!) methods.  These operate the same as the non-!
                  methods, but replace the options of the current dataset with the options of
                  the resulting dataset.</p>
                  
                  <p>Do not call this method with untrusted input, as that can result in
                  arbitrary code execution.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-def_mutation_method-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-def_mutation_method-source'><span class="ruby-comment"># File lib/sequel/dataset/mutation.rb, line 17</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">def_mutation_method</span>(*<span class="ruby-identifier">meths</span>)&#x000A;  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">meths</span>.<span class="ruby-identifier">pop</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">meths</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;  <span class="ruby-identifier">mod</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:module</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>&#x000A;  <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">self</span>&#x000A;  <span class="ruby-identifier">meths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">meth</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">class_eval</span>(<span class="ruby-node">&quot;def #{meth}!(*args, &amp;block); mutation_method(:#{meth}, *args, &amp;block) end&quot;</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-extension-21'>
                <a name='method-i-extension-21'></a>
                <div class='synopsis'>
                  <span class='name'>extension!</span>
                  <span class='arguments'>(*exts)</span>
                </div>
                <div class='description'>
                  
                  <p>Load an extension into the receiver.  In addition to requiring the
                  extension file, this also modifies the dataset to work with the extension
                  (usually extending it with a module defined in the extension file).  If no
                  related extension file exists or the extension does not have specific
                  support for <a href="Database.html">Database</a> objects, an <a
                  href="Error.html">Error</a> will be raised. Returns self.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-extension-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-extension-21-source'><span class="ruby-comment"># File lib/sequel/dataset/mutation.rb, line 38</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">extension!</span>(*<span class="ruby-identifier">exts</span>)&#x000A;  <span class="ruby-identifier">raise_if_frozen!</span>&#x000A;  <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">extension</span>(*<span class="ruby-identifier">exts</span>)&#x000A;  <span class="ruby-identifier">exts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">pr</span> = <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-constant">EXTENSIONS</span>[<span class="ruby-identifier">ext</span>]}&#x000A;      <span class="ruby-identifier">pr</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword">self</span>)&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Extension #{ext} does not have specific support handling individual datasets&quot;</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-from_self-21'>
                <a name='method-i-from_self-21'></a>
                <div class='synopsis'>
                  <span class='name'>from_self!</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Avoid self-referential dataset by cloning.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-from_self-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-from_self-21-source'><span class="ruby-comment"># File lib/sequel/dataset/mutation.rb, line 52</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_self!</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">raise_if_frozen!</span>&#x000A;  <span class="ruby-ivar">@opts</span> = <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">from_self</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>).<span class="ruby-identifier">opts</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-identifier_input_method-3D'>
                <a name='method-i-identifier_input_method-3D'></a>
                <div class='synopsis'>
                  <span class='name'>identifier_input_method=</span>
                  <span class='arguments'>(v)</span>
                </div>
                <div class='description'>
                  
                  <p>Set the method to call on identifiers going into the database for this
                  dataset</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-identifier_input_method-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-identifier_input_method-3D-source'><span class="ruby-comment"># File lib/sequel/dataset/mutation.rb, line 59</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">identifier_input_method=</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-identifier">raise_if_frozen!</span>&#x000A;  <span class="ruby-ivar">@identifier_input_method</span> = <span class="ruby-identifier">v</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-identifier_output_method-3D'>
                <a name='method-i-identifier_output_method-3D'></a>
                <div class='synopsis'>
                  <span class='name'>identifier_output_method=</span>
                  <span class='arguments'>(v)</span>
                </div>
                <div class='description'>
                  
                  <p>Set the method to call on identifiers coming the database for this dataset</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-identifier_output_method-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-identifier_output_method-3D-source'><span class="ruby-comment"># File lib/sequel/dataset/mutation.rb, line 65</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">identifier_output_method=</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-identifier">raise_if_frozen!</span>&#x000A;  <span class="ruby-ivar">@identifier_output_method</span> = <span class="ruby-identifier">v</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-naked-21'>
                <a name='method-i-naked-21'></a>
                <div class='synopsis'>
                  <span class='name'>naked!</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Remove the <a href="Dataset.html#attribute-i-row_proc">#row_proc</a> from
                  the current dataset.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-naked-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-naked-21-source'><span class="ruby-comment"># File lib/sequel/dataset/mutation.rb, line 71</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">naked!</span>&#x000A;  <span class="ruby-identifier">raise_if_frozen!</span>&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">row_proc</span> = <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-quote_identifiers-3D'>
                <a name='method-i-quote_identifiers-3D'></a>
                <div class='synopsis'>
                  <span class='name'>quote_identifiers=</span>
                  <span class='arguments'>(v)</span>
                </div>
                <div class='description'>
                  
                  <p>Set whether to quote identifiers for this dataset</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-quote_identifiers-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-quote_identifiers-3D-source'><span class="ruby-comment"># File lib/sequel/dataset/mutation.rb, line 78</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">quote_identifiers=</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-identifier">raise_if_frozen!</span>&#x000A;  <span class="ruby-ivar">@quote_identifiers</span> = <span class="ruby-identifier">v</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-row_proc-3D'>
                <a name='method-i-row_proc-3D'></a>
                <div class='synopsis'>
                  <span class='name'>row_proc=</span>
                  <span class='arguments'>(v)</span>
                </div>
                <div class='description'>
                  
                  <p>Override the <a href="Dataset.html#attribute-i-row_proc">#row_proc</a> for
                  this dataset</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-row_proc-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-row_proc-3D-source'><span class="ruby-comment"># File lib/sequel/dataset/mutation.rb, line 84</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">row_proc=</span>(<span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-identifier">raise_if_frozen!</span>&#x000A;  <span class="ruby-ivar">@row_proc</span> = <span class="ruby-identifier">v</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='8+-+Methods+related+to+prepared+statements+or+bound+variables'>8 - Methods related to prepared statements or bound variables</a>
              <div class='section-comment'>
                
                <p>On some adapters, these use native prepared statements and bound variables,
                on others support is emulated.  For details, see the <a
                href="../../files/doc/prepared_statements_rdoc.html">"Prepared
                Statements/Bound Variables" guide</a></p>
              </div>
            </h2>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>PREPARED_ARG_PLACEHOLDER</td>
                    <td>=</td>
                    <td class='context-item-value'>LiteralString.new('?').freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-bind'>
                <a name='method-i-bind'></a>
                <div class='synopsis'>
                  <span class='name'>bind</span>
                  <span class='arguments'>(bind_vars={})</span>
                </div>
                <div class='description'>
                  
                  <p>Set the bind variables to use for the call.  If bind variables have already
                  been set for this dataset, they are updated with the contents of bind_vars.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">filter</span>(:<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">$id</span>).<span class="ruby-identifier">bind</span>(:<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>).<span class="ruby-identifier">call</span>(:<span class="ruby-identifier">first</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM table WHERE id = ? LIMIT 1 -- (1)</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;1}</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-bind-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-bind-source'><span class="ruby-comment"># File lib/sequel/dataset/prepared_statements.rb, line 217</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">bind</span>(<span class="ruby-identifier">bind_vars</span>={})&#x000A;  <span class="ruby-identifier">clone</span>(<span class="ruby-value">:bind_vars=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@opts</span>[<span class="ruby-value">:bind_vars</span>] <span class="ruby-operator">?</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:bind_vars</span>].<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">bind_vars</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">bind_vars</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-call'>
                <a name='method-i-call'></a>
                <div class='synopsis'>
                  <span class='name'>call</span>
                  <span class='arguments'>(type, bind_variables={}, *values, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>For the given type (:select, :first, :insert, :insert_select, :update, or
                  :delete), run the sql with the bind variables specified in the hash. 
                  <code>values</code> is a hash passed to insert or update (if one of those
                  types is used), which may contain placeholders.</p>
                  
                  <pre class="ruby"><span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">filter</span>(:<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">$id</span>).<span class="ruby-identifier">call</span>(:<span class="ruby-identifier">first</span>, :<span class="ruby-identifier">id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM table WHERE id = ? LIMIT 1 -- (1)</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;1}</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-call-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-call-source'><span class="ruby-comment"># File lib/sequel/dataset/prepared_statements.rb, line 228</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">call</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">bind_variables</span>={}, *<span class="ruby-identifier">values</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">prepare</span>(<span class="ruby-identifier">type</span>, <span class="ruby-keyword">nil</span>, *<span class="ruby-identifier">values</span>).<span class="ruby-identifier">call</span>(<span class="ruby-identifier">bind_variables</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-prepare'>
                <a name='method-i-prepare'></a>
                <div class='synopsis'>
                  <span class='name'>prepare</span>
                  <span class='arguments'>(type, name=nil, *values)</span>
                </div>
                <div class='description'>
                  
                  <p>Prepare an <a href="SQL.html">SQL</a> statement for later execution.  Takes
                  a type similar to <a href="Dataset.html#method-i-call">call</a>, and the
                  <code>name</code> symbol of the prepared statement.  While
                  <code>name</code> defaults to <code>nil</code>, it should always be
                  provided as a symbol for the name of the prepared statement, as some
                  databases require that prepared statements have names.</p>
                  
                  <p>This returns a clone of the dataset extended with <a
                  href="Dataset/PreparedStatementMethods.html">PreparedStatementMethods</a>,
                  which you can <code>call</code> with the hash of bind variables to use. The
                  prepared statement is also stored in the associated database, where it can
                  be called by name. The following usage is identical:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">ps</span> = <span class="ruby-constant">DB</span>[:<span class="ruby-identifier">table</span>].<span class="ruby-identifier">filter</span>(:<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">$name</span>).<span class="ruby-identifier">prepare</span>(:<span class="ruby-identifier">first</span>, :<span class="ruby-identifier">select_by_name</span>)&#x000A;&#x000A;<span class="ruby-identifier">ps</span>.<span class="ruby-identifier">call</span>(:<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;Blah&#39;</span>)&#x000A;<span class="ruby-comment"># SELECT * FROM table WHERE name = ? -- (&#39;Blah&#39;)</span>&#x000A;<span class="ruby-comment"># =&gt; {:id=&gt;1, :name=&gt;&#39;Blah&#39;}</span>&#x000A;&#x000A;<span class="ruby-constant">DB</span>.<span class="ruby-identifier">call</span>(:<span class="ruby-identifier">select_by_name</span>, :<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;Blah&#39;</span>) <span class="ruby-comment"># Same thing</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-prepare-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-prepare-source'><span class="ruby-comment"># File lib/sequel/dataset/prepared_statements.rb, line 250</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">prepare</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">name</span>=<span class="ruby-keyword">nil</span>, *<span class="ruby-identifier">values</span>)&#x000A;  <span class="ruby-identifier">ps</span> = <span class="ruby-identifier">to_prepared_statement</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">values</span>)&#x000A;  <span class="ruby-identifier">db</span>.<span class="ruby-identifier">set_prepared_statement</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ps</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>&#x000A;  <span class="ruby-identifier">ps</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Protected Instance methods</h2>
              <div class='method protected-instance' id='method-method-i-to_prepared_statement'>
                <a name='method-i-to_prepared_statement'></a>
                <div class='synopsis'>
                  <span class='name'>to_prepared_statement</span>
                  <span class='arguments'>(type, values=nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Return a cloned copy of the current dataset extended with <a
                  href="Dataset/PreparedStatementMethods.html">PreparedStatementMethods</a>,
                  setting the type and modify values.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-to_prepared_statement-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-to_prepared_statement-source'><span class="ruby-comment"># File lib/sequel/dataset/prepared_statements.rb, line 260</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_prepared_statement</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">values</span>=<span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">ps</span> = <span class="ruby-identifier">bind</span>&#x000A;  <span class="ruby-identifier">ps</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-constant">PreparedStatementMethods</span>)&#x000A;  <span class="ruby-identifier">ps</span>.<span class="ruby-identifier">orig_dataset</span> = <span class="ruby-keyword">self</span>&#x000A;  <span class="ruby-identifier">ps</span>.<span class="ruby-identifier">prepared_type</span> = <span class="ruby-identifier">type</span>&#x000A;  <span class="ruby-identifier">ps</span>.<span class="ruby-identifier">prepared_modify_values</span> = <span class="ruby-identifier">values</span>&#x000A;  <span class="ruby-identifier">ps</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
          <div id='section'>
            <h2>
              <a name='9+-+Internal+Methods+relating+to+SQL+Creation'>9 - Internal Methods relating to SQL Creation</a>
              <div class='section-comment'>
                
                <p>These methods, while public, are not designed to be used directly by the
                end user.</p>
              </div>
            </h2>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ALL</td>
                    <td>=</td>
                    <td class='context-item-value'>' ALL'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>AND_SEPARATOR</td>
                    <td>=</td>
                    <td class='context-item-value'>" AND ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>APOS</td>
                    <td>=</td>
                    <td class='context-item-value'>"'".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>APOS_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/'/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ARRAY_EMPTY</td>
                    <td>=</td>
                    <td class='context-item-value'>'(NULL)'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>AS</td>
                    <td>=</td>
                    <td class='context-item-value'>' AS '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ASC</td>
                    <td>=</td>
                    <td class='context-item-value'>' ASC'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BACKSLASH</td>
                    <td>=</td>
                    <td class='context-item-value'>"\\".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BOOL_FALSE</td>
                    <td>=</td>
                    <td class='context-item-value'>"'f'".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BOOL_TRUE</td>
                    <td>=</td>
                    <td class='context-item-value'>"'t'".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BRACKET_CLOSE</td>
                    <td>=</td>
                    <td class='context-item-value'>']'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BRACKET_OPEN</td>
                    <td>=</td>
                    <td class='context-item-value'>'['.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CASE_ELSE</td>
                    <td>=</td>
                    <td class='context-item-value'>" ELSE ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CASE_END</td>
                    <td>=</td>
                    <td class='context-item-value'>" END)".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CASE_OPEN</td>
                    <td>=</td>
                    <td class='context-item-value'>'(CASE'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CASE_THEN</td>
                    <td>=</td>
                    <td class='context-item-value'>" THEN ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CASE_WHEN</td>
                    <td>=</td>
                    <td class='context-item-value'>" WHEN ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CAST_OPEN</td>
                    <td>=</td>
                    <td class='context-item-value'>'CAST('.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COLON</td>
                    <td>=</td>
                    <td class='context-item-value'>':'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COLUMN_REF_RE1</td>
                    <td>=</td>
                    <td class='context-item-value'>Sequel::COLUMN_REF_RE1</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COLUMN_REF_RE2</td>
                    <td>=</td>
                    <td class='context-item-value'>Sequel::COLUMN_REF_RE2</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COLUMN_REF_RE3</td>
                    <td>=</td>
                    <td class='context-item-value'>Sequel::COLUMN_REF_RE3</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COMMA</td>
                    <td>=</td>
                    <td class='context-item-value'>', '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COMMA_SEPARATOR</td>
                    <td>=</td>
                    <td class='context-item-value'>COMMA</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CONDITION_FALSE</td>
                    <td>=</td>
                    <td class='context-item-value'>'(1 = 0)'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CONDITION_TRUE</td>
                    <td>=</td>
                    <td class='context-item-value'>'(1 = 1)'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COUNT_FROM_SELF_OPTS</td>
                    <td>=</td>
                    <td class='context-item-value'>[:distinct, :group, :sql, :limit, :offset, :compounds]</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>COUNT_OF_ALL_AS_COUNT</td>
                    <td>=</td>
                    <td class='context-item-value'>SQL::Function.new(:count, WILDCARD).as(:count)</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DATASET_ALIAS_BASE_NAME</td>
                    <td>=</td>
                    <td class='context-item-value'>'t'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DEFAULT</td>
                    <td>=</td>
                    <td class='context-item-value'>LiteralString.new('DEFAULT').freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DEFAULT_VALUES</td>
                    <td>=</td>
                    <td class='context-item-value'>" DEFAULT VALUES".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DELETE</td>
                    <td>=</td>
                    <td class='context-item-value'>'DELETE'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DELETE_CLAUSE_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>clause_methods(:delete, %w'delete from where')</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DESC</td>
                    <td>=</td>
                    <td class='context-item-value'>' DESC'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DISTINCT</td>
                    <td>=</td>
                    <td class='context-item-value'>" DISTINCT".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DOT</td>
                    <td>=</td>
                    <td class='context-item-value'>'.'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DOUBLE_APOS</td>
                    <td>=</td>
                    <td class='context-item-value'>"''".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DOUBLE_QUOTE</td>
                    <td>=</td>
                    <td class='context-item-value'>'""'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>EMULATED_FUNCTION_MAP</td>
                    <td>=</td>
                    <td class='context-item-value'>{}</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Map of emulated function names to native function names.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>EQUAL</td>
                    <td>=</td>
                    <td class='context-item-value'>' = '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ESCAPE</td>
                    <td>=</td>
                    <td class='context-item-value'>" ESCAPE ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>EXISTS</td>
                    <td>=</td>
                    <td class='context-item-value'>['EXISTS '.freeze].freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>EXTRACT</td>
                    <td>=</td>
                    <td class='context-item-value'>'extract('.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FORMAT_DATE</td>
                    <td>=</td>
                    <td class='context-item-value'>"'%Y-%m-%d'".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FORMAT_DATE_STANDARD</td>
                    <td>=</td>
                    <td class='context-item-value'>"DATE '%Y-%m-%d'".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FORMAT_OFFSET</td>
                    <td>=</td>
                    <td class='context-item-value'>"%+03i%02i".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FORMAT_TIMESTAMP_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/%[Nz]/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FORMAT_TIMESTAMP_USEC</td>
                    <td>=</td>
                    <td class='context-item-value'>".%06d".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FORMAT_USEC</td>
                    <td>=</td>
                    <td class='context-item-value'>'%N'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FOR_UPDATE</td>
                    <td>=</td>
                    <td class='context-item-value'>' FOR UPDATE'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FRAME_ALL</td>
                    <td>=</td>
                    <td class='context-item-value'>"ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FRAME_ROWS</td>
                    <td>=</td>
                    <td class='context-item-value'>"ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FROM</td>
                    <td>=</td>
                    <td class='context-item-value'>' FROM '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FUNCTION_EMPTY</td>
                    <td>=</td>
                    <td class='context-item-value'>'()'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>GROUP_BY</td>
                    <td>=</td>
                    <td class='context-item-value'>" GROUP BY ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>HAVING</td>
                    <td>=</td>
                    <td class='context-item-value'>" HAVING ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>INSERT</td>
                    <td>=</td>
                    <td class='context-item-value'>"INSERT".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>INSERT_CLAUSE_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>clause_methods(:insert, %w'insert into columns values')</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>INTO</td>
                    <td>=</td>
                    <td class='context-item-value'>" INTO ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>IS_LITERALS</td>
                    <td>=</td>
                    <td class='context-item-value'>{nil=>'NULL'.freeze, true=>'TRUE'.freeze, false=>'FALSE'.freeze}.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>IS_OPERATORS</td>
                    <td>=</td>
                    <td class='context-item-value'>::Sequel::SQL::ComplexExpression::IS_OPERATORS</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>LATERAL</td>
                    <td>=</td>
                    <td class='context-item-value'>'LATERAL '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>LIKE_OPERATORS</td>
                    <td>=</td>
                    <td class='context-item-value'>::Sequel::SQL::ComplexExpression::LIKE_OPERATORS</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>LIMIT</td>
                    <td>=</td>
                    <td class='context-item-value'>" LIMIT ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>NOT_SPACE</td>
                    <td>=</td>
                    <td class='context-item-value'>'NOT '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>NULL</td>
                    <td>=</td>
                    <td class='context-item-value'>"NULL".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>NULLS_FIRST</td>
                    <td>=</td>
                    <td class='context-item-value'>" NULLS FIRST".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>NULLS_LAST</td>
                    <td>=</td>
                    <td class='context-item-value'>" NULLS LAST".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>N_ARITY_OPERATORS</td>
                    <td>=</td>
                    <td class='context-item-value'>::Sequel::SQL::ComplexExpression::N_ARITY_OPERATORS</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>OFFSET</td>
                    <td>=</td>
                    <td class='context-item-value'>" OFFSET ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ON</td>
                    <td>=</td>
                    <td class='context-item-value'>' ON '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ON_PAREN</td>
                    <td>=</td>
                    <td class='context-item-value'>" ON (".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ORDER_BY</td>
                    <td>=</td>
                    <td class='context-item-value'>" ORDER BY ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ORDER_BY_NS</td>
                    <td>=</td>
                    <td class='context-item-value'>"ORDER BY ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>OVER</td>
                    <td>=</td>
                    <td class='context-item-value'>' OVER '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>PAREN_CLOSE</td>
                    <td>=</td>
                    <td class='context-item-value'>')'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>PAREN_OPEN</td>
                    <td>=</td>
                    <td class='context-item-value'>'('.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>PAREN_SPACE_OPEN</td>
                    <td>=</td>
                    <td class='context-item-value'>' ('.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>PARTITION_BY</td>
                    <td>=</td>
                    <td class='context-item-value'>"PARTITION BY ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUALIFY_KEYS</td>
                    <td>=</td>
                    <td class='context-item-value'>[:select, :where, :having, :order, :group]</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUESTION_MARK</td>
                    <td>=</td>
                    <td class='context-item-value'>'?'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUESTION_MARK_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/\?/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUOTE</td>
                    <td>=</td>
                    <td class='context-item-value'>'"'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>QUOTE_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>/"/.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>REGEXP_OPERATORS</td>
                    <td>=</td>
                    <td class='context-item-value'>::Sequel::SQL::ComplexExpression::REGEXP_OPERATORS</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>RETURNING</td>
                    <td>=</td>
                    <td class='context-item-value'>" RETURNING ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>SELECT</td>
                    <td>=</td>
                    <td class='context-item-value'>'SELECT'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>SELECT_CLAUSE_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>clause_methods(:select, %w'with select distinct columns from join where group having compounds order limit lock')</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>SET</td>
                    <td>=</td>
                    <td class='context-item-value'>' SET '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>SPACE</td>
                    <td>=</td>
                    <td class='context-item-value'>' '.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>SPACE_WITH</td>
                    <td>=</td>
                    <td class='context-item-value'>" WITH ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>SQL_WITH</td>
                    <td>=</td>
                    <td class='context-item-value'>"WITH ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>STANDARD_TIMESTAMP_FORMAT</td>
                    <td>=</td>
                    <td class='context-item-value'>"TIMESTAMP #{TIMESTAMP_FORMAT}".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>TILDE</td>
                    <td>=</td>
                    <td class='context-item-value'>'~'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>TIMESTAMP_FORMAT</td>
                    <td>=</td>
                    <td class='context-item-value'>"'%Y-%m-%d %H:%M:%S%N%z'".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>TWO_ARITY_OPERATORS</td>
                    <td>=</td>
                    <td class='context-item-value'>::Sequel::SQL::ComplexExpression::TWO_ARITY_OPERATORS</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>UNDERSCORE</td>
                    <td>=</td>
                    <td class='context-item-value'>'_'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>UPDATE</td>
                    <td>=</td>
                    <td class='context-item-value'>'UPDATE'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>UPDATE_CLAUSE_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>clause_methods(:update, %w'update table set where')</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>USING</td>
                    <td>=</td>
                    <td class='context-item-value'>' USING ('.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>V190</td>
                    <td>=</td>
                    <td class='context-item-value'>'1.9.0'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>VALUES</td>
                    <td>=</td>
                    <td class='context-item-value'>" VALUES ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>WHERE</td>
                    <td>=</td>
                    <td class='context-item-value'>" WHERE ".freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>WILDCARD</td>
                    <td>=</td>
                    <td class='context-item-value'>LiteralString.new('*').freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-clause_methods'>
                <a name='method-c-clause_methods'></a>
                <div class='synopsis'>
                  <span class='name'>clause_methods</span>
                  <span class='arguments'>(type, clauses)</span>
                </div>
                <div class='description'>
                  
                  <p>Given a type (e.g. select) and an array of clauses, return an array of
                  methods to call to build the <a href="SQL.html">SQL</a> string.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-clause_methods-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-clause_methods-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 177</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">clause_methods</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">clauses</span>)&#x000A;  <span class="ruby-identifier">clauses</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">clause</span><span class="ruby-operator">|</span> <span class="ruby-value">:&quot;#{type}_#{clause}_sql&quot;</span>}.<span class="ruby-identifier">freeze</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-aliased_expression_sql_append'>
                <a name='method-i-aliased_expression_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>aliased_expression_sql_append</span>
                  <span class='arguments'>(sql, ae)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for AliasedExpression</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-aliased_expression_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-aliased_expression_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 299</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">aliased_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">ae</span>)&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">ae</span>.<span class="ruby-identifier">expression</span>)&#x000A;  <span class="ruby-identifier">as_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">ae</span>.<span class="ruby-identifier">aliaz</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-array_sql_append'>
                <a name='method-i-array_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>array_sql_append</span>
                  <span class='arguments'>(sql, a)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for <a href="../Array.html">Array</a></p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-array_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-array_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 305</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">array_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">a</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ARRAY_EMPTY</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span>&#x000A;    <span class="ruby-identifier">expression_list_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">a</span>)&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-boolean_constant_sql_append'>
                <a name='method-i-boolean_constant_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>boolean_constant_sql_append</span>
                  <span class='arguments'>(sql, constant)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for BooleanConstants</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-boolean_constant_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-boolean_constant_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 316</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">boolean_constant_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">constant</span>)&#x000A;  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">constant</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">constant</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">supports_where_true?</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">constant</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">?</span> <span class="ruby-constant">CONDITION_TRUE</span> <span class="ruby-operator">:</span> <span class="ruby-constant">CONDITION_FALSE</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">constant</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-case_expression_sql_append'>
                <a name='method-i-case_expression_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>case_expression_sql_append</span>
                  <span class='arguments'>(sql, ce)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for CaseExpression</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-case_expression_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-case_expression_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 325</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">case_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">ce</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">CASE_OPEN</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">ce</span>.<span class="ruby-identifier">expression?</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">ce</span>.<span class="ruby-identifier">expression</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">w</span> = <span class="ruby-constant">CASE_WHEN</span>&#x000A;  <span class="ruby-identifier">t</span> = <span class="ruby-constant">CASE_THEN</span>&#x000A;  <span class="ruby-identifier">ce</span>.<span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">r</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">w</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">c</span>)&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">t</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">r</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">CASE_ELSE</span>&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">ce</span>.<span class="ruby-identifier">default</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">CASE_END</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-cast_sql_append'>
                <a name='method-i-cast_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>cast_sql_append</span>
                  <span class='arguments'>(sql, expr, type)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for the <a href="SQL.html">SQL</a> CAST
                  expression</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-cast_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-cast_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 345</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">cast_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">expr</span>, <span class="ruby-identifier">type</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">CAST_OPEN</span>&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">expr</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">AS</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">db</span>.<span class="ruby-identifier">cast_type_literal</span>(<span class="ruby-identifier">type</span>).<span class="ruby-identifier">to_s</span>&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-column_all_sql_append'>
                <a name='method-i-column_all_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>column_all_sql_append</span>
                  <span class='arguments'>(sql, ca)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for specifying all columns in a given
                  table</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-column_all_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-column_all_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 353</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">column_all_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">ca</span>)&#x000A;  <span class="ruby-identifier">qualified_identifier_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">ca</span>.<span class="ruby-identifier">table</span>, <span class="ruby-constant">WILDCARD</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-complex_expression_sql_append'>
                <a name='method-i-complex_expression_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>complex_expression_sql_append</span>
                  <span class='arguments'>(sql, op, args)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for the complex expression.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-complex_expression_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-complex_expression_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 358</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">complex_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">op</span>, <span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">op</span>&#x000A;  <span class="ruby-keyword">when</span> *<span class="ruby-constant">IS_OPERATORS</span>&#x000A;    <span class="ruby-identifier">r</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">1</span>)&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">supports_is_true?</span>&#x000A;      <span class="ruby-identifier">raise</span>(<span class="ruby-constant">InvalidOperation</span>, <span class="ruby-string">&#39;Invalid argument used for IS operator&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">val</span> = <span class="ruby-constant">IS_LITERALS</span>[<span class="ruby-identifier">r</span>]&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span>&#x000A;      <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>))&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">val</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">op</span> <span class="ruby-operator">==</span> <span class="ruby-value">:IS</span>&#x000A;      <span class="ruby-identifier">complex_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-value">:&quot;=&quot;</span>, <span class="ruby-identifier">args</span>)&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">complex_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-value">:OR</span>, [<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:&quot;!=&quot;</span>, *<span class="ruby-identifier">args</span>), <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:IS</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>), <span class="ruby-keyword">nil</span>)])&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:IN</span>, <span class="ruby-value">:&quot;NOT IN&quot;</span>&#x000A;    <span class="ruby-identifier">cols</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>)&#x000A;    <span class="ruby-identifier">vals</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">1</span>)&#x000A;    <span class="ruby-identifier">col_array</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cols</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;      <span class="ruby-identifier">val_array</span> = <span class="ruby-keyword">true</span>&#x000A;      <span class="ruby-identifier">empty_val_array</span> = <span class="ruby-identifier">vals</span> <span class="ruby-operator">==</span> []&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">empty_val_array</span>&#x000A;      <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">empty_array_value</span>(<span class="ruby-identifier">op</span>, <span class="ruby-identifier">cols</span>))&#x000A;    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">col_array</span>&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">supports_multiple_column_in?</span>&#x000A;        <span class="ruby-keyword">if</span> <span class="ruby-identifier">val_array</span>&#x000A;          <span class="ruby-identifier">expr</span> = <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:OR</span>, *<span class="ruby-identifier">vals</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">vs</span><span class="ruby-operator">|</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">BooleanExpression</span>.<span class="ruby-identifier">from_value_pairs</span>(<span class="ruby-identifier">cols</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">vs</span>).<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">c</span>, <span class="ruby-identifier">v</span>]})})&#x000A;          <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">op</span> <span class="ruby-operator">==</span> <span class="ruby-value">:IN</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">expr</span> <span class="ruby-operator">:</span> <span class="ruby-operator">~</span><span class="ruby-identifier">expr</span>)&#x000A;        <span class="ruby-keyword">else</span>&#x000A;          <span class="ruby-identifier">old_vals</span> = <span class="ruby-identifier">vals</span>&#x000A;          <span class="ruby-identifier">vals</span> = <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">naked</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Dataset</span>)&#x000A;          <span class="ruby-identifier">vals</span> = <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">to_a</span>&#x000A;          <span class="ruby-identifier">val_cols</span> = <span class="ruby-identifier">old_vals</span>.<span class="ruby-identifier">columns</span>&#x000A;          <span class="ruby-identifier">complex_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">op</span>, [<span class="ruby-identifier">cols</span>, <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">map!</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">values_at</span>(*<span class="ruby-identifier">val_cols</span>)}])&#x000A;        <span class="ruby-keyword">end</span>&#x000A;      <span class="ruby-keyword">else</span>&#x000A;        <span class="ruby-comment"># If the columns and values are both arrays, use array_sql instead of</span>&#x000A;        <span class="ruby-comment"># literal so that if values is an array of two element arrays, it</span>&#x000A;        <span class="ruby-comment"># will be treated as a value list instead of a condition specifier.</span>&#x000A;        <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span>&#x000A;        <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">cols</span>)&#x000A;        <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span>&#x000A;        <span class="ruby-keyword">if</span> <span class="ruby-identifier">val_array</span>&#x000A;          <span class="ruby-identifier">array_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">vals</span>)&#x000A;        <span class="ruby-keyword">else</span>&#x000A;          <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">vals</span>)&#x000A;        <span class="ruby-keyword">end</span>&#x000A;        <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span>&#x000A;      <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">cols</span>)&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span>&#x000A;      <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">vals</span>)&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:LIKE</span>, <span class="ruby-value">:&#39;NOT LIKE&#39;</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>))&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">1</span>))&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ESCAPE</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-constant">BACKSLASH</span>)&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:ILIKE</span>, <span class="ruby-value">:&#39;NOT ILIKE&#39;</span>&#x000A;    <span class="ruby-identifier">complex_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, (<span class="ruby-identifier">op</span> <span class="ruby-operator">==</span> <span class="ruby-value">:ILIKE</span> <span class="ruby-operator">?</span> <span class="ruby-value">:LIKE</span> <span class="ruby-operator">:</span> <span class="ruby-value">:&quot;NOT LIKE&quot;</span>), <span class="ruby-identifier">args</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-constant">Sequel</span>.<span class="ruby-identifier">function</span>(<span class="ruby-value">:UPPER</span>, <span class="ruby-identifier">v</span>)})&#x000A;  <span class="ruby-keyword">when</span> *<span class="ruby-constant">TWO_ARITY_OPERATORS</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-constant">REGEXP_OPERATORS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">op</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">supports_regexp?</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidOperation</span>, <span class="ruby-node">&quot;Pattern matching via regular expressions is not supported on #{db.database_type}&quot;</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>))&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">1</span>))&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;  <span class="ruby-keyword">when</span> *<span class="ruby-constant">N_ARITY_OPERATORS</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span>&#x000A;    <span class="ruby-identifier">c</span> = <span class="ruby-keyword">false</span>&#x000A;    <span class="ruby-identifier">op_str</span> = <span class="ruby-node">&quot; #{op} &quot;</span>&#x000A;    <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op_str</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span>&#x000A;      <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">a</span>)&#x000A;      <span class="ruby-identifier">c</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">true</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:NOT</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">NOT_SPACE</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>))&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:NOOP</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>))&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:&#39;B~&#39;</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">TILDE</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>))&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:extract</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">EXTRACT</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>).<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">FROM</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">1</span>))&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">InvalidOperation</span>, <span class="ruby-node">&quot;invalid operator #{op}&quot;</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-constant_sql_append'>
                <a name='method-i-constant_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>constant_sql_append</span>
                  <span class='arguments'>(sql, constant)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for constants</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-constant_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-constant_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 463</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">constant_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">constant</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">constant</span>.<span class="ruby-identifier">to_s</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-delayed_evaluation_sql_append'>
                <a name='method-i-delayed_evaluation_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>delayed_evaluation_sql_append</span>
                  <span class='arguments'>(sql, callable)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for delayed evaluations, evaluating the
                  object and literalizing the returned value.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-delayed_evaluation_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-delayed_evaluation_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 469</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">delayed_evaluation_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">callable</span>)&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">callable</span>.<span class="ruby-identifier">call</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-emulated_function_sql_append'>
                <a name='method-i-emulated_function_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>emulated_function_sql_append</span>
                  <span class='arguments'>(sql, f)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment specifying an emulated <a
                  href="SQL.html">SQL</a> function call. By default, assumes just the
                  function name may need to be emulated, adapters should set an <a
                  href="Dataset.html#EMULATED_FUNCTION_MAP">EMULATED_FUNCTION_MAP</a> hash
                  mapping emulated functions to native functions in their dataset class to
                  setup the emulation.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-emulated_function_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-emulated_function_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 478</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">emulated_function_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">f</span>)&#x000A;  <span class="ruby-identifier">_function_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">native_function_name</span>(<span class="ruby-identifier">f</span>.<span class="ruby-identifier">f</span>), <span class="ruby-identifier">f</span>.<span class="ruby-identifier">args</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-function_sql_append'>
                <a name='method-i-function_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>function_sql_append</span>
                  <span class='arguments'>(sql, f)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment specifying an <a
                  href="SQL.html">SQL</a> function call without emulation.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-function_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-function_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 483</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">function_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">f</span>)&#x000A;  <span class="ruby-identifier">_function_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">f</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">args</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-join_clause_sql_append'>
                <a name='method-i-join_clause_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>join_clause_sql_append</span>
                  <span class='arguments'>(sql, jc)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment specifying a JOIN clause without <a
                  href="Dataset.html#ON">ON</a> or <a href="Dataset.html#USING">USING</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-join_clause_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-join_clause_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 488</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">join_clause_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">jc</span>)&#x000A;  <span class="ruby-identifier">table</span> = <span class="ruby-identifier">jc</span>.<span class="ruby-identifier">table</span>&#x000A;  <span class="ruby-identifier">table_alias</span> = <span class="ruby-identifier">jc</span>.<span class="ruby-identifier">table_alias</span>&#x000A;  <span class="ruby-identifier">table_alias</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">table</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">table_alias</span>&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">join_type_sql</span>(<span class="ruby-identifier">jc</span>.<span class="ruby-identifier">join_type</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SPACE</span>&#x000A;  <span class="ruby-identifier">identifier_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">table</span>)&#x000A;  <span class="ruby-identifier">as_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">table_alias</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">table_alias</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-join_on_clause_sql_append'>
                <a name='method-i-join_on_clause_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>join_on_clause_sql_append</span>
                  <span class='arguments'>(sql, jc)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment specifying a JOIN clause with <a
                  href="Dataset.html#ON">ON</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-join_on_clause_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-join_on_clause_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 498</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">join_on_clause_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">jc</span>)&#x000A;  <span class="ruby-identifier">join_clause_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">jc</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ON</span>&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">filter_expr</span>(<span class="ruby-identifier">jc</span>.<span class="ruby-identifier">on</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-join_using_clause_sql_append'>
                <a name='method-i-join_using_clause_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>join_using_clause_sql_append</span>
                  <span class='arguments'>(sql, jc)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment specifying a JOIN clause with <a
                  href="Dataset.html#USING">USING</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-join_using_clause_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-join_using_clause_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 505</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">join_using_clause_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">jc</span>)&#x000A;  <span class="ruby-identifier">join_clause_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">jc</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">USING</span>&#x000A;  <span class="ruby-identifier">column_list_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">jc</span>.<span class="ruby-identifier">using</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-negative_boolean_constant_sql_append'>
                <a name='method-i-negative_boolean_constant_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>negative_boolean_constant_sql_append</span>
                  <span class='arguments'>(sql, constant)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for NegativeBooleanConstants</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-negative_boolean_constant_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-negative_boolean_constant_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 513</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">negative_boolean_constant_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">constant</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">NOT_SPACE</span>&#x000A;  <span class="ruby-identifier">boolean_constant_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">constant</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-ordered_expression_sql_append'>
                <a name='method-i-ordered_expression_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>ordered_expression_sql_append</span>
                  <span class='arguments'>(sql, oe)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for the ordered expression, used in the
                  ORDER BY clause.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-ordered_expression_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-ordered_expression_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 520</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">ordered_expression_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">oe</span>)&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">oe</span>.<span class="ruby-identifier">expression</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">oe</span>.<span class="ruby-identifier">descending</span> <span class="ruby-operator">?</span> <span class="ruby-constant">DESC</span> <span class="ruby-operator">:</span> <span class="ruby-constant">ASC</span>)&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">oe</span>.<span class="ruby-identifier">nulls</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:first</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">NULLS_FIRST</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-value">:last</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">NULLS_LAST</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-placeholder_literal_string_sql_append'>
                <a name='method-i-placeholder_literal_string_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>placeholder_literal_string_sql_append</span>
                  <span class='arguments'>(sql, pls)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for a literal string with placeholders</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-placeholder_literal_string_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-placeholder_literal_string_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 532</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">placeholder_literal_string_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">pls</span>)&#x000A;  <span class="ruby-identifier">args</span> = <span class="ruby-identifier">pls</span>.<span class="ruby-identifier">args</span>&#x000A;  <span class="ruby-identifier">str</span> = <span class="ruby-identifier">pls</span>.<span class="ruby-identifier">str</span>&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">pls</span>.<span class="ruby-identifier">parens</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">re</span> = <span class="ruby-node">/:(#{args.keys.map{|k| Regexp.escape(k.to_s)}.join(&#39;|&#39;)})\b/</span>&#x000A;      <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>&#x000A;        <span class="ruby-identifier">previous</span>, <span class="ruby-identifier">q</span>, <span class="ruby-identifier">str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">partition</span>(<span class="ruby-identifier">re</span>)&#x000A;        <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">previous</span>&#x000A;        <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>[(<span class="ruby-node">$1</span><span class="ruby-operator">||</span><span class="ruby-identifier">q</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">to_s</span>).<span class="ruby-identifier">to_sym</span>]) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">q</span>.<span class="ruby-identifier">empty?</span>&#x000A;        <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">empty?</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;    <span class="ruby-identifier">len</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span>&#x000A;    <span class="ruby-identifier">str</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>&#x000A;      <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>[<span class="ruby-identifier">i</span>]) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">len</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Mismatched number of placeholders (#{str.length}) and placeholder arguments (#{args.length}) when using placeholder array&quot;</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">i</span> = <span class="ruby-value">-1</span>&#x000A;    <span class="ruby-identifier">match_len</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>&#x000A;    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>&#x000A;      <span class="ruby-identifier">previous</span>, <span class="ruby-identifier">q</span>, <span class="ruby-identifier">str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">partition</span>(<span class="ruby-constant">QUESTION_MARK</span>)&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">previous</span>&#x000A;      <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>)) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">q</span>.<span class="ruby-identifier">empty?</span>&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">empty?</span>&#x000A;        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">match_len</span>&#x000A;          <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Mismatched number of placeholders (#{i+1}) and placeholder arguments (#{args.length}) when using placeholder array&quot;</span>&#x000A;        <span class="ruby-keyword">end</span>&#x000A;        <span class="ruby-keyword">break</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">pls</span>.<span class="ruby-identifier">parens</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-qualified_identifier_sql_append'>
                <a name='method-i-qualified_identifier_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>qualified_identifier_sql_append</span>
                  <span class='arguments'>(sql, table, column=(c = table.column; table = table.table; c))</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for the qualifed identifier, specifying
                  a table and a column (or schema and table). If 3 arguments are given, the
                  2nd should be the table/qualifier and the third should be column/qualified.
                  If 2 arguments are given, the 2nd should be an <a
                  href="SQL/QualifiedIdentifier.html">SQL::QualifiedIdentifier</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-qualified_identifier_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-qualified_identifier_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 579</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">qualified_identifier_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">table</span>, <span class="ruby-identifier">column</span>=(<span class="ruby-identifier">c</span> = <span class="ruby-identifier">table</span>.<span class="ruby-identifier">column</span>; <span class="ruby-identifier">table</span> = <span class="ruby-identifier">table</span>.<span class="ruby-identifier">table</span>; <span class="ruby-identifier">c</span>))&#x000A;  <span class="ruby-identifier">identifier_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">table</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">DOT</span>&#x000A;  <span class="ruby-identifier">identifier_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">column</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-quote_identifier_append'>
                <a name='method-i-quote_identifier_append'></a>
                <div class='synopsis'>
                  <span class='name'>quote_identifier_append</span>
                  <span class='arguments'>(sql, name)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds quoting to identifiers (columns and tables). If identifiers are not
                  being quoted, returns name as a string.  If identifiers are being quoted
                  quote the name with quoted_identifier.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-quote_identifier_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-quote_identifier_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 588</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">quote_identifier_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">LiteralString</span>)&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>)&#x000A;    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">input_identifier</span>(<span class="ruby-identifier">name</span>)&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">quote_identifiers?</span>&#x000A;      <span class="ruby-identifier">quoted_identifier_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>)&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-quote_schema_table_append'>
                <a name='method-i-quote_schema_table_append'></a>
                <div class='synopsis'>
                  <span class='name'>quote_schema_table_append</span>
                  <span class='arguments'>(sql, table)</span>
                </div>
                <div class='description'>
                  
                  <p>Separates the schema from the table and returns a string with them quoted
                  (if quoting identifiers)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-quote_schema_table_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-quote_schema_table_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 604</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">quote_schema_table_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">table</span>)&#x000A;  <span class="ruby-identifier">schema</span>, <span class="ruby-identifier">table</span> = <span class="ruby-identifier">schema_and_table</span>(<span class="ruby-identifier">table</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">schema</span>&#x000A;    <span class="ruby-identifier">quote_identifier_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">schema</span>)&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">DOT</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">quote_identifier_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">table</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-quoted_identifier_append'>
                <a name='method-i-quoted_identifier_append'></a>
                <div class='synopsis'>
                  <span class='name'>quoted_identifier_append</span>
                  <span class='arguments'>(sql, name)</span>
                </div>
                <div class='description'>
                  
                  <p>This method quotes the given name with the <a href="SQL.html">SQL</a>
                  standard double quote.  should be overridden by subclasses to provide
                  quoting not matching the <a href="SQL.html">SQL</a> standard, such as
                  backtick (used by MySQL and SQLite).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-quoted_identifier_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-quoted_identifier_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 616</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">quoted_identifier_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">QUOTE</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-constant">QUOTE_RE</span>, <span class="ruby-constant">DOUBLE_QUOTE</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">QUOTE</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-schema_and_table'>
                <a name='method-i-schema_and_table'></a>
                <div class='synopsis'>
                  <span class='name'>schema_and_table</span>
                  <span class='arguments'>(table_name, sch=nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Split the schema information from the table, returning two strings, one for
                  the schema and one for the table.  The returned schema may be nil, but the
                  table will always have a string value.</p>
                  
                  <p>Note that this function does not handle tables with more than one level of
                  qualification (e.g. database.schema.table on Microsoft <a
                  href="SQL.html">SQL</a> Server).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-schema_and_table-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-schema_and_table-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 627</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">schema_and_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">sch</span>=<span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">sch</span> = <span class="ruby-identifier">sch</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">sch</span>&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">table_name</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;    <span class="ruby-identifier">s</span>, <span class="ruby-identifier">t</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">split_symbol</span>(<span class="ruby-identifier">table_name</span>)&#x000A;    [<span class="ruby-identifier">s</span><span class="ruby-operator">||</span><span class="ruby-identifier">sch</span>, <span class="ruby-identifier">t</span>]&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>&#x000A;    [<span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">table</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_s</span>]&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">Identifier</span>&#x000A;    [<span class="ruby-identifier">sch</span>, <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>]&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>&#x000A;    [<span class="ruby-identifier">sch</span>, <span class="ruby-identifier">table_name</span>]&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;table_name should be a Symbol, SQL::QualifiedIdentifier, SQL::Identifier, or String&#39;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-split_qualifiers'>
                <a name='method-i-split_qualifiers'></a>
                <div class='synopsis'>
                  <span class='name'>split_qualifiers</span>
                  <span class='arguments'>(table_name, *args)</span>
                </div>
                <div class='description'>
                  
                  <p>Splits table_name into an array of strings.</p>
                  
                  <pre>ds.split_qualifiers(:s) # [&#39;s&#39;]&#x000A;ds.split_qualifiers(:t__s) # [&#39;t&#39;, &#39;s&#39;]&#x000A;ds.split_qualifiers(Sequel.qualify(:d, :t__s)) # [&#39;d&#39;, &#39;t&#39;, &#39;s&#39;]&#x000A;ds.split_qualifiers(Sequel.qualify(:h__d, :t__s)) # [&#39;h&#39;, &#39;d&#39;, &#39;t&#39;, &#39;s&#39;]</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-split_qualifiers-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-split_qualifiers-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 650</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">split_qualifiers</span>(<span class="ruby-identifier">table_name</span>, *<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">table_name</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">SQL</span><span class="ruby-operator">::</span><span class="ruby-constant">QualifiedIdentifier</span>&#x000A;    <span class="ruby-identifier">split_qualifiers</span>(<span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">table</span>, <span class="ruby-keyword">nil</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">split_qualifiers</span>(<span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">column</span>, <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">sch</span>, <span class="ruby-identifier">table</span> = <span class="ruby-identifier">schema_and_table</span>(<span class="ruby-identifier">table_name</span>, *<span class="ruby-identifier">args</span>)&#x000A;    <span class="ruby-identifier">sch</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">sch</span>, <span class="ruby-identifier">table</span>] <span class="ruby-operator">:</span> [<span class="ruby-identifier">table</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-subscript_sql_append'>
                <a name='method-i-subscript_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>subscript_sql_append</span>
                  <span class='arguments'>(sql, s)</span>
                </div>
                <div class='description'>
                  
                  <p><a href="SQL.html">SQL</a> fragment for specifying subscripts (<a
                  href="SQL.html">SQL</a> array accesses)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-subscript_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-subscript_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 661</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">subscript_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">s</span>)&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">s</span>.<span class="ruby-identifier">f</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">BRACKET_OPEN</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">range</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">sub</span>.<span class="ruby-identifier">first</span>).<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Range</span>)&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">range</span>.<span class="ruby-identifier">begin</span>)&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">COLON</span>&#x000A;    <span class="ruby-identifier">e</span> = <span class="ruby-identifier">range</span>.<span class="ruby-identifier">end</span>&#x000A;    <span class="ruby-identifier">e</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">range</span>.<span class="ruby-identifier">exclude_end?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>)&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">e</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">expression_list_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">s</span>.<span class="ruby-identifier">sub</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">BRACKET_CLOSE</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-window_function_sql_append'>
                <a name='method-i-window_function_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>window_function_sql_append</span>
                  <span class='arguments'>(sql, function, window)</span>
                </div>
                <div class='description'>
                  
                  <p>The <a href="SQL.html">SQL</a> fragment for the given window function&#39;s
                  function and window.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-window_function_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-window_function_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 718</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">window_function_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">function</span>, <span class="ruby-identifier">window</span>)&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">function</span>)&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">OVER</span>&#x000A;  <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">window</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-window_sql_append'>
                <a name='method-i-window_sql_append'></a>
                <div class='synopsis'>
                  <span class='name'>window_sql_append</span>
                  <span class='arguments'>(sql, opts)</span>
                </div>
                <div class='description'>
                  
                  <p>The <a href="SQL.html">SQL</a> fragment for the given window&#39;s options.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-window_sql_append-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-window_sql_append-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 677</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">window_sql_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&#39;This dataset does not support window functions&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_window_functions?</span>&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_OPEN</span>&#x000A;  <span class="ruby-identifier">window</span>, <span class="ruby-identifier">part</span>, <span class="ruby-identifier">order</span>, <span class="ruby-identifier">frame</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">values_at</span>(<span class="ruby-value">:window</span>, <span class="ruby-value">:partition</span>, <span class="ruby-value">:order</span>, <span class="ruby-value">:frame</span>)&#x000A;  <span class="ruby-identifier">space</span> = <span class="ruby-keyword">false</span>&#x000A;  <span class="ruby-identifier">space_s</span> = <span class="ruby-constant">SPACE</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">window</span>&#x000A;    <span class="ruby-identifier">literal_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">window</span>)&#x000A;    <span class="ruby-identifier">space</span> = <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">space_s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">space</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PARTITION_BY</span>&#x000A;    <span class="ruby-identifier">expression_list_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-constant">Array</span>(<span class="ruby-identifier">part</span>))&#x000A;    <span class="ruby-identifier">space</span> = <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">order</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">space_s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">space</span>&#x000A;    <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ORDER_BY_NS</span>&#x000A;    <span class="ruby-identifier">expression_list_append</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-constant">Array</span>(<span class="ruby-identifier">order</span>))&#x000A;    <span class="ruby-identifier">space</span> = <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">frame</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-keyword">nil</span>&#x000A;      <span class="ruby-comment"># nothing</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">:all</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">space_s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">space</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">FRAME_ALL</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">:rows</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">space_s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">space</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">FRAME_ROWS</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">space_s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">space</span>&#x000A;      <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">frame</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;invalid window frame clause, should be :all, :rows, a string, or nil&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PAREN_CLOSE</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Protected Instance methods</h2>
              <div class='method protected-instance' id='method-method-i-_insert_sql'>
                <a name='method-i-_insert_sql'></a>
                <div class='synopsis'>
                  <span class='name'>_insert_sql</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Formats in <a href="Dataset.html#INSERT">INSERT</a> statement using the
                  stored columns and values.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-_insert_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-_insert_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 727</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">_insert_sql</span>&#x000A;  <span class="ruby-identifier">clause_sql</span>(<span class="ruby-value">:insert</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-method-i-_update_sql'>
                <a name='method-i-_update_sql'></a>
                <div class='synopsis'>
                  <span class='name'>_update_sql</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Formats an <a href="Dataset.html#UPDATE">UPDATE</a> statement using the
                  stored values.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-_update_sql-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-_update_sql-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 732</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">_update_sql</span>&#x000A;  <span class="ruby-identifier">clause_sql</span>(<span class="ruby-value">:update</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-method-i-compound_from_self'>
                <a name='method-i-compound_from_self'></a>
                <div class='synopsis'>
                  <span class='name'>compound_from_self</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Return a <a href="Dataset.html#method-i-from_self">#from_self</a> dataset
                  if an order or limit is specified, so it works as expected with UNION,
                  EXCEPT, and INTERSECT clauses.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-compound_from_self-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-compound_from_self-source'><span class="ruby-comment"># File lib/sequel/dataset/sql.rb, line 738</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">compound_from_self</span>&#x000A;  (<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:limit</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:order</span>]) <span class="ruby-operator">?</span> <span class="ruby-identifier">from_self</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
